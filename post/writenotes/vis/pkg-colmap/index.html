<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="colmap/colmap - Github\nA sparse reconstruction model consists of 3 .txt files: cameras.txt, images.txt, points3D.txt Docs\nForge Colmap Result Data Code for writing data: colmap / scripts / python / read_write_model.py\ncameras.txt\nEach line is the intrinsic parameters of a camera.\nCode 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 def write_cameras_text(cameras, path): &#34;&#34;&#34; see: src/colmap/scene/reconstruction.cc void Reconstruction::WriteCamerasText(const std::string&amp; path) void Reconstruction::ReadCamerasText(const std::string&amp; path) &#34;&#34;&#34; HEADER = ( &#34;# Camera list with one line of data per camera:\\n&#34; + &#34;# CAMERA_ID, MODEL, WIDTH, HEIGHT, PARAMS[]\\n&#34; + &#34;# Number of cameras: {}\\n&#34;.format(len(cameras)) ) with open(path, &#34;w&#34;) as fid: fid.write(HEADER) for _, cam in cameras.items(): to_write = [cam.id, cam.model, cam.width, cam.height, *cam.params] line = &#34; &#34;.join([str(elem) for elem in to_write]) fid.write(line + &#34;\\n&#34;) images.txt\n">
<title>Memo: Lib - COLMAP | Install and Usages</title>

<link rel='canonical' href='http://blog.zichen.uk/post/writenotes/vis/pkg-colmap/'>

<link rel="stylesheet" href="/scss/style.min.0e95b70faf4f470dc6ba88da538ece0f8cf22d03bab371e1b345205b81899732.css"><meta property='og:title' content="Memo: Lib - COLMAP | Install and Usages">
<meta property='og:description' content="colmap/colmap - Github\nA sparse reconstruction model consists of 3 .txt files: cameras.txt, images.txt, points3D.txt Docs\nForge Colmap Result Data Code for writing data: colmap / scripts / python / read_write_model.py\ncameras.txt\nEach line is the intrinsic parameters of a camera.\nCode 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 def write_cameras_text(cameras, path): &#34;&#34;&#34; see: src/colmap/scene/reconstruction.cc void Reconstruction::WriteCamerasText(const std::string&amp; path) void Reconstruction::ReadCamerasText(const std::string&amp; path) &#34;&#34;&#34; HEADER = ( &#34;# Camera list with one line of data per camera:\\n&#34; + &#34;# CAMERA_ID, MODEL, WIDTH, HEIGHT, PARAMS[]\\n&#34; + &#34;# Number of cameras: {}\\n&#34;.format(len(cameras)) ) with open(path, &#34;w&#34;) as fid: fid.write(HEADER) for _, cam in cameras.items(): to_write = [cam.id, cam.model, cam.width, cam.height, *cam.params] line = &#34; &#34;.join([str(elem) for elem in to_write]) fid.write(line + &#34;\\n&#34;) images.txt\n">
<meta property='og:url' content='http://blog.zichen.uk/post/writenotes/vis/pkg-colmap/'>
<meta property='og:site_name' content='Zichen Wang'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='MVG' /><meta property='article:tag' content='Points' /><meta property='article:published_time' content='2024-03-14T23:40:00&#43;00:00'/><meta property='article:modified_time' content='2024-03-14T23:40:00&#43;00:00'/><meta property='og:image' content='https://colmap.github.io/_images/sparse.png' />
<meta name="twitter:title" content="Memo: Lib - COLMAP | Install and Usages">
<meta name="twitter:description" content="colmap/colmap - Github\nA sparse reconstruction model consists of 3 .txt files: cameras.txt, images.txt, points3D.txt Docs\nForge Colmap Result Data Code for writing data: colmap / scripts / python / read_write_model.py\ncameras.txt\nEach line is the intrinsic parameters of a camera.\nCode 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 def write_cameras_text(cameras, path): &#34;&#34;&#34; see: src/colmap/scene/reconstruction.cc void Reconstruction::WriteCamerasText(const std::string&amp; path) void Reconstruction::ReadCamerasText(const std::string&amp; path) &#34;&#34;&#34; HEADER = ( &#34;# Camera list with one line of data per camera:\\n&#34; + &#34;# CAMERA_ID, MODEL, WIDTH, HEIGHT, PARAMS[]\\n&#34; + &#34;# Number of cameras: {}\\n&#34;.format(len(cameras)) ) with open(path, &#34;w&#34;) as fid: fid.write(HEADER) for _, cam in cameras.items(): to_write = [cam.id, cam.model, cam.width, cam.height, *cam.params] line = &#34; &#34;.join([str(elem) for elem in to_write]) fid.write(line + &#34;\\n&#34;) images.txt\n"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://colmap.github.io/_images/sparse.png' />
    <link rel="shortcut icon" href="/favicon-32x32.png" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_b598b46054b3fa80.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Zichen Wang</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/zichen34'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com/luckily1640'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/post/writenotes/' >
                
                
                
                <span>WriteNotes</span>
            </a>
        </li>
        
        
        <li >
            <a href='/post/writenotes/model/acadmodel/aboutme/' >
                
                
                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#forge-colmap-result-data">Forge Colmap Result Data</a>
      <ol>
        <li><a href="#problems">Problems</a></li>
      </ol>
    </li>
    <li><a href="#install">Install</a>
      <ol>
        <li><a href="#ubuntu-2204-">Ubuntu 22.04 ✅</a>
          <ol>
            <li><a href="#qt-pkgs-matter">Qt Pkgs Matter</a></li>
            <li><a href="#verified-practice">Verified Practice</a></li>
          </ol>
        </li>
        <li><a href="#ubuntu-2004-">Ubuntu 20.04 ❌</a></li>
        <li><a href="#docker-image">Docker Image</a>
          <ol>
            <li><a href="#system-info">System Info</a></li>
            <li><a href="#modify-sh-for-dynm-pages">Modify Sh for Dynm Pages</a></li>
            <li><a href="#execute-colmap">Execute Colmap</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#colmap-used-by-3dgs">Colmap Used by 3DGS</a></li>
    <li><a href="#convert-sparse-bin-to-ply">Convert Sparse bin to Ply</a></li>
    <li><a href="#visualize-sparse-point-cloud">Visualize Sparse Point Cloud</a></li>
    <li><a href="#pycolmap">PyCOLMAP</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/post/writenotes/vis/pkg-colmap/">
                
                    <img src="https://colmap.github.io/_images/sparse.png" loading="lazy" alt="Featured image of post Memo: Lib - COLMAP | Install and Usages" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/memo/" style="background-color: #6e57d2; color: #fff;">
                Memo
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/writenotes/vis/pkg-colmap/">Memo: Lib - COLMAP | Install and Usages</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Mar 14, 2024</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    35 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
<section class="toc toc--inline">
    <h2 class="">Table of contents</h2>
    <div class="" >
        <nav id="TableOfContents">
  <ol>
    <li><a href="#forge-colmap-result-data">Forge Colmap Result Data</a>
      <ol>
        <li><a href="#problems">Problems</a></li>
      </ol>
    </li>
    <li><a href="#install">Install</a>
      <ol>
        <li><a href="#ubuntu-2204-">Ubuntu 22.04 ✅</a>
          <ol>
            <li><a href="#qt-pkgs-matter">Qt Pkgs Matter</a></li>
            <li><a href="#verified-practice">Verified Practice</a></li>
          </ol>
        </li>
        <li><a href="#ubuntu-2004-">Ubuntu 20.04 ❌</a></li>
        <li><a href="#docker-image">Docker Image</a>
          <ol>
            <li><a href="#system-info">System Info</a></li>
            <li><a href="#modify-sh-for-dynm-pages">Modify Sh for Dynm Pages</a></li>
            <li><a href="#execute-colmap">Execute Colmap</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#colmap-used-by-3dgs">Colmap Used by 3DGS</a></li>
    <li><a href="#convert-sparse-bin-to-ply">Convert Sparse bin to Ply</a></li>
    <li><a href="#visualize-sparse-point-cloud">Visualize Sparse Point Cloud</a></li>
    <li><a href="#pycolmap">PyCOLMAP</a></li>
  </ol>
</nav>

    </div>
</section>



    
    
    <p><a class="link" href="https://github.com/colmap/colmap"  target="_blank" rel="noopener"
    >colmap/colmap - Github</a></p>
<p>A sparse reconstruction model consists of 3 <code>.txt</code> files: <code>cameras.txt</code>, <code>images.txt</code>, <code>points3D.txt</code>
<a class="link" href="https://colmap.github.io/format.html#sparse-reconstruction"  target="_blank" rel="noopener"
    >Docs</a></p>
<hr>
<h2 id="forge-colmap-result-data">Forge Colmap Result Data
</h2><p>Code for writing data:
<a class="link" href="https://github.com/colmap/colmap/blob/main/scripts/python/read_write_model.py"  target="_blank" rel="noopener"
    >colmap / scripts / python / read_write_model.py</a></p>
<p><code>cameras.txt</code></p>
<p>Each line is the intrinsic parameters of a camera.</p>
<details><summary>Code</summary>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">write_cameras_text</span><span class="p">(</span><span class="n">cameras</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    see: src/colmap/scene/reconstruction.cc
</span></span></span><span class="line"><span class="cl"><span class="s2">        void Reconstruction::WriteCamerasText(const std::string&amp; path)
</span></span></span><span class="line"><span class="cl"><span class="s2">        void Reconstruction::ReadCamerasText(const std::string&amp; path)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">HEADER</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;# Camera list with one line of data per camera:</span><span class="se">\n</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">+</span> <span class="s2">&#34;#   CAMERA_ID, MODEL, WIDTH, HEIGHT, PARAMS[]</span><span class="se">\n</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">+</span> <span class="s2">&#34;# Number of cameras: </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cameras</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">HEADER</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">cam</span> <span class="ow">in</span> <span class="n">cameras</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">to_write</span> <span class="o">=</span> <span class="p">[</span><span class="n">cam</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">cam</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">cam</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">cam</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="o">*</span><span class="n">cam</span><span class="o">.</span><span class="n">params</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="n">line</span> <span class="o">=</span> <span class="s2">&#34; &#34;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">to_write</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span> <span class="o">+</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></details>
<hr>
<p><code>images.txt</code></p>
<p>One camera has two lines. The 1-st line includes extrinsic parameters. The 2-nd line lists the coordinates of 2D keypoints.</p>
<details>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">write_images_text</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    see: src/colmap/scene/reconstruction.cc
</span></span></span><span class="line"><span class="cl"><span class="s2">        void Reconstruction::ReadImagesText(const std::string&amp; path)
</span></span></span><span class="line"><span class="cl"><span class="s2">        void Reconstruction::WriteImagesText(const std::string&amp; path)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">mean_observations</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">mean_observations</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">point3D_ids</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">images</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">HEADER</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;# Image list with two lines of data per image:</span><span class="se">\n</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">+</span> <span class="s2">&#34;#   IMAGE_ID, QW, QX, QY, QZ, TX, TY, TZ, CAMERA_ID, NAME</span><span class="se">\n</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">+</span> <span class="s2">&#34;#   POINTS2D[] as (X, Y, POINT3D_ID)</span><span class="se">\n</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">+</span> <span class="s2">&#34;# Number of images: </span><span class="si">{}</span><span class="s2">, mean observations per image: </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">),</span> <span class="n">mean_observations</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">HEADER</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">images</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">image_header</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="n">img</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="o">*</span><span class="n">img</span><span class="o">.</span><span class="n">qvec</span><span class="p">,</span> <span class="o">*</span><span class="n">img</span><span class="o">.</span><span class="n">tvec</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">camera_id</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="n">first_line</span> <span class="o">=</span> <span class="s2">&#34; &#34;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">image_header</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">first_line</span> <span class="o">+</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">points_strings</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">xy</span><span class="p">,</span> <span class="n">point3D_id</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">xys</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">point3D_ids</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">points_strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="p">[</span><span class="o">*</span><span class="n">xy</span><span class="p">,</span> <span class="n">point3D_id</span><span class="p">])))</span>
</span></span><span class="line"><span class="cl">            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">points_strings</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></details>
<hr>
<p><code>points3D.txt</code></p>
<p>Each line is a 3D point.</p>
<details>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">write_points3D_text</span><span class="p">(</span><span class="n">points3D</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    see: src/colmap/scene/reconstruction.cc
</span></span></span><span class="line"><span class="cl"><span class="s2">        void Reconstruction::ReadPoints3DText(const std::string&amp; path)
</span></span></span><span class="line"><span class="cl"><span class="s2">        void Reconstruction::WritePoints3DText(const std::string&amp; path)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points3D</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">mean_track_length</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">mean_track_length</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">image_ids</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">points3D</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">points3D</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">HEADER</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;# 3D point list with one line of data per point:</span><span class="se">\n</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">+</span> <span class="s2">&#34;#   POINT3D_ID, X, Y, Z, R, G, B, ERROR, TRACK[] as (IMAGE_ID, POINT2D_IDX)</span><span class="se">\n</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">+</span> <span class="s2">&#34;# Number of points: </span><span class="si">{}</span><span class="s2">, mean track length: </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="nb">len</span><span class="p">(</span><span class="n">points3D</span><span class="p">),</span> <span class="n">mean_track_length</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">HEADER</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">points3D</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">point_header</span> <span class="o">=</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="o">*</span><span class="n">pt</span><span class="o">.</span><span class="n">xyz</span><span class="p">,</span> <span class="o">*</span><span class="n">pt</span><span class="o">.</span><span class="n">rgb</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">error</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">point_header</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&#34; &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">track_strings</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">image_id</span><span class="p">,</span> <span class="n">point2D</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">image_ids</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">point2D_idxs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">track_strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="p">[</span><span class="n">image_id</span><span class="p">,</span> <span class="n">point2D</span><span class="p">])))</span>
</span></span><span class="line"><span class="cl">            <span class="n">fid</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">track_strings</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></details>
<h3 id="problems">Problems
</h3><p>I didn&rsquo;t manage to realize the method as the following problems:</p>
<ul>
<li>
<p>Each image entry requires specify 2D keypoints.</p>
<p>Not sure how to obtain them yet.</p>
</li>
<li>
<p>Are the X-Y-Z axes of <a class="link" href="https://roboimagedata.compute.dtu.dk/?page_id=36"  target="_blank" rel="noopener"
    >DTU</a>
camera aligned with right-bottom-front in COLMAP ?</p>
<p>This may require visulization to verify.</p>
</li>
</ul>
<hr>
<h2 id="install">Install
</h2><h3 id="ubuntu-2204-">Ubuntu 22.04 ✅
</h3><p>(2024-04-17)</p>
<p>OS: Ubuntu 22.04.4 LTS x86_64, Kernel: 6.5.0-27-generic</p>
<ol>
<li>
<p>Install dependencies:</p>
<details><summary>Packages list</summary> {{{
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    git <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    cmake <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    ninja-build <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    build-essential <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libboost-program-options-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libboost-filesystem-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libboost-graph-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libboost-system-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libeigen3-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libflann-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libfreeimage-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libmetis-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libgoogle-glog-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libgtest-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libsqlite3-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libglew-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    qtbase5-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libqt5opengl5-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libcgal-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libceres-dev
</span></span></code></pre></td></tr></table>
</div>
</div><p>}}}</p>
</details>
<p>Qt dependencies has conflicts.</p>
<details><summary>Error message:</summary> {{{
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">The following packages have unmet dependencies:
</span></span><span class="line"><span class="cl"> libqt5opengl5 : Depends: qtbase-abi-5-15-3
</span></span><span class="line"><span class="cl"> qtbase5-dev : Depends: libqt5concurrent5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5core5a <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5dbus5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5gui5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5network5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5printsupport5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5sql5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but it is not going to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5test5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but it is not going to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5widgets5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5xml5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: qtbase5-dev-tools <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span>
</span></span><span class="line"><span class="cl">E: Unable to correct problems, you have held broken packages.
</span></span></code></pre></td></tr></table>
</div>
</div><p>}}}</p>
</details>
<p>Some posts suggests that the <code>libqt5opengl5</code> has already been included into qt</p>
<p>Reference:</p>
<ol>
<li>
<p><a class="link" href="https://stackoverflow.com/a/48597621/18003182"  target="_blank" rel="noopener"
    >cannot install qtbase-abi-5-5-1 on ubuntu 17.10 -SO</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">(</span>base<span class="o">)</span> zichen@homepc:~$ apt-cache search qtbase-abi
</span></span><span class="line"><span class="cl">libqt5core5a - Qt <span class="m">5</span> core module
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><a class="link" href="https://blog.csdn.net/qq_43541236/article/details/130808237"  target="_blank" rel="noopener"
    >ubuntu22.04安装软件出现qtbase错误_qtbase-abi-5-15-3-CSDN博客</a></p>
</li>
<li>
<p><a class="link" href="https://bbs.deepin.org/en/post/221202"  target="_blank" rel="noopener"
    >这依赖捞不着啊- Community - Deepin Technology</a></p>
</li>
</ol>
</li>
</ol>
<hr>
<ol start="2">
<li>
<p>I want to skip those 2 packages and compile directly.
However, got error:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">(</span>base<span class="o">)</span> zichen@homepc:~/Downloads/colmap/build$ cmake .. -GNinja
</span></span><span class="line"><span class="cl">-- The C compiler identification is GNU 9.5.0
</span></span><span class="line"><span class="cl">-- The CXX compiler identification is GNU 9.5.0
</span></span><span class="line"><span class="cl">-- Detecting C compiler ABI info
</span></span><span class="line"><span class="cl">-- Detecting C compiler ABI info - <span class="k">done</span>
</span></span><span class="line"><span class="cl">-- Check <span class="k">for</span> working C compiler: /usr/bin/cc - skipped
</span></span><span class="line"><span class="cl">-- Detecting C compile features
</span></span><span class="line"><span class="cl">-- Detecting C compile features - <span class="k">done</span>
</span></span><span class="line"><span class="cl">-- Detecting CXX compiler ABI info
</span></span><span class="line"><span class="cl">-- Detecting CXX compiler ABI info - <span class="k">done</span>
</span></span><span class="line"><span class="cl">-- Check <span class="k">for</span> working CXX compiler: /usr/bin/c++ - skipped
</span></span><span class="line"><span class="cl">-- Detecting CXX compile features
</span></span><span class="line"><span class="cl">-- Detecting CXX compile features - <span class="k">done</span>
</span></span><span class="line"><span class="cl">-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake <span class="o">(</span>found version <span class="s2">&#34;1.74.0&#34;</span><span class="o">)</span> found components: filesystem graph program_options system 
</span></span><span class="line"><span class="cl">CMake Error at cmake/FindFLANN.cmake:89 <span class="o">(</span>message<span class="o">)</span>:
</span></span><span class="line"><span class="cl">  Could not find FLANN
</span></span><span class="line"><span class="cl">Call Stack <span class="o">(</span>most recent call first<span class="o">)</span>:
</span></span><span class="line"><span class="cl">  cmake/FindDependencies.cmake:17 <span class="o">(</span>find_package<span class="o">)</span>
</span></span><span class="line"><span class="cl">  CMakeLists.txt:96 <span class="o">(</span>include<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-- Configuring incomplete, errors occurred!
</span></span></code></pre></td></tr></table>
</div>
</div><p>Found this issue: <a class="link" href="https://github.com/colmap/colmap/issues/1451#issuecomment-1062720119"  target="_blank" rel="noopener"
    >Colmap cmake .. error #1451</a></p>
</li>
</ol>
<hr>
<ol start="3">
<li>
<p>I indeed have not installed the <code>libmetis-dev</code> and other packages except for the above 2 missing packages:</p>
<details><summary>Packages list</summary> {{{
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get install <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    git <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    cmake <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    ninja-build <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    build-essential <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libboost-program-options-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libboost-filesystem-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libboost-graph-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libboost-system-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libeigen3-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libflann-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libfreeimage-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libmetis-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libgoogle-glog-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libgtest-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libsqlite3-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libglew-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libcgal-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    libceres-dev
</span></span></code></pre></td></tr></table>
</div>
</div><p>}}}</p>
</details>
<p>Linking failed:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"> /home/zichen/anaconda3/lib/libQt5OpenGL.so.5.15.2  /home/zichen/anaconda3/lib/libQt5Widgets.so.5.15.2  /home/zichen/anaconda3/lib/libQt5Gui.so.5.15.2  /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2  -lcudadevrt  -lcudart_static  -lrt  -lpthread  -ldl <span class="o">&amp;&amp;</span> :
</span></span><span class="line"><span class="cl">/usr/bin/ld: /usr/lib/x86_64-linux-gnu/libfreeimage.so: undefined reference to <span class="sb">`</span>TIFFFieldTag@LIBTIFF_4.0<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /usr/lib/x86_64-linux-gnu/libfreeimage.so: undefined reference to `TIFFFieldName@LIBTIFF_4.0&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /usr/lib/x86_64-linux-gnu/libfreeimage.so: undefined reference to <span class="sb">`</span>TIFFFieldReadCount@LIBTIFF_4.0<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /usr/lib/x86_64-linux-gnu/libfreeimage.so: undefined reference to `TIFFFieldPassCount@LIBTIFF_4.0&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /usr/lib/x86_64-linux-gnu/libfreeimage.so: undefined reference to <span class="sb">`</span>TIFFFieldDataType@LIBTIFF_4.0<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /usr/lib/x86_64-linux-gnu/libfreeimage.so: undefined reference to `_TIFFDataSize@LIBTIFF_4.0&#39;</span>
</span></span><span class="line"><span class="cl">collect2: error: ld returned <span class="m">1</span> <span class="nb">exit</span> status
</span></span><span class="line"><span class="cl">ninja: build stopped: subcommand failed.
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<hr>
<ol start="4">
<li>
<p>Uninstall <code>libtiff</code></p>
<p>According to this issue:
<a class="link" href="https://github.com/colmap/colmap/issues/1803#issuecomment-1431890164"  target="_blank" rel="noopener"
    >/usr/bin/ld: /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-linux-gnu/libfreeimage.so: undefined reference to `_TIFFDataSize@LIBTIFF_4.0&rsquo; collect2: error: ld returned 1 exit status ninja: build stopped: subcommand failed. #1803</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ninja clean
</span></span><span class="line"><span class="cl">conda uninstall libtiff
</span></span><span class="line"><span class="cl">cmake .. -GNinja
</span></span><span class="line"><span class="cl">ninja
</span></span></code></pre></td></tr></table>
</div>
</div><p>I have <code>libtiff</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">(</span>base<span class="o">)</span> zichen@homepc:~/Downloads/colmap/build$ conda list libtiff
</span></span><span class="line"><span class="cl"><span class="c1"># packages in environment at /home/zichen/anaconda3:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Name        Version           Build  Channel</span>
</span></span><span class="line"><span class="cl">libtiff       4.5.0        h6a678d5_2    https://repo.anaconda.com/pkgs/main
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<hr>
<ol start="5">
<li>
<p>Another error about libQt5:</p>
<details> {{{
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>213/213<span class="o">]</span> Linking CXX executable src/colmap/exe/colmap
</span></span><span class="line"><span class="cl">FAILED: src/colmap/exe/colmap 
</span></span><span class="line"><span class="cl">: <span class="o">&amp;&amp;</span> /usr/bin/c++ -Wno-maybe-uninitialized -Wall -O3 -DNDEBUG  src/colmap/exe/CMakeFiles/colmap_main.dir/feature.cc.o src/colmap/exe/CMakeFiles/colmap_main.dir/sfm.cc.o src/colmap/exe/CMakeFiles/colmap_main.dir/colmap.cc.o src/colmap/exe/CMakeFiles/colmap_main.dir/database.cc.o src/colmap/exe/CMakeFiles/colmap_main.dir/gui.cc.o src/colmap/exe/CMakeFiles/colmap_main.dir/image.cc.o src/colmap/exe/CMakeFiles/colmap_main.dir/model.cc.o src/colmap/exe/CMakeFiles/colmap_main.dir/mvs.cc.o src/colmap/exe/CMakeFiles/colmap_main.dir/vocab_tree.cc.o -o src/colmap/exe/colmap -L/usr/local/cuda-11.6/targets/x86_64-linux/lib/stubs   -L/usr/local/cuda-11.6/targets/x86_64-linux/lib -Wl,-rpath,/usr/local/cuda-11.6/targets/x86_64-linux/lib:/home/zichen/anaconda3/lib:  src/colmap/controllers/libcolmap_controllers.a  src/colmap/retrieval/libcolmap_retrieval.a  src/colmap/scene/libcolmap_scene.a  src/colmap/sfm/libcolmap_sfm.a  src/colmap/util/libcolmap_util.a  src/colmap/util/libcolmap_util_cuda.a  src/colmap/mvs/libcolmap_mvs_cuda.a  src/colmap/ui/libcolmap_ui.a  src/colmap/util/libcolmap_util_cuda.a  src/colmap/controllers/libcolmap_controllers.a  src/colmap/retrieval/libcolmap_retrieval.a  src/colmap/sfm/libcolmap_sfm.a  src/colmap/mvs/libcolmap_mvs.a  src/thirdparty/PoissonRecon/libcolmap_poisson_recon.a  /usr/lib/x86_64-linux-gnu/libgmpxx.so  /usr/lib/x86_64-linux-gnu/libmpfr.so  /usr/lib/x86_64-linux-gnu/libgmp.so  src/colmap/estimators/libcolmap_estimators.a  src/colmap/feature/libcolmap_feature.a  /usr/lib/x86_64-linux-gnu/libflann.so  /usr/lib/x86_64-linux-gnu/liblz4.so  src/thirdparty/SiftGPU/libcolmap_sift_gpu.a  /usr/local/cuda-11.6/targets/x86_64-linux/lib/libcudart.so  /usr/local/cuda-11.6/targets/x86_64-linux/lib/libcurand.so  /usr/lib/x86_64-linux-gnu/libGLEW.so  src/colmap/optim/libcolmap_optim.a  /usr/lib/x86_64-linux-gnu/libboost_program_options.so.1.74.0  src/colmap/image/libcolmap_image.a  src/colmap/scene/libcolmap_scene.a  src/colmap/feature/libcolmap_feature_types.a  src/colmap/geometry/libcolmap_geometry.a  src/colmap/math/libcolmap_math.a  /usr/lib/x86_64-linux-gnu/libmetis.so  /usr/lib/x86_64-linux-gnu/libboost_graph.so.1.74.0  /usr/lib/x86_64-linux-gnu/libboost_regex.so.1.74.0  src/colmap/sensor/libcolmap_sensor.a  src/colmap/util/libcolmap_util.a  /usr/lib/x86_64-linux-gnu/libboost_filesystem.so.1.74.0  /usr/lib/x86_64-linux-gnu/libsqlite3.so  /usr/lib/x86_64-linux-gnu/libGLX.so  /usr/lib/x86_64-linux-gnu/libOpenGL.so  /usr/lib/libceres.so.2.0.0  /usr/lib/x86_64-linux-gnu/libglog.so.0.4.0  /usr/lib/x86_64-linux-gnu/libunwind.so  /usr/lib/x86_64-linux-gnu/libgflags.so.2.2.2  -lpthread  src/thirdparty/VLFeat/libcolmap_vlfeat.a  /usr/lib/gcc/x86_64-linux-gnu/9/libgomp.so  /usr/lib/x86_64-linux-gnu/libpthread.a  /usr/lib/x86_64-linux-gnu/libfreeimage.so  src/thirdparty/LSD/libcolmap_lsd.a  /home/zichen/anaconda3/lib/libQt5OpenGL.so.5.15.2  /home/zichen/anaconda3/lib/libQt5Widgets.so.5.15.2  /home/zichen/anaconda3/lib/libQt5Gui.so.5.15.2  /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2  -lcudadevrt  -lcudart_static  -lrt  -lpthread  -ldl <span class="o">&amp;&amp;</span> :
</span></span><span class="line"><span class="cl">/usr/bin/ld: warning: libicui18n.so.58, needed by /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2, not found <span class="o">(</span>try using -rpath or -rpath-link<span class="o">)</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: warning: libicuuc.so.58, needed by /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2, not found <span class="o">(</span>try using -rpath or -rpath-link<span class="o">)</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: warning: libicudata.so.58, needed by /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2, not found <span class="o">(</span>try using -rpath or -rpath-link<span class="o">)</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>u_errorName_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucal_setMillis_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucnv_getAlias_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucal_inDaylightTime_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>u_strToLower_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucnv_getStandardName_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>u_strToUpper_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucnv_setSubstChars_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucnv_getMaxCharSize_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucal_getTimeZoneDisplayName_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucnv_fromUnicode_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucnv_open_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucnv_getDefaultName_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucal_getDefaultTimeZone_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucal_clone_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucal_getDSTSavings_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucol_strcoll_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucnv_close_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucnv_countAvailable_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucal_openCountryTimeZones_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucol_open_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucnv_compareNames_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucal_close_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucnv_getAvailableName_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucal_openTimeZoneIDEnumeration_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucal_open_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucol_setAttribute_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucal_openTimeZones_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>uenum_close_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucnv_countAliases_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucol_close_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `ucol_getSortKey_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucal_get_58<span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to `uenum_next_58&#39;</span>
</span></span><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>ucnv_toUnicode_58<span class="err">&#39;</span>
</span></span><span class="line"><span class="cl">collect2: error: ld returned <span class="m">1</span> <span class="nb">exit</span> status
</span></span><span class="line"><span class="cl">ninja: build stopped: subcommand failed.
</span></span></code></pre></td></tr></table>
</div>
</div><p>}}}</p>
</details>
<p>Reference:</p>
<ol>
<li>
<p><a class="link" href="https://stackoverflow.com/q/29455836/18003182"  target="_blank" rel="noopener"
    >Linkage against libQt5Core - SO</a></p>
</li>
<li>
<p><a class="link" href="https://github.com/sofa-framework/sofa/issues/3829#issuecomment-1539235154"  target="_blank" rel="noopener"
    >Build from source error libQt5Core.so.5.15.2: undefined reference to #3829</a></p>
</li>
</ol>
<p>I already have <code>libicu-dev</code> installed.</p>
</li>
</ol>
<hr>
<ol start="6">
<li>
<p>Install <code>qtbase5-dev</code></p>
<p>I noticed the error said: &ldquo;warning: libicudata.so.58, <strong>needed</strong> by /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2, not found&rdquo;.</p>
<p>And the binary couldn&rsquo;t find symbols: &ldquo;/home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to u_errorName_58'&rdquo;</p>
<p>I didn&rsquo;t have Qt? Is this why there is the <a class="link" href="https://stackoverflow.com/questions/29455836/linkage-against-libqt5core#comment47080610_29455836"  target="_blank" rel="noopener"
    >suggestion</a>?</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo aptitude install qtbase5-dev
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Someone used <code>aptitude</code> to install the above 2 packages.
<a class="link" href="https://blog.csdn.net/xm_1139164554/article/details/134581359"  target="_blank" rel="noopener"
    >Ubuntu20.04安装colmap从零开始全过程记录（包括CUDA/CUDNN/ceres/anaconda） - CSDN</a></li>
</ul>
<p>I forgot to check Qt before installing qtbase5:
<a class="link" href="https://stackoverflow.com/a/62095908/18003182"  target="_blank" rel="noopener"
    >How to find Version of Qt? - SO</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">(</span>base<span class="o">)</span> zichen@homepc:~/Downloads/colmap$ <span class="nv">QT_SELECT</span><span class="o">=</span><span class="m">5</span> qmake -v
</span></span><span class="line"><span class="cl">QMake version 3.1
</span></span><span class="line"><span class="cl">Using Qt version 5.15.2 in /home/zichen/anaconda3/lib
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>(2024-04-19) I accepted the first solution provided by the <code>aptitude</code>.
But, I didn&rsquo;t notice that the 1st solution is to keep everything unchanged and give up installing qtbase5.</li>
</ul>
</li>
</ol>
<hr>
<h4 id="qt-pkgs-matter">Qt Pkgs Matter
</h4><p>(2024-04-19)</p>
<ul>
<li>
<p>The &ldquo;undefined reference&rdquo; errors persist:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">/usr/bin/ld: /home/zichen/anaconda3/lib/libQt5Core.so.5.15.2: undefined reference to <span class="sb">`</span>u_errorName_58<span class="err">&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<ol>
<li>
<p>I <strong>uninstalled</strong> anaconda (removed ~/anaconda3 to /mnt), based on this answer:
<a class="link" href="https://askubuntu.com/a/1025443/1563949"  target="_blank" rel="noopener"
    >OpenCV undefined references for libQt5Core.so.5 - raggot</a>
(Found by search the above <a class="link" href="https://duckduckgo.com/?q=usr%2Fbin%2Fld%3A&#43;%2Fhome%2Fzichen%2Fanaconda3%2Flib%2FlibQt5Core.so.5.15.2%3A&#43;undefined&#43;reference&#43;to&#43;%60u_errorName_58%27&amp;ia=web"  target="_blank" rel="noopener"
    >error</a>).</p>
<ul>
<li>I tested later that rename the <code>~/anaconda3</code> works as well.
<a class="link" href="https://blog.csdn.net/Stay_Foo_lish/article/details/134318450"  target="_blank" rel="noopener"
    >【超详细】安装了anaconda后，Ubuntu18+COLMAP配置疯狂踩坑踩至魔怔的记录 - CSDN</a></li>
</ul>
</li>
<li>
<p>Then <code>cmake .. -GNinja</code>. It could not find Qt5:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">CMake Error at cmake/FindDependencies.cmake:150 <span class="o">(</span>find_package<span class="o">)</span>:
</span></span><span class="line"><span class="cl">  By not providing <span class="s2">&#34;FindQt5.cmake&#34;</span> in CMAKE_MODULE_PATH this project has
</span></span><span class="line"><span class="cl">  asked CMake to find a package configuration file provided by <span class="s2">&#34;Qt5&#34;</span>, but
</span></span><span class="line"><span class="cl">  CMake did not find one.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  Could not find a package configuration file provided by <span class="s2">&#34;Qt5&#34;</span> <span class="o">(</span>requested
</span></span><span class="line"><span class="cl">  version 5.4<span class="o">)</span> with any of the following names:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Qt5Config.cmake
</span></span><span class="line"><span class="cl">    qt5-config.cmake
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  Add the installation prefix of <span class="s2">&#34;Qt5&#34;</span> to CMAKE_PREFIX_PATH or <span class="nb">set</span> <span class="s2">&#34;Qt5_DIR&#34;</span>
</span></span><span class="line"><span class="cl">  to a directory containing one of the above files.  If <span class="s2">&#34;Qt5&#34;</span> provides a
</span></span><span class="line"><span class="cl">  separate development package or SDK, be sure it has been installed.
</span></span><span class="line"><span class="cl">Call Stack <span class="o">(</span>most recent call first<span class="o">)</span>:
</span></span><span class="line"><span class="cl">  CMakeLists.txt:96 <span class="o">(</span>include<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Qt5 has been existed on the system:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ <span class="nv">QT_SELECT</span><span class="o">=</span><span class="m">5</span> qmake -v
</span></span><span class="line"><span class="cl">QMake version 3.1
</span></span><span class="line"><span class="cl">Using Qt version 5.15.3 in /usr/lib/x86_64-linux-gnu
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Specifing path to Qt5 doesn&rsquo;t work:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cmake .. -DQt5_DIR<span class="o">=</span>/usr/lib/x86_64-linux-gnu/ -GNinja
</span></span><span class="line"><span class="cl">cmake .. -DCMAKE_PREFIX_PATH<span class="o">=</span>/usr/lib/x86_64-linux-gnu/ -GNinja
</span></span><span class="line"><span class="cl">cmake -B ./build -DCMAKE_PREFIX_PATH<span class="o">=</span><span class="s2">&#34;/usr/lib/x86_64-linux-gnu/qt5;/usr/lib/qt5;/usr/share/qt5&#34;</span> -GNinja
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>I really don&rsquo;t have Qt?</p>
<p>&ldquo;ubuntu check qt version&rdquo; <a class="link" href="https://duckduckgo.com/?q=ubuntu&#43;check&#43;qt&#43;version&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ qmake -v
</span></span><span class="line"><span class="cl">qmake: could not find a Qt installation of <span class="s1">&#39;&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The following packages already existed on the system:
(<a class="link" href="https://stackoverflow.com/questions/23058718/how-to-find-version-of-qt"  target="_blank" rel="noopener"
    >qt4 - How to find Version of Qt? - SO</a>)</p>
<details><summary>qt related pkgs on my computer:</summary> {{{
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ dpkg -l <span class="p">|</span> grep qt
</span></span><span class="line"><span class="cl">ri  libfcitx-qt5-1:amd64            1.2.7-1.2build1              amd64        Free Chinese Input Toy of X - D-Bus client libraries <span class="k">for</span> Qt5
</span></span><span class="line"><span class="cl">ri  libfcitx-qt5-data               1.2.7-1.2build1              all          Free Chinese Input Toy of X - data files <span class="k">for</span> Qt5 integration
</span></span><span class="line"><span class="cl">ii  libgsettings-qt1:amd64          0.2-4                        amd64        library to access GSettings from Qt <span class="o">(</span>shared libraries<span class="o">)</span>
</span></span><span class="line"><span class="cl">ii  libqt5core5a:amd64              5.15.8.1-1+dde               amd64        Qt <span class="m">5</span> core module
</span></span><span class="line"><span class="cl">ii  libqt5core5a:i386               5.15.8.1-1+dde               i386         Qt <span class="m">5</span> core module
</span></span><span class="line"><span class="cl">ii  libqt5dbus5:amd64               5.15.8.1-1+dde               amd64        Qt <span class="m">5</span> D-Bus module
</span></span><span class="line"><span class="cl">ii  libqt5dbus5:i386                5.15.8.1-1+dde               i386         Qt <span class="m">5</span> D-Bus module
</span></span><span class="line"><span class="cl">ii  libqt5gui5:amd64                5.15.8.1-1+dde               amd64        Qt <span class="m">5</span> GUI module
</span></span><span class="line"><span class="cl">ii  libqt5network5:amd64            5.15.8.1-1+dde               amd64        Qt <span class="m">5</span> network module
</span></span><span class="line"><span class="cl">ri  libqt5positioning5:amd64        5.15.8-1+dde                 amd64        Qt Positioning module
</span></span><span class="line"><span class="cl">ri  libqt5printsupport5:amd64       5.15.8.1-1+dde               amd64        Qt <span class="m">5</span> print support module
</span></span><span class="line"><span class="cl">ii  libqt5qml5:amd64                5.15.8.1-1+dde               amd64        Qt <span class="m">5</span> QML module
</span></span><span class="line"><span class="cl">ii  libqt5qmlmodels5:amd64          5.15.8.1-1+dde               amd64        Qt <span class="m">5</span> QML Models library
</span></span><span class="line"><span class="cl">ii  libqt5quick5:amd64              5.15.8.1-1+dde               amd64        Qt <span class="m">5</span> Quick library
</span></span><span class="line"><span class="cl">ii  libqt5quickwidgets5:amd64       5.15.8.1-1+dde               amd64        Qt <span class="m">5</span> Quick Widgets library
</span></span><span class="line"><span class="cl">ri  libqt5webchannel5:amd64         5.15.8-1+dde                 amd64        Web communication library <span class="k">for</span> Qt
</span></span><span class="line"><span class="cl">ii  libqt5widgets5:amd64            5.15.8.1-1+dde               amd64        Qt <span class="m">5</span> widgets module
</span></span><span class="line"><span class="cl">ri  libqt5x11extras5:amd64          5.15.8-1+dde                 amd64        Qt <span class="m">5</span> X11 extras
</span></span><span class="line"><span class="cl">ii  qt5-qmake:amd64                 5.15.3+dfsg-2ubuntu0.2       amd64        Qt <span class="m">5</span> qmake Makefile generator tool
</span></span><span class="line"><span class="cl">ii  qt5-qmake-bin                   5.15.3+dfsg-2ubuntu0.2       amd64        Qt <span class="m">5</span> qmake Makefile generator tool — binary file
</span></span><span class="line"><span class="cl">ii  qtchooser                       66-2build1                   amd64        Wrapper to <span class="k">select</span> between Qt development binary versions
</span></span><span class="line"><span class="cl">ii  qttranslations5-l10n            5.15.3-1                     all          translations <span class="k">for</span> Qt <span class="m">5</span>
</span></span><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$
</span></span></code></pre></td></tr></table>
</div>
</div><p>}}}</p>
</details>
<p><a class="link" href="https://askubuntu.com/a/921385/1563949"  target="_blank" rel="noopener"
    >How to make sure that Qt5.4.2 is installed properly</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ whereis qt5
</span></span><span class="line"><span class="cl">qt5: /usr/lib/x86_64-linux-gnu/qt5 /usr/lib/qt5 /usr/share/qt5
</span></span></code></pre></td></tr></table>
</div>
</div><p>I have <code>qmake</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ <span class="nb">export</span> <span class="nv">QT_SELECT</span><span class="o">=</span>qt5-x86_64-linux-gnu
</span></span><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ qmake -v
</span></span><span class="line"><span class="cl">QMake version 3.1
</span></span><span class="line"><span class="cl">Using Qt version 5.15.3 in /usr/lib/x86_64-linux-gnu
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Only 1 binary <code>qmake</code> exists:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ tree /usr/lib/qt5
</span></span><span class="line"><span class="cl">/usr/lib/qt5
</span></span><span class="line"><span class="cl">└── bin
</span></span><span class="line"><span class="cl">    └── qmake
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">1</span> directory, <span class="m">1</span> file
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>There should be other libraries or binaries for <strong>dev</strong>elopment.</li>
</ul>
</li>
</ol>
<hr>
<ol start="6">
<li>
<p><code>apt</code> can find <code>qtbase5-dev</code>, but I can&rsquo;t install:
<a class="link" href="https://askubuntu.com/q/1404263/1563949"  target="_blank" rel="noopener"
    >How do you install qt on ubuntu22.04</a></p>
<details><summary>Log</summary> {{{
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ apt-cache search qt
</span></span><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ sudo apt-get install qtbase5-dev
</span></span><span class="line"><span class="cl">Reading package lists... Done
</span></span><span class="line"><span class="cl">Building dependency tree... Done
</span></span><span class="line"><span class="cl">Reading state information... Done
</span></span><span class="line"><span class="cl">Some packages could not be installed. This may mean that you have
</span></span><span class="line"><span class="cl">requested an impossible situation or <span class="k">if</span> you are using the unstable
</span></span><span class="line"><span class="cl">distribution that some required packages have not yet been created
</span></span><span class="line"><span class="cl">or been moved out of Incoming.
</span></span><span class="line"><span class="cl">The following information may <span class="nb">help</span> to resolve the situation:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">The following packages have unmet dependencies:
</span></span><span class="line"><span class="cl"> qtbase5-dev : Depends: libqt5concurrent5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5core5a <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5dbus5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5gui5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5network5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5printsupport5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5sql5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but it is not going to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5test5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but it is not going to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5widgets5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: libqt5xml5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is to be installed
</span></span><span class="line"><span class="cl">               Depends: qtbase5-dev-tools <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span>
</span></span><span class="line"><span class="cl">               Recommends: libqt5opengl5-dev <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but it is not going to be installed
</span></span><span class="line"><span class="cl">E: Unable to correct problems, you have held broken packages.
</span></span></code></pre></td></tr></table>
</div>
</div><p>}}}</p>
</details>
<p>qt5-default can&rsquo;t be installed neither:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ sudo apt-get install qt5-default
</span></span><span class="line"><span class="cl"><span class="o">[</span>sudo<span class="o">]</span> password <span class="k">for</span> zichen: 
</span></span><span class="line"><span class="cl">Reading package lists... Done
</span></span><span class="line"><span class="cl">Building dependency tree... Done
</span></span><span class="line"><span class="cl">Reading state information... Done
</span></span><span class="line"><span class="cl">Package qt5-default is not available, but is referred to by another package.
</span></span><span class="line"><span class="cl">This may mean that the package is missing, has been obsoleted, or
</span></span><span class="line"><span class="cl">is only available from another <span class="nb">source</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">E: Package <span class="s1">&#39;qt5-default&#39;</span> has no installation candidate
</span></span></code></pre></td></tr></table>
</div>
</div><p>Others packages related qtbase5:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ apt-cache search qtbase5-dev
</span></span><span class="line"><span class="cl">qtbase5-dev - Qt <span class="m">5</span> base development files
</span></span><span class="line"><span class="cl">qtbase5-dev-tools - Qt <span class="m">5</span> base development programs
</span></span><span class="line"><span class="cl">qtbase5-gles-dev - Qt <span class="m">5</span> base development files — OpenGL ES variant
</span></span><span class="line"><span class="cl">qtbase5-private-gles-dev - Qt <span class="m">5</span> base private development files — OpenGL ES variant
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>Some of them requires <code>qtbase-abi-5-15-3</code></p>
<p>But, I can&rsquo;t install it:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">E: Package <span class="s1">&#39;qtbase-abi-5-15-3&#39;</span> has no installation candidate
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>Select the second solution offered by <code>aptitude</code>:</p>
<details><summary>Output</summary> {{{
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ sudo aptitude install qtbase5-dev
</span></span><span class="line"><span class="cl">The following NEW packages will be installed:
</span></span><span class="line"><span class="cl">  qtbase5-dev<span class="o">{</span>b<span class="o">}</span> 
</span></span><span class="line"><span class="cl"><span class="m">0</span> packages upgraded, <span class="m">1</span> newly installed, <span class="m">0</span> to remove and <span class="m">15</span> not upgraded.
</span></span><span class="line"><span class="cl">Need to get 1,135 kB of archives. After unpacking 15.7 MB will be used.
</span></span><span class="line"><span class="cl">The following packages have unmet dependencies:
</span></span><span class="line"><span class="cl"> qtbase5-dev : Depends: libqt5concurrent5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is installed
</span></span><span class="line"><span class="cl">               Depends: libqt5core5a <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is installed
</span></span><span class="line"><span class="cl">               Depends: libqt5dbus5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is installed
</span></span><span class="line"><span class="cl">               Depends: libqt5gui5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is installed
</span></span><span class="line"><span class="cl">               Depends: libqt5network5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is installed
</span></span><span class="line"><span class="cl">               Depends: libqt5printsupport5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is installed
</span></span><span class="line"><span class="cl">               Depends: libqt5sql5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but it is not installable
</span></span><span class="line"><span class="cl">               Depends: libqt5test5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but it is not installable
</span></span><span class="line"><span class="cl">               Depends: libqt5widgets5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but 5.15.8.1-1+dde is installed
</span></span><span class="line"><span class="cl">               Depends: libqt5xml5 <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but it is not going to be installed
</span></span><span class="line"><span class="cl">               Depends: qtbase5-dev-tools <span class="o">(=</span> 5.15.3+dfsg-2ubuntu0.2<span class="o">)</span> but it is not installable
</span></span><span class="line"><span class="cl">The following actions will resolve these dependencies:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     Keep the following packages at their current version:
</span></span><span class="line"><span class="cl">1<span class="o">)</span>     qtbase5-dev <span class="o">[</span>Not Installed<span class="o">]</span>                        
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Accept this solution? <span class="o">[</span>Y/n/q/?<span class="o">]</span> .
</span></span><span class="line"><span class="cl">The following actions will resolve these dependencies:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      Remove the following packages:                                                                
</span></span><span class="line"><span class="cl">1<span class="o">)</span>      libqt5core5a:i386 <span class="o">[</span>5.15.8.1-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)]</span>                                            
</span></span><span class="line"><span class="cl">2<span class="o">)</span>      libqt5dbus5:i386 <span class="o">[</span>5.15.8.1-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)]</span>                                             
</span></span><span class="line"><span class="cl">3<span class="o">)</span>      libqt5positioning5 <span class="o">[</span>5.15.8-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)]</span>                                             
</span></span><span class="line"><span class="cl">4<span class="o">)</span>      libqt5webchannel5 <span class="o">[</span>5.15.8-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)]</span>                                              
</span></span><span class="line"><span class="cl">5<span class="o">)</span>      libqt5x11extras5 <span class="o">[</span>5.15.8-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)]</span>                                               
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      Install the following packages:                                                               
</span></span><span class="line"><span class="cl">6<span class="o">)</span>      libqt5sql5 <span class="o">[</span>5.15.3+dfsg-2ubuntu0.2 <span class="o">(</span>jammy-updates<span class="o">)]</span>                                         
</span></span><span class="line"><span class="cl">7<span class="o">)</span>      libqt5sql5-odbc <span class="o">[</span>5.15.3+dfsg-2ubuntu0.2 <span class="o">(</span>jammy-updates<span class="o">)]</span>                                    
</span></span><span class="line"><span class="cl">8<span class="o">)</span>      libqt5test5 <span class="o">[</span>5.15.3+dfsg-2ubuntu0.2 <span class="o">(</span>jammy-updates<span class="o">)]</span>                                        
</span></span><span class="line"><span class="cl">9<span class="o">)</span>      libqt5xml5 <span class="o">[</span>5.15.3+dfsg-2ubuntu0.2 <span class="o">(</span>jammy-updates<span class="o">)]</span>                                         
</span></span><span class="line"><span class="cl">10<span class="o">)</span>     qtbase5-dev-tools <span class="o">[</span>5.15.3+dfsg-2ubuntu0.2 <span class="o">(</span>jammy-updates<span class="o">)]</span>                                  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      Downgrade the following packages:                                                             
</span></span><span class="line"><span class="cl">11<span class="o">)</span>     libqt5concurrent5 <span class="o">[</span>5.15.8.1-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)</span> -&gt; 5.15.3+dfsg-2ubuntu0.2 <span class="o">(</span>jammy-updates<span class="o">)]</span>  
</span></span><span class="line"><span class="cl">12<span class="o">)</span>     libqt5core5a <span class="o">[</span>5.15.8.1-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)</span> -&gt; 5.15.3+dfsg-2ubuntu0.2 <span class="o">(</span>jammy-updates<span class="o">)]</span>       
</span></span><span class="line"><span class="cl">13<span class="o">)</span>     libqt5dbus5 <span class="o">[</span>5.15.8.1-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)</span> -&gt; 5.15.3+dfsg-2ubuntu0.2 <span class="o">(</span>jammy-updates<span class="o">)]</span>        
</span></span><span class="line"><span class="cl">14<span class="o">)</span>     libqt5gui5 <span class="o">[</span>5.15.8.1-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)</span> -&gt; 5.15.3+dfsg-2ubuntu0.2 <span class="o">(</span>jammy-updates<span class="o">)]</span>         
</span></span><span class="line"><span class="cl">15<span class="o">)</span>     libqt5network5 <span class="o">[</span>5.15.8.1-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)</span> -&gt; 5.15.3+dfsg-2ubuntu0.2 <span class="o">(</span>jammy-updates<span class="o">)]</span>     
</span></span><span class="line"><span class="cl">16<span class="o">)</span>     libqt5printsupport5 <span class="o">[</span>5.15.8.1-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)</span> -&gt; 5.15.3+dfsg-2ubuntu0.2 <span class="o">(</span>jammy-updates<span class="o">)]</span>
</span></span><span class="line"><span class="cl">17<span class="o">)</span>     libqt5qml5 <span class="o">[</span>5.15.8.1-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)</span> -&gt; 5.15.3-1+dde <span class="o">(</span>&lt;NULL&gt;<span class="o">)]</span>                          
</span></span><span class="line"><span class="cl">18<span class="o">)</span>     libqt5qmlmodels5 <span class="o">[</span>5.15.8.1-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)</span> -&gt; 5.15.3-1+dde <span class="o">(</span>&lt;NULL&gt;<span class="o">)]</span>                    
</span></span><span class="line"><span class="cl">19<span class="o">)</span>     libqt5quick5 <span class="o">[</span>5.15.8.1-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)</span> -&gt; 5.15.3-1+dde <span class="o">(</span>&lt;NULL&gt;<span class="o">)]</span>                        
</span></span><span class="line"><span class="cl">20<span class="o">)</span>     libqt5quickwidgets5 <span class="o">[</span>5.15.8.1-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)</span> -&gt; 5.15.3-1+dde <span class="o">(</span>&lt;NULL&gt;<span class="o">)]</span>                 
</span></span><span class="line"><span class="cl">21<span class="o">)</span>     libqt5widgets5 <span class="o">[</span>5.15.8.1-1+dde <span class="o">(</span>&lt;NULL&gt;, now<span class="o">)</span> -&gt; 5.15.3+dfsg-2ubuntu0.2 <span class="o">(</span>jammy-updates<span class="o">)]</span>     
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Accept this solution? <span class="o">[</span>Y/n/q/?<span class="o">]</span> Y
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">The following packages will be DOWNGRADED:
</span></span><span class="line"><span class="cl">  libqt5concurrent5 libqt5core5a libqt5dbus5 libqt5gui5 libqt5network5 libqt5printsupport5 libqt5qml5 
</span></span><span class="line"><span class="cl">  libqt5qmlmodels5 libqt5quick5 libqt5quickwidgets5 libqt5widgets5 
</span></span><span class="line"><span class="cl">The following NEW packages will be installed:
</span></span><span class="line"><span class="cl">  libqt5sql5<span class="o">{</span>a<span class="o">}</span> libqt5sql5-odbc<span class="o">{</span>a<span class="o">}</span> libqt5test5<span class="o">{</span>a<span class="o">}</span> libqt5xml5<span class="o">{</span>a<span class="o">}</span> qtbase5-dev qtbase5-dev-tools<span class="o">{</span>a<span class="o">}</span> 
</span></span><span class="line"><span class="cl">The following packages will be REMOVED:
</span></span><span class="line"><span class="cl">  libqt5core5a:i386<span class="o">{</span>a<span class="o">}</span> libqt5dbus5:i386<span class="o">{</span>a<span class="o">}</span> libqt5positioning5<span class="o">{</span>a<span class="o">}</span> libqt5webchannel5<span class="o">{</span>a<span class="o">}</span> libqt5x11extras5<span class="o">{</span>a<span class="o">}</span> 
</span></span><span class="line"><span class="cl">The following packages are RECOMMENDED but will NOT be installed:
</span></span><span class="line"><span class="cl">  libqt5svg5 qt5-gtk-platformtheme 
</span></span><span class="line"><span class="cl"><span class="m">0</span> packages upgraded, <span class="m">6</span> newly installed, <span class="m">11</span> downgraded, <span class="m">5</span> to remove and <span class="m">15</span> not upgraded.
</span></span><span class="line"><span class="cl">Need to get 15.1 MB of archives. After unpacking 6,725 kB will be used.
</span></span><span class="line"><span class="cl">Do you want to <span class="k">continue</span>? <span class="o">[</span>Y/n/?<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>}}}</p>
</details>
<p>After installation, there are more binary files:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ tree /usr/lib/qt5/bin/
</span></span><span class="line"><span class="cl">/usr/lib/qt5/bin/
</span></span><span class="line"><span class="cl">├── fixqt4headers.pl
</span></span><span class="line"><span class="cl">├── moc
</span></span><span class="line"><span class="cl">├── qdbuscpp2xml
</span></span><span class="line"><span class="cl">├── qdbusxml2cpp
</span></span><span class="line"><span class="cl">├── qlalr
</span></span><span class="line"><span class="cl">├── qmake
</span></span><span class="line"><span class="cl">├── qvkgen
</span></span><span class="line"><span class="cl">├── rcc
</span></span><span class="line"><span class="cl">├── syncqt.pl
</span></span><span class="line"><span class="cl">├── tracegen
</span></span><span class="line"><span class="cl">└── uic
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">0</span> directories, <span class="m">11</span> files
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<hr>
<ol start="7">
<li>
<p>The Qt5OpenGL is required as well:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">CMake Error at /usr/lib/x86_64-linux-gnu/cmake/Qt5/Qt5Config.cmake:28 <span class="o">(</span>find_package<span class="o">)</span>:
</span></span><span class="line"><span class="cl">Could not find a package configuration file provided by <span class="s2">&#34;Qt5OpenGL&#34;</span> with
</span></span><span class="line"><span class="cl">any of the following names:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  Qt5OpenGLConfig.cmake
</span></span><span class="line"><span class="cl">  qt5opengl-config.cmake
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Add the installation prefix of <span class="s2">&#34;Qt5OpenGL&#34;</span> to CMAKE_PREFIX_PATH or <span class="nb">set</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;Qt5OpenGL_DIR&#34;</span> to a directory containing one of the above files.  If
</span></span><span class="line"><span class="cl"><span class="s2">&#34;Qt5OpenGL&#34;</span> provides a separate development package or SDK, be sure it has
</span></span><span class="line"><span class="cl">been installed.
</span></span><span class="line"><span class="cl">Call Stack <span class="o">(</span>most recent call first<span class="o">)</span>:
</span></span><span class="line"><span class="cl">  cmake/FindDependencies.cmake:150 <span class="o">(</span>find_package<span class="o">)</span>
</span></span><span class="line"><span class="cl">  CMakeLists.txt:96 <span class="o">(</span>include<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Similarly, use <code>aptitude</code> to install it:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ sudo aptitude install libqt5opengl5-dev
</span></span><span class="line"><span class="cl">The following NEW packages will be installed:
</span></span><span class="line"><span class="cl">  libqt5opengl5<span class="o">{</span>a<span class="o">}</span> libqt5opengl5-dev 
</span></span><span class="line"><span class="cl"><span class="m">0</span> packages upgraded, <span class="m">2</span> newly installed, <span class="m">0</span> to remove and <span class="m">27</span> not upgraded.
</span></span><span class="line"><span class="cl">Need to get <span class="m">195</span> kB of archives. After unpacking <span class="m">927</span> kB will be used.
</span></span><span class="line"><span class="cl">Do you want to <span class="k">continue</span>? <span class="o">[</span>Y/n/?<span class="o">]</span> Y
</span></span></code></pre></td></tr></table>
</div>
</div><p>Finally, compilation succeeded:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@homepc:~/Downloads/colmap$ cmake -B ./build -GNinja
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> build
</span></span><span class="line"><span class="cl">ninja
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<hr>
<p>(2024-04-18)</p>
<ol start="8">
<li>
<p>CUDA requires GCC setup under Ubuntu 22.04. <a class="link" href="https://colmap.github.io/install.html#:~:text=Under-,Ubuntu%2022.04,-%2C%20there%20is%20a"  target="_blank" rel="noopener"
    >Docs</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># sudo apt-get install gcc-10 g++-10</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CC</span><span class="o">=</span>/usr/bin/gcc-10
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CXX</span><span class="o">=</span>/usr/bin/g++-10
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CUDAHOSTCXX</span><span class="o">=</span>/usr/bin/g++-10
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Installing <code>nvidia-cuda-toolkit</code> failed via <code>apt install</code>.
I don&rsquo;t install it since I already have CUDA-11.6 installed by downloading package manually.</p>
</li>
</ol>
<hr>
<h4 id="verified-practice">Verified Practice
</h4><p>(2024-04-19)</p>
<ol>
<li>
<p>Rename <code>anaconda3</code> folder, e.g., <code>anaconda3_1</code>. Otherwise, the <code>qt5</code> called by header and cmake mismatch.
<a class="link" href="https://github.com/sofa-framework/sofa/issues/3829#issuecomment-1539235154"  target="_blank" rel="noopener"
    >issue-sofa-fredroy</a></p>
</li>
<li>
<p>Use <code>aptitude</code> to install unavailable dependecies, as <code>apt install</code> cannot install <code>qtbase5-dev</code> and <code>libqt5opengl5-dev</code> on Ubuntu 22.04.</p>
<p>Select an alternative solutions provided by aptitude.</p>
</li>
<li>
<p>Specify gcc and g++ versions for Ubuntu 22.04:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># sudo apt-get install gcc-10 g++-10</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CC</span><span class="o">=</span>/usr/bin/gcc-10
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CXX</span><span class="o">=</span>/usr/bin/g++-10
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CUDAHOSTCXX</span><span class="o">=</span>/usr/bin/g++-10
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Compile colmap:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># cd colmap</span>
</span></span><span class="line"><span class="cl">cmake -B ./build -GNinja
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> build
</span></span><span class="line"><span class="cl">ninja
</span></span><span class="line"><span class="cl">sudo ninja install
</span></span></code></pre></td></tr></table>
</div>
</div><p>The colmap is installed in <code>/usr/local</code></p>
<details> {{{
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>0/1<span class="o">]</span> Install the project...
</span></span><span class="line"><span class="cl">-- Install configuration: <span class="s2">&#34;Release&#34;</span>
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/share/applications/COLMAP.desktop
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_controllers.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_estimators.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_exe.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_feature_types.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_feature.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_geometry.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_image.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_math.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_mvs.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_optim.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_retrieval.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_scene.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_sensor.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_sfm.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_util.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_lsd.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_poisson_recon.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_vlfeat.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_ui.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_util_cuda.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_mvs_cuda.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/lib/libcolmap_sift_gpu.a
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/share/colmap/colmap-config.cmake
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/share/colmap/colmap-config-version.cmake
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/share/colmap/colmap-targets.cmake
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/share/colmap/colmap-targets-release.cmake
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/utils.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/pose.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/coordinate_frame.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/two_view_geometry.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/generalized_absolute_pose.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/bundle_adjustment.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/affine_transform.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/generalized_absolute_pose_coeffs.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/fundamental_matrix.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/euclidean_transform.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/alignment.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/homography_matrix.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/absolute_pose.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/similarity_transform.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/triangulation.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/essential_matrix_poly.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/cost_functions.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/generalized_relative_pose.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/generalized_pose.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/translation_transform.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/essential_matrix_coeffs.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/estimators/essential_matrix.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/controllers
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/controllers/feature_matching_utils.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/controllers/automatic_reconstruction.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/controllers/bundle_adjustment.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/controllers/hierarchical_mapper.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/controllers/incremental_mapper.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/controllers/image_reader.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/controllers/feature_extraction.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/controllers/feature_matching.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/controllers/option_manager.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/math
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/math/math.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/math/matrix.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/math/graph_cut.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/math/polynomial.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/math/random.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/exe
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/exe/gui.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/exe/image.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/exe/database.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/exe/feature.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/exe/model.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/exe/mvs.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/exe/vocab_tree.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/exe/sfm.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/optim
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/optim/sampler.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/optim/random_sampler.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/optim/least_absolute_deviations.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/optim/support_measurement.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/optim/combination_sampler.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/optim/ransac.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/optim/progressive_sampler.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/optim/sprt.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/optim/loransac.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/sensor
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/sensor/models.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/sensor/database.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/sensor/bitmap.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/sensor/specs.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/types.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/ply.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/string.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/threading.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/sqlite3_utils.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/base_controller.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/endian.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/eigen_alignment.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/logging.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/version.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/timer.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/cuda.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/controller_thread.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/cache.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/testing.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/opengl_utils.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/misc.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/util/cudacc.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/mat.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/meshing.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/cuda_rotate.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/cuda_texture.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/gpu_mat_ref_image.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/image.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/cuda_flip.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/patch_match_cuda.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/cuda_transpose.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/gpu_mat_prng.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/depth_map.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/normal_map.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/workspace.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/fusion.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/patch_match.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/model.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/gpu_mat.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/mvs/consistency_graph.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/image
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/image/undistortion.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/image/warp.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/image/line.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/sfm
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/sfm/incremental_mapper.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/sfm/incremental_triangulator.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/retrieval
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/retrieval/utils.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/retrieval/vote_and_verify.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/retrieval/inverted_file_entry.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/retrieval/inverted_file.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/retrieval/geometry.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/retrieval/inverted_index.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/retrieval/visual_index.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/synthetic.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/point2d.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/two_view_geometry.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/reconstruction_manager.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/reconstruction_io.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/image.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/scene_clustering.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/database.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/database_cache.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/camera.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/track.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/reconstruction.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/correspondence_graph.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/projection.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/visibility_pyramid.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/camera_rig.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/scene/point3d.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/tools
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/feature
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/feature/utils.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/feature/types.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/feature/matcher.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/feature/sift.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/feature/extractor.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/geometry
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/geometry/pose.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/geometry/gps.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/geometry/sim3.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/geometry/rigid3.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/geometry/homography_matrix.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/geometry/triangulation.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/geometry/essential_matrix.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/qt_utils.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/image_viewer_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/colormaps.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/bundle_adjustment_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/feature_extraction_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/model_viewer_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/thread_control_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/point_viewer_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/project_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/reconstruction_options_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/reconstruction_manager_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/license_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/point_painter.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/media
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/undistortion_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/render_options.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/movie_grabber_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/reconstruction_stats_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/shaders
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/match_matrix_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/feature_matching_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/options_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/main_window.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/log_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/database_management_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/triangle_painter.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/automatic_reconstruction_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/line_painter.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/dense_reconstruction_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/ui/render_options_widget.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/LiteWindow.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/GlobalUtil.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/PyramidGL.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/PyramidCL.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/CuTexImage.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/SiftPyramid.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/ProgramCU.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/GLTexImage.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/ProgramCG.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/SiftMatchCU.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/SiftMatch.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/SiftGPU.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/CLTexImage.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/ProgramCL.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/FrameBufferObject.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/ShaderMan.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/ProgramGLSL.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/PyramidCU.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/SiftGPU/ProgramGPU.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/LSD
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/LSD/lsd.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/fisher.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/qsort-def.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/generic.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/sift.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/mathop_sse2.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/heap-def.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/gmm.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/ikmeans.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/slic.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/stringop.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/quickshift.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/hog.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/lbp.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/float.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/kmeans.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/mathop_avx.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/host.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/dsift.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/homkermap.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/array.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/pgm.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/svmdataset.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/shuffle-def.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/mathop.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/svm.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/mser.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/liop.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/scalespace.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/imopv_sse2.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/rodrigues.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/vlad.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/covdet.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/imopv.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/aib.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/hikmeans.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/getopt_long.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/random.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/VLFeat/kdtree.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/SurfaceTrimmer.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/Polynomial.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/BinaryNode.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/MultiGridOctreeData.IsoSurface.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/Geometry.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/BSplineData.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/CmdLineParser.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/Allocator.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/MultiGridOctreeData.Evaluation.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/Factor.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/BSplineData.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/Polynomial.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/PPolynomial.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/SparseMatrix.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/FunctionData.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/MarchingCubes.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/SparseMatrix.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/Array.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/FunctionData.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/Array.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/MAT.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/PoissonRecon.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/MAT.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/Geometry.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/Octree.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/MultiGridOctreeData.SortedTreeNodes.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/MemoryUsage.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/MultiGridOctreeData.WeightedSamples.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/MultiGridOctreeData.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/Hash.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/PPolynomial.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/MultiGridOctreeData.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/Octree.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/PointStream.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/CmdLineParser.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/MultiGridOctreeData.System.inl
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/Ply.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/MyTime.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/include/colmap/thirdparty/PoissonRecon/PointStream.h
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/share/colmap/cmake
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/share/colmap/cmake/FindLZ4.cmake
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/share/colmap/cmake/FindMetis.cmake
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/share/colmap/cmake/FindFLANN.cmake
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/share/colmap/cmake/FindGlew.cmake
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/share/colmap/cmake/FindFreeImage.cmake
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/share/colmap/cmake/FindGlog.cmake
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/share/colmap/cmake/FindDependencies.cmake
</span></span><span class="line"><span class="cl">-- Installing: /usr/local/bin/colmap
</span></span><span class="line"><span class="cl">-- Set non-toolchain portion of runtime path of <span class="s2">&#34;/usr/local/bin/colmap&#34;</span> to <span class="s2">&#34;&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>}}}</p>
</details>
</li>
</ol>
<hr>
<h3 id="ubuntu-2004-">Ubuntu 20.04 ❌
</h3><p>(2024-04-18)</p>
<p><strong>System info</strong>:</p>
<ul>
<li>OS: Ubuntu 20.04.6 LTS x86_64; Kernel: 5.15.0-101-generic</li>
<li>Host: Alienware Aurora R8 1.0.6</li>
<li>CPU: Intel i7-9700 (8) @ 4.700GHz, GPU: Intel UHD Graphics 630</li>
<li>GPU: NVIDIA GeForce GTX 1050 Ti</li>
<li>Memory: 16GB</li>
<li>gcc version 9.4.0</li>
<li>Cuda compilation tools, release 11.6, V11.6.55; Build cuda_11.6.r11.6/compiler.30794723_0 (<code>nvcc -V</code>)</li>
<li>Nvidia Driver Version: 545.23.06</li>
</ul>
<ol>
<li>
<p>Dependecies: <a class="link" href="https://colmap.github.io/install.html"  target="_blank" rel="noopener"
    >Docs</a></p>
<p>The installation has no error reported:</p>
<details><summary>Log</summary> {{{
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">(</span>base<span class="o">)</span> yi@yi-Alienware-Aurora-R8:~/Downloads$ sudo apt-get install <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     git <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     cmake <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     ninja-build <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     build-essential <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libboost-program-options-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libboost-filesystem-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libboost-graph-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libboost-system-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libeigen3-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libflann-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libfreeimage-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libmetis-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libgoogle-glog-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libgtest-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libsqlite3-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libglew-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     qtbase5-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libqt5opengl5-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libcgal-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;     libceres-dev
</span></span><span class="line"><span class="cl"><span class="o">[</span>sudo<span class="o">]</span> password <span class="k">for</span> yi: 
</span></span><span class="line"><span class="cl">Reading package lists... Done
</span></span><span class="line"><span class="cl">Building dependency tree       
</span></span><span class="line"><span class="cl">Reading state information... Done
</span></span><span class="line"><span class="cl">libboost-filesystem-dev is already the newest version <span class="o">(</span>1.71.0.0ubuntu2<span class="o">)</span>.
</span></span><span class="line"><span class="cl">libboost-filesystem-dev <span class="nb">set</span> to manually installed.
</span></span><span class="line"><span class="cl">libboost-program-options-dev is already the newest version <span class="o">(</span>1.71.0.0ubuntu2<span class="o">)</span>.
</span></span><span class="line"><span class="cl">libboost-program-options-dev <span class="nb">set</span> to manually installed.
</span></span><span class="line"><span class="cl">libboost-system-dev is already the newest version <span class="o">(</span>1.71.0.0ubuntu2<span class="o">)</span>.
</span></span><span class="line"><span class="cl">libboost-system-dev <span class="nb">set</span> to manually installed.
</span></span><span class="line"><span class="cl">libboost-graph-dev is already the newest version <span class="o">(</span>1.71.0.0ubuntu2<span class="o">)</span>.
</span></span><span class="line"><span class="cl">libboost-graph-dev <span class="nb">set</span> to manually installed.
</span></span><span class="line"><span class="cl">libeigen3-dev is already the newest version <span class="o">(</span>3.3.7-2<span class="o">)</span>.
</span></span><span class="line"><span class="cl">libglew-dev is already the newest version <span class="o">(</span>2.1.0-4<span class="o">)</span>.
</span></span><span class="line"><span class="cl">build-essential is already the newest version <span class="o">(</span>12.8ubuntu1.1<span class="o">)</span>.
</span></span><span class="line"><span class="cl">build-essential <span class="nb">set</span> to manually installed.
</span></span><span class="line"><span class="cl">git is already the newest version <span class="o">(</span>1:2.25.1-1ubuntu3.11<span class="o">)</span>.
</span></span><span class="line"><span class="cl">The following additional packages will be installed:
</span></span><span class="line"><span class="cl">  cmake-data googletest libaec-dev libatlas3-base libblas-dev libbtf1 libceres1 libcxsparse3 libflann1.9 libfreeimage3 libgflags-dev libgflags2.2 libgmp-dev libgmpxx4ldbl libgoogle-glog0v5 libgraphblas3
</span></span><span class="line"><span class="cl">  libhdf5-mpi-dev libhdf5-openmpi-dev libjxr0 libklu1 liblapack-dev libldl2 liblz4-dev libmongoose2 libmpfr-dev libqt5opengl5 librbio2 librhash0 libspqr2 libsuitesparse-dev qt5-qmake qt5-qmake-bin
</span></span><span class="line"><span class="cl">  qtbase5-dev-tools qtchooser
</span></span><span class="line"><span class="cl">Suggested packages:
</span></span><span class="line"><span class="cl">  cmake-doc liblapack-doc libmpfi-dev libntl-dev gmp-doc libgmp10-doc libhdf5-doc libmpfr-doc sqlite3-doc default-libmysqlclient-dev firebird-dev libpq-dev unixodbc-dev
</span></span><span class="line"><span class="cl">The following NEW packages will be installed:
</span></span><span class="line"><span class="cl">  cmake cmake-data googletest libaec-dev libatlas3-base libblas-dev libbtf1 libceres-dev libceres1 libcgal-dev libcxsparse3 libflann-dev libflann1.9 libfreeimage-dev libfreeimage3 libgflags-dev libgflags2.2
</span></span><span class="line"><span class="cl">  libgmp-dev libgmpxx4ldbl libgoogle-glog-dev libgoogle-glog0v5 libgraphblas3 libgtest-dev libhdf5-mpi-dev libhdf5-openmpi-dev libjxr0 libklu1 liblapack-dev libldl2 liblz4-dev libmetis-dev libmongoose2
</span></span><span class="line"><span class="cl">  libmpfr-dev libqt5opengl5 libqt5opengl5-dev librbio2 librhash0 libspqr2 libsqlite3-dev libsuitesparse-dev ninja-build qt5-qmake qt5-qmake-bin qtbase5-dev qtbase5-dev-tools qtchooser
</span></span><span class="line"><span class="cl"><span class="m">0</span> upgraded, <span class="m">46</span> newly installed, <span class="m">0</span> to remove and <span class="m">47</span> not upgraded.
</span></span><span class="line"><span class="cl">Need to get 39.1 MB of archives.
</span></span><span class="line"><span class="cl">After this operation, <span class="m">323</span> MB of additional disk space will be used.
</span></span><span class="line"><span class="cl">Do you want to <span class="k">continue</span>? <span class="o">[</span>Y/n<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>}}}</p>
</details>
</li>
<li>
<p>Compile</p>
<ul>
<li>
<p>Same error pertain to <code>libtiff</code> as above.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">(</span>base<span class="o">)</span> yi@yi-Alienware-Aurora-R8:~/Downloads/colmap/build$ conda list libtiff
</span></span><span class="line"><span class="cl"><span class="c1"># packages in environment at /home/yi/anaconda3:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Name                    Version                   Build  Channel</span>
</span></span><span class="line"><span class="cl">libtiff                   4.5.1                h6a678d5_0
</span></span></code></pre></td></tr></table>
</div>
</div><p>Uninstall <code>libtiff</code></p>
<p>However, <code>conda uninstall libtiff</code> hangs <strong>forever</strong>.</p>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="docker-image">Docker Image
</h3><h4 id="system-info">System Info
</h4><ol>
<li>
<p><strong>Problems</strong>:</p>
<!-- (2025-09-25T09:23) -->
<ol>
<li>
<p>Applications are <strong>not preserved</strong> through a system reinstallation,
and backing up the <code>bin</code> directory is inefficient due to <strong>its size</strong>.</p>
</li>
<li>
<p>Compiling COLMAP is cumbersome due to <strong>missing dependencies and configurations</strong>.</p>
</li>
<li>
<p>Docker can create the <strong>correct environment</strong> for a (prebuilt) application, with all its dependencies properly configured
<sup><a class="link" href="" >r1-Gemini</a></sup>.</p>
</li>
<li>
<p>Colmap provides a pre-built Docker image with CUDA support
<sup><a class="link" href="" >r2-Docs</a></sup></p>
</li>
</ol>
<p>::: aside</p>
<ul>
<li>References: {{{
<ol>
<li><a class="link" href="https://gemini.google.com/app/ddb88a378e603973"  target="_blank" rel="noopener"
    >Gemini 2.5P -  Docker: Application Deployment Solution </a></li>
<li><a class="link" href="https://colmap.github.io/install.html#docker"  target="_blank" rel="noopener"
    >Installation — COLMAP 3.13.0.dev0 | a5332f46 (2025-07-05) documentation</a></li>
<li><a class="link" href="https://github.com/colmap/colmap/blob/main/docker/setup-ubuntu.sh"  target="_blank" rel="noopener"
    >GitHub - colmap/docker/setup-ubuntu.sh</a>
}}}
:::</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<ol start="2">
<li>
<p><strong>Supports</strong></p>
<ol>
<li>
<p>Check Install Requirements for Docker Image Build</p>
<ul>
<li>
<p><code>lsb_release -a</code>: Ubuntu 22.04.5 LTS</p>
</li>
<li>
<p><code>docker --version</code>: Docker version 28.4.0, build d8eb465</p>
</li>
<li>
<p><code>./setup-ubuntu.sh</code>: Check host CUDA version to <strong>update Dockerfile</strong></p>
</li>
<li>
<p><code>neofetch</code></p>
<details> {{{
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@zichen-X570-AORUS-PRO-WIFI 
</span></span><span class="line"><span class="cl">--------------------------------- 
</span></span><span class="line"><span class="cl">OS: Ubuntu 22.04.5 LTS x86_64 
</span></span><span class="line"><span class="cl">Host: X570 AORUS PRO WIFI -CF 
</span></span><span class="line"><span class="cl">Kernel: 6.8.0-83-generic 
</span></span><span class="line"><span class="cl">Shell: bash 5.1.16 
</span></span><span class="line"><span class="cl">CPU: AMD Ryzen <span class="m">7</span> 5700X <span class="o">(</span>16<span class="o">)</span> @ 3.400GHz 
</span></span><span class="line"><span class="cl">GPU: NVIDIA 09:00.0 NVIDIA Corporation Device <span class="m">2203</span> 
</span></span><span class="line"><span class="cl">Memory: 25734MiB / 128754MiB 
</span></span></code></pre></td></tr></table>
</div>
</div><p>}}}</p>
</details>
</li>
<li>
<p><code>gcc --version</code>: gcc (Ubuntu 10.5.0-1ubuntu1~22.04.2) 10.5.0</p>
</li>
<li>
<p><code>nvcc -V</code>: NVIDIA (R) Cuda compiler driver, release 11.3, V11.3.58, cuda_11.3.r11.3/compiler.29745058_0</p>
</li>
<li>
<p><code>nvidia-smi</code>: Nvidia Driver Version 550.163.01</p>
</li>
</ul>
</li>
<li>
<p>The <code>UBUNTU_VERSION</code> identified in the <code>setup-ubuntu.sh</code> is for the Docker image, not related to the host system.</p>
</li>
</ol>
</li>
</ol>
<hr>
<ol start="3">
<li>
<p><strong>Actions</strong>:</p>
<!-- (2025-09-26T15:51) -->
<ol>
<li>
<p>Download COLMAP source code</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">zichen@zichen-X570-AORUS-PRO-WIFI:~/Programs$ git clone --depth<span class="o">=</span><span class="m">1</span> https://github.com/colmap/colmap
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> colmap/docker
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Run <code>setup-ubuntu.sh</code><sup><a class="link" href="" >r3-GitHub</a></sup> to get CUDA version number</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">./setup-ubuntu.sh
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>That script performs: Update nvidia driver, Identify compatible CUDA version, Install nvidia-container-toolkit, Run a test container
<br>
<small>(I already have the package <code>nvidia-container-toolkit</code> installed.)</small></p>
</li>
<li>
<p>Nvidia driver upgraded to <code>580.65</code>, and <strong>reboot</strong> is required.</p>
</li>
<li>
<p>Run the script again after rebooting</p>
</li>
</ul>
</li>
<li>
<p>Error:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">🔍 Finding latest patch version <span class="k">for</span> CUDA 12.9...
</span></span><span class="line"><span class="cl">❌ No CUDA 12.9 images found <span class="k">for</span> Ubuntu 24.04, trying Ubuntu 22.04...
</span></span><span class="line"><span class="cl">❌ No compatible CUDA images found
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>The target image is <strong>not found</strong> due to the URL request only fetchs links on <code>page=1</code>,
but the link to the target image (<code>12.9.0-base-ubuntu22.04</code>) is located on the <code>page=2</code>.</p>
</li>
</ol>
</li>
</ol>
<hr>
<h4 id="modify-sh-for-dynm-pages">Modify Sh for Dynm Pages
</h4><ol>
<li>
<p><strong>Problems</strong>:</p>
<ol>
<li>The execution of <code>./setup-ubuntu.sh</code> failed because no image was found for CUDA 12.9.</li>
</ol>
<p>::: aside</p>
<ul>
<li><strong>References</strong>: {{{
<ol>
<li><a id=""></a>
<a class="link" href="https://sorryios.ai/c/68d6ed13-dc54-8321-bda0-bcfe12f8bde6"  target="_blank" rel="noopener"
    >GPT5 - Explain command function</a></li>
<li><a id=""></a>
<a class="link" href="https://gemini.google.com/app/2b23c3d0956a96d9"  target="_blank" rel="noopener"
    >Gemini 2.5P - Docker Hub Pagination for CUDA</a>
}}}
:::</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<ol start="2">
<li>
<p><strong>Supports</strong>:</p>
<ol>
<li>
<p>Docker images for <strong>old CUDA are superseded</strong> by new versions, making it impossible to retrieve a link to an
image from the latest 100 images.</p>
</li>
<li>
<p>Solution: Implement <strong>Dynamic Pagination Handling</strong>.
<sup><a class="link" href="" >r2-Gemini</a></sup></p>
</li>
<li>
<p><code>jq</code> extracts specified fields from JSON.</p>
</li>
</ol>
</li>
</ol>
<hr>
<ol start="3">
<li>
<p><strong>Actions</strong>:</p>
<!-- (2025-09-28T00:28) -->
<ol>
<li>
<p>Add a function to check all pages on Docker Hub</p>
<ul>
<li>Use the <code>sleep</code> command to implement a delay between requests within the loop to avoid hitting rate limits.</li>
</ul>
<details><summary>Code Modification</summary> {{{
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Function to search for a CUDA image tag, sending progress to stderr</span>
</span></span><span class="line"><span class="cl">find_cuda_image_tag<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">cuda_ver</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">ubuntu_ver</span><span class="o">=</span><span class="nv">$2</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">page_num</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">url</span><span class="o">=</span><span class="s2">&#34;https://registry.hub.docker.com/v2/repositories/nvidia/cuda/tags/?page=</span><span class="si">${</span><span class="nv">page_num</span><span class="si">}</span><span class="s2">&amp;page_size=100&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># This progress message now goes to stderr</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;⏳ Searching for CUDA </span><span class="si">${</span><span class="nv">cuda_ver</span><span class="si">}</span><span class="s2"> on Ubuntu </span><span class="si">${</span><span class="nv">ubuntu_ver</span><span class="si">}</span><span class="s2">...&#34;</span> &gt;<span class="p">&amp;</span><span class="m">2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$url</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># This progress message also goes to stderr</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s2">&#34;   - Checking page </span><span class="si">${</span><span class="nv">page_num</span><span class="si">}</span><span class="s2">...&#34;</span> &gt;<span class="p">&amp;</span><span class="m">2</span>
</span></span><span class="line"><span class="cl">        <span class="nv">response</span><span class="o">=</span><span class="k">$(</span>curl -s <span class="s2">&#34;</span><span class="nv">$url</span><span class="s2">&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> ! <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$response</span><span class="s2">&#34;</span> <span class="p">|</span> jq empty 2&gt;/dev/null<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34;   - Warning: Could not retrieve or parse page </span><span class="si">${</span><span class="nv">page_num</span><span class="si">}</span><span class="s2">.&#34;</span> &gt;<span class="p">&amp;</span><span class="m">2</span>
</span></span><span class="line"><span class="cl">            <span class="nb">break</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nv">found_tag</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$response</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.results[].name&#39;</span> <span class="p">|</span> grep -E <span class="s2">&#34;^</span><span class="si">${</span><span class="nv">cuda_ver</span><span class="si">}</span><span class="s2">\.[0-9]+-base-ubuntu</span><span class="si">${</span><span class="nv">ubuntu_ver</span><span class="si">}</span>$<span class="s2">&#34;</span> <span class="p">|</span> head -1<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$found_tag</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># This is the RESULT. It goes to stdout so it can be captured by the variable.</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$found_tag</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nv">url</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$response</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.next // empty&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">page_num</span><span class="o">=</span><span class="k">$((</span>page_num <span class="o">+</span> <span class="m">1</span><span class="k">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$url</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">            sleep <span class="m">1</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="k">done</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;   - Search complete. No matching tag found.&#34;</span> &gt;<span class="p">&amp;</span><span class="m">2</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;🔍 Finding latest patch version for CUDA </span><span class="nv">$COMPATIBLE_CUDA</span><span class="s2">...&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 1. Try to find a matching image for Ubuntu 24.04 by searching all pages</span>
</span></span><span class="line"><span class="cl"><span class="nv">AVAILABLE_VERSIONS</span><span class="o">=</span><span class="k">$(</span>find_cuda_image_tag <span class="s2">&#34;</span><span class="nv">$COMPATIBLE_CUDA</span><span class="s2">&#34;</span> <span class="s2">&#34;24.04&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$AVAILABLE_VERSIONS</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Extract full version (e.g., &#34;12.9.1&#34; from &#34;12.9.1-base-ubuntu24.04&#34;)</span>
</span></span><span class="line"><span class="cl">    <span class="nv">FULL_CUDA_VERSION</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$AVAILABLE_VERSIONS</span><span class="s2">&#34;</span> <span class="p">|</span> cut -d<span class="s1">&#39;-&#39;</span> -f1<span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="nv">UBUNTU_VERSION</span><span class="o">=</span><span class="s2">&#34;24.04&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;✅ Found CUDA version: </span><span class="nv">$FULL_CUDA_VERSION</span><span class="s2"> for Ubuntu </span><span class="nv">$UBUNTU_VERSION</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;❌ No CUDA </span><span class="nv">$COMPATIBLE_CUDA</span><span class="s2"> images found for Ubuntu 24.04, trying Ubuntu 22.04...&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 2. If not found, fall back to searching for an Ubuntu 22.04 image</span>
</span></span><span class="line"><span class="cl">    <span class="nv">AVAILABLE_VERSIONS</span><span class="o">=</span><span class="k">$(</span>find_cuda_image_tag <span class="s2">&#34;</span><span class="nv">$COMPATIBLE_CUDA</span><span class="s2">&#34;</span> <span class="s2">&#34;22.04&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$AVAILABLE_VERSIONS</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nv">FULL_CUDA_VERSION</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$AVAILABLE_VERSIONS</span><span class="s2">&#34;</span> <span class="p">|</span> cut -d<span class="s1">&#39;-&#39;</span> -f1<span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">UBUNTU_VERSION</span><span class="o">=</span><span class="s2">&#34;22.04&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s2">&#34;✅ Found CUDA version: </span><span class="nv">$FULL_CUDA_VERSION</span><span class="s2"> for Ubuntu </span><span class="nv">$UBUNTU_VERSION</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s2">&#34;❌ No compatible CUDA images found for CUDA </span><span class="nv">$COMPATIBLE_CUDA</span><span class="s2"> on supported Ubuntu versions.&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>}}}</p>
</details>
</li>
<li>
<p>Run script <code>./setup-ubuntu-pages_1.sh</code></p>
<details><summary>Terminal output</summary> {{{
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">📦 Configure Docker                                                            
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>0000<span class="o">]</span> Loading config from /etc/docker/daemon.json                         
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>0000<span class="o">]</span> Wrote updated config to /etc/docker/daemon.json                     
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>0000<span class="o">]</span> It is recommended that docker daemon be restarted.                  
</span></span><span class="line"><span class="cl">🔍 Finding latest patch version <span class="k">for</span> CUDA 12.9...                               
</span></span><span class="line"><span class="cl">⏳ Searching <span class="k">for</span> CUDA 12.9 on Ubuntu 24.04...                                  
</span></span><span class="line"><span class="cl">   - Checking page 1...                                                        
</span></span><span class="line"><span class="cl">   - Checking page 2...                                                        
</span></span><span class="line"><span class="cl">✅ Found CUDA version: 12.9.1 <span class="k">for</span> Ubuntu 24.04                                 
</span></span><span class="line"><span class="cl">🧪 Testing with automatically detected compatible CUDA version: 12.9...        
</span></span><span class="line"><span class="cl">Unable to find image <span class="s1">&#39;nvidia/cuda:12.9.1-base-ubuntu24.04&#39;</span> locally             
</span></span><span class="line"><span class="cl">12.9.1-base-ubuntu24.04: Pulling from nvidia/cuda                              
</span></span><span class="line"><span class="cl">32f112e3802c: Already exists                                                   
</span></span><span class="line"><span class="cl">644e9b203583: Pull <span class="nb">complete</span>                                                    
</span></span><span class="line"><span class="cl">02559cd4bc8d: Pull <span class="nb">complete</span>                                                    
</span></span><span class="line"><span class="cl">2cd52cbb1ebe: Pull <span class="nb">complete</span>                                                    
</span></span><span class="line"><span class="cl">6e8af4fd0a07: Pull <span class="nb">complete</span>                                                    
</span></span><span class="line"><span class="cl">Digest: sha256:29e5e3425e2e0f5a4e97c9fb4695ba4887cd78210a43cf94c3bcafc6ab01c5e6
</span></span><span class="line"><span class="cl">Status: Downloaded newer image <span class="k">for</span> nvidia/cuda:12.9.1-base-ubuntu24.04         
</span></span><span class="line"><span class="cl">Sun Sep <span class="m">28</span> 05:19:19 <span class="m">2025</span>
</span></span><span class="line"><span class="cl">+-----------------------------------------------------------------------------------------+
</span></span><span class="line"><span class="cl"><span class="p">|</span> NVIDIA-SMI 580.65.06              Driver Version: 580.65.06      CUDA Version: 13.0     <span class="p">|</span>
</span></span><span class="line"><span class="cl">+-----------------------------------------+------------------------+----------------------+
</span></span><span class="line"><span class="cl"><span class="p">|</span> GPU  Name                 Persistence-M <span class="p">|</span> Bus-Id          Disp.A <span class="p">|</span> Volatile Uncorr. ECC <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span> Fan  Temp   Perf          Pwr:Usage/Cap <span class="p">|</span>           Memory-Usage <span class="p">|</span> GPU-Util  Compute M. <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>                                         <span class="p">|</span>                        <span class="p">|</span>               MIG M. <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span><span class="o">=========================================</span>+<span class="o">========================</span>+<span class="o">======================</span><span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>   <span class="m">0</span>  NVIDIA GeForce RTX <span class="m">3090</span> Ti     Off <span class="p">|</span>   00000000:09:00.0 Off <span class="p">|</span>                  Off <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>  0%   27C    P8             23W /  450W <span class="p">|</span>     134MiB /  24564MiB <span class="p">|</span>      0%      Default <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>                                         <span class="p">|</span>                        <span class="p">|</span>                  N/A <span class="p">|</span>
</span></span><span class="line"><span class="cl">+-----------------------------------------+------------------------+----------------------+
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">+-----------------------------------------------------------------------------------------+
</span></span><span class="line"><span class="cl"><span class="p">|</span> Processes:                                                                              <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>  GPU   GI   CI              PID   Type   Process name                        GPU Memory <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>        ID   ID                                                               Usage      <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span><span class="o">=========================================================================================</span><span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>  No running processes found                                                             <span class="p">|</span>
</span></span><span class="line"><span class="cl">+-----------------------------------------------------------------------------------------+
</span></span><span class="line"><span class="cl">✅ GPU support working with CUDA 12.9.1!  
</span></span><span class="line"><span class="cl">✅ Updated Dockerfile to use CUDA 12.9.1
</span></span></code></pre></td></tr></table>
</div>
</div><p>}}}</p>
</details>
</li>
</ol>
</li>
</ol>
<hr>
<h4 id="execute-colmap">Execute Colmap
</h4><ol>
<li>
<p><strong>Problems</strong>:</p>
<ol>
<li>Run colmap for reconstruction from multi-view images</li>
</ol>
</li>
<li>
<p><strong>Supports</strong>:</p>
<!-- (2025-09-28T17:55) -->
<ol>
<li>
<p>Start container from the folder containing input images</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">./run.sh /path/to/folder
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
</ol>
<hr>
<h2 id="colmap-used-by-3dgs">Colmap Used by 3DGS
</h2><ol>
<li>
<p><strong>Problems</strong>:</p>
<!-- (2025-09-28T23:58) -->
<ol>
<li>
<p>3DGS initializes the scene point cloud using COLMAP via <code>convert.py</code>
<sup><a class="link" href="" >r1-README</a></sup></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">colmap_command</span> <span class="o">=</span> <span class="s1">&#39;&#34;</span><span class="si">{}</span><span class="s1">&#34;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">colmap_executable</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">colmap_executable</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&#34;colmap&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>::: aside</p>
<ul>
<li>References: {{{
<ol>
<li><a id=""></a>
<a class="link" href="https://github.com/graphdeco-inria/gaussian-splatting/tree/main#processing-your-own-scenes"  target="_blank" rel="noopener"
    >graphdeco-inria/gaussian-splatting - Processing your own Scenes</a>
}}}
:::</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<ol start="2">
<li>
<p><strong>Supports</strong>:</p>
<ol>
<li>
<p>In my experiment: The <strong>input images</strong> for <code>CasMVSNet_pl</code> were also processed by COLMAP for comparison.</p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 352 121"
      >
      <g transform='translate(8,16)'>
<text text-anchor='middle' x='0' y='4' fill='currentColor' style='font-size:1em'>┌</text>
<text text-anchor='middle' x='0' y='20' fill='currentColor' style='font-size:1em'>│</text>
<text text-anchor='middle' x='0' y='36' fill='currentColor' style='font-size:1em'>│</text>
<text text-anchor='middle' x='0' y='52' fill='currentColor' style='font-size:1em'>└</text>
<text text-anchor='middle' x='8' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='8' y='20' fill='currentColor' style='font-size:1em'>I</text>
<text text-anchor='middle' x='8' y='36' fill='currentColor' style='font-size:1em'>I</text>
<text text-anchor='middle' x='8' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='16' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='16' y='20' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='16' y='36' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='16' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='24' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='24' y='20' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='24' y='36' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='24' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='32' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='32' y='20' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='32' y='36' fill='currentColor' style='font-size:1em'>g</text>
<text text-anchor='middle' x='32' y='52' fill='currentColor' style='font-size:1em'>┬</text>
<text text-anchor='middle' x='32' y='68' fill='currentColor' style='font-size:1em'>│</text>
<text text-anchor='middle' x='32' y='84' fill='currentColor' style='font-size:1em'>└</text>
<text text-anchor='middle' x='40' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='40' y='20' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='40' y='36' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='40' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='40' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='48' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='48' y='36' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='48' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='48' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='56' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='56' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='56' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='64' y='4' fill='currentColor' style='font-size:1em'>┐</text>
<text text-anchor='middle' x='64' y='20' fill='currentColor' style='font-size:1em'>├</text>
<text text-anchor='middle' x='64' y='36' fill='currentColor' style='font-size:1em'>│</text>
<text text-anchor='middle' x='64' y='52' fill='currentColor' style='font-size:1em'>┘</text>
<text text-anchor='middle' x='64' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='72' y='20' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='72' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='80' y='20' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='80' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='88' y='20' fill='currentColor' style='font-size:1em'>▷</text>
<text text-anchor='middle' x='88' y='84' fill='currentColor' style='font-size:1em'>▷</text>
<text text-anchor='middle' x='96' y='4' fill='currentColor' style='font-size:1em'>┌</text>
<text text-anchor='middle' x='96' y='20' fill='currentColor' style='font-size:1em'>│</text>
<text text-anchor='middle' x='96' y='36' fill='currentColor' style='font-size:1em'>│</text>
<text text-anchor='middle' x='96' y='52' fill='currentColor' style='font-size:1em'>└</text>
<text text-anchor='middle' x='96' y='68' fill='currentColor' style='font-size:1em'>┌</text>
<text text-anchor='middle' x='96' y='84' fill='currentColor' style='font-size:1em'>│</text>
<text text-anchor='middle' x='96' y='100' fill='currentColor' style='font-size:1em'>└</text>
<text text-anchor='middle' x='104' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='104' y='20' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='104' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='104' y='68' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='104' y='84' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='104' y='100' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='112' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='112' y='20' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='112' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='112' y='68' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='112' y='84' fill='currentColor' style='font-size:1em'>O</text>
<text text-anchor='middle' x='112' y='100' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='120' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='120' y='20' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='120' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='120' y='68' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='120' y='84' fill='currentColor' style='font-size:1em'>L</text>
<text text-anchor='middle' x='120' y='100' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='128' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='128' y='20' fill='currentColor' style='font-size:1em'>M</text>
<text text-anchor='middle' x='128' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='128' y='68' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='128' y='84' fill='currentColor' style='font-size:1em'>M</text>
<text text-anchor='middle' x='128' y='100' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='136' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='136' y='20' fill='currentColor' style='font-size:1em'>V</text>
<text text-anchor='middle' x='136' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='136' y='68' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='136' y='84' fill='currentColor' style='font-size:1em'>A</text>
<text text-anchor='middle' x='136' y='100' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='144' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='144' y='20' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='144' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='144' y='68' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='144' y='84' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='144' y='100' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='152' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='152' y='20' fill='currentColor' style='font-size:1em'>N</text>
<text text-anchor='middle' x='152' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='152' y='68' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='152' y='100' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='160' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='160' y='20' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='160' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='160' y='68' fill='currentColor' style='font-size:1em'>┐</text>
<text text-anchor='middle' x='160' y='84' fill='currentColor' style='font-size:1em'>├</text>
<text text-anchor='middle' x='160' y='100' fill='currentColor' style='font-size:1em'>┘</text>
<text text-anchor='middle' x='168' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='168' y='20' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='168' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='168' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='176' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='176' y='20' fill='currentColor' style='font-size:1em'>_</text>
<text text-anchor='middle' x='176' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='176' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='184' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='184' y='20' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='184' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='184' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='192' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='192' y='20' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='192' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='192' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='200' y='4' fill='currentColor' style='font-size:1em'>┐</text>
<text text-anchor='middle' x='200' y='20' fill='currentColor' style='font-size:1em'>├</text>
<text text-anchor='middle' x='200' y='36' fill='currentColor' style='font-size:1em'>│</text>
<text text-anchor='middle' x='200' y='52' fill='currentColor' style='font-size:1em'>┘</text>
<text text-anchor='middle' x='200' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='208' y='20' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='208' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='216' y='20' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='216' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='224' y='20' fill='currentColor' style='font-size:1em'>▷</text>
<text text-anchor='middle' x='224' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='232' y='4' fill='currentColor' style='font-size:1em'>┌</text>
<text text-anchor='middle' x='232' y='20' fill='currentColor' style='font-size:1em'>│</text>
<text text-anchor='middle' x='232' y='36' fill='currentColor' style='font-size:1em'>│</text>
<text text-anchor='middle' x='232' y='52' fill='currentColor' style='font-size:1em'>└</text>
<text text-anchor='middle' x='232' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='240' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='240' y='20' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='240' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='240' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='248' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='248' y='20' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='248' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='248' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='256' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='256' y='20' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='256' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='256' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='264' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='264' y='20' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='264' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='264' y='84' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='272' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='272' y='20' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='272' y='52' fill='currentColor' style='font-size:1em'>△</text>
<text text-anchor='middle' x='272' y='68' fill='currentColor' style='font-size:1em'>│</text>
<text text-anchor='middle' x='272' y='84' fill='currentColor' style='font-size:1em'>┘</text>
<text text-anchor='middle' x='280' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='280' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='288' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='288' y='20' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='288' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='296' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='296' y='20' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='296' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='304' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='304' y='20' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='304' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='312' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='312' y='20' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='312' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='320' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='320' y='20' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='320' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='328' y='4' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='328' y='52' fill='currentColor' style='font-size:1em'>─</text>
<text text-anchor='middle' x='336' y='4' fill='currentColor' style='font-size:1em'>┐</text>
<text text-anchor='middle' x='336' y='20' fill='currentColor' style='font-size:1em'>│</text>
<text text-anchor='middle' x='336' y='36' fill='currentColor' style='font-size:1em'>│</text>
<text text-anchor='middle' x='336' y='52' fill='currentColor' style='font-size:1em'>┘</text>
</g>

    </svg>
  
</div>
<ul>
<li>
<p>The input images were saved to <code>/mnt/Seagate4T/04-Projects/CasMVSNet_pl-comments/results/dtu/image_ref/scan1/img</code></p>
<p>Source: CasMVSNet_pl-comments/eval_refine.py, Line #353</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;results/</span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">dataset_name</span><span class="si">}</span><span class="s1">/image_ref/</span><span class="si">{</span><span class="n">scan</span><span class="si">}</span><span class="s1">/img/</span><span class="si">{</span><span class="n">ref_vid</span><span class="si">:</span><span class="s1">08d</span><span class="si">}</span><span class="s1">.png&#39;</span><span class="p">,</span> <span class="n">image_ref</span><span class="p">[:,:,::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
</ol>
</li>
</ol>
<hr>
<ol start="3">
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p>Use the script <code>CasMVSNet_pl-comments/test_scripts/mvDTU_3dgsColmap.sh</code>
to copy <code>img</code> folders to <code>/mnt/Seagate4T/04-Projects/gaussian-splatting/</code> directory,
then run <code>convert.py</code> for each scan to reconstruct a sparse point cloud using COLMAP.</p>
<ul>
<li>
<p>COLMAP inputs:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">location</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">|---</span><span class="nb">input</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|---&lt;</span><span class="n">image</span> <span class="mi">0</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|---&lt;</span><span class="n">image</span> <span class="mi">1</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|---...</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Execute</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">python convert.py -s <span class="s2">&#34;/mnt/Seagate4T/04-Projects/gaussian-splatting/DTU_testScans/scan1&#34;</span>   
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
</ol>
</li>
</ol>
<hr>
<h2 id="convert-sparse-bin-to-ply">Convert Sparse bin to Ply
</h2><p>(2024-07-10)</p>
<ul>
<li>
<p>Use <code>readColmapSceneInfo()</code> function in <a class="link" href="https://github.com/graphdeco-inria/gaussian-splatting/blob/472689c0dc70417448fb451bf529ae532d32c095/scene/dataset_readers.py#L132-L177"  target="_blank" rel="noopener"
    >3DGS</a>.</p>
<p><code>--source_path=&quot;DTU_scan1&quot;</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">gaussian-splatting
</span></span><span class="line"><span class="cl"><span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>---scene 
</span></span><span class="line"><span class="cl"><span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>---temp.ipynb
</span></span><span class="line"><span class="cl"><span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>---DTU_scan1
</span></span><span class="line"><span class="cl">    <span class="p">|</span>---images
</span></span><span class="line"><span class="cl">    <span class="p">|</span>   <span class="p">|</span>---&lt;image 0&gt;
</span></span><span class="line"><span class="cl">    <span class="p">|</span>   <span class="p">|</span>---&lt;image 1&gt;
</span></span><span class="line"><span class="cl">    <span class="p">|</span>   <span class="p">|</span>---...
</span></span><span class="line"><span class="cl">    <span class="p">|</span>---sparse
</span></span><span class="line"><span class="cl">        <span class="p">|</span>---0
</span></span><span class="line"><span class="cl">            <span class="p">|</span>---cameras.bin
</span></span><span class="line"><span class="cl">            <span class="p">|</span>---images.bin
</span></span><span class="line"><span class="cl">            <span class="p">|</span>---points3D.bin
</span></span></code></pre></td></tr></table>
</div>
</div><p>Function call:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># --- temp.ipynb ---</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">scene.dataset_readers</span> <span class="kn">import</span> <span class="n">readColmapSceneInfo</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">readColmapSceneInfo</span><span class="p">(</span><span class="s1">&#39;DTU_scan1&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>
<h2 id="visualize-sparse-point-cloud">Visualize Sparse Point Cloud
</h2><p>(2024-07-10)</p>
<ul>
<li>
<p>The sparse point cloud of DTU scan1 generated by colmap only has only 388 points.
They are <strong>observable</strong> in Open3D if the camera pose is appropriate.</p>
<p>The <strong>translation vector</strong> (the 4th column) in the original extrinsics matrix from the DTU dataset <strong>mismatch</strong> the scale in Open3D.
I guess Open3D has rescaled the translation vector according to the size of the input point cloud.</p>
<ol>
<li>
<p>The original pose43 from DTU dataset <strong>won&rsquo;t</strong> show any point of this <strong>sparse</strong> point cloud,
although the <strong>dense</strong> point cloud restored from CasMVSNet can be displayed correctly:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">open3d</span> <span class="k">as</span> <span class="nn">o3d</span>
</span></span><span class="line"><span class="cl"><span class="n">pcd</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_point_cloud</span><span class="p">(</span><span class="s2">&#34;DTU_scan1/sparse/0/points3D.ply&#34;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ply&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># pcd = o3d.io.read_point_cloud(&#34;../CasMVSNet_pl-comments/results/dtu/points/scan001_l3.ply&#34;, format=&#39;ply&#39;)</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">VisualizerWithKeyCallback</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">create_window</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">add_geometry</span><span class="p">(</span><span class="n">pcd</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">get_render_option</span><span class="p">()</span><span class="o">.</span><span class="n">background_color</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="n">w2c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.311619</span><span class="p">,</span>  <span class="o">-</span><span class="mf">0.853452</span><span class="p">,</span> <span class="mf">0.417749</span><span class="p">,</span> <span class="o">-</span><span class="mf">285.581</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="p">[</span><span class="mf">0.0270351</span><span class="p">,</span>  <span class="mf">0.447425</span><span class="p">,</span> <span class="mf">0.893913</span><span class="p">,</span> <span class="o">-</span><span class="mf">541.214</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="p">[</span><span class="o">-</span><span class="mf">0.949823</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.267266</span><span class="p">,</span> <span class="mf">0.162499</span><span class="p">,</span> <span class="mf">545.452</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]])</span> <span class="c1"># cam 43 extrinsic</span>
</span></span><span class="line"><span class="cl"><span class="n">view_ctl</span> <span class="o">=</span> <span class="n">vis</span><span class="o">.</span><span class="n">get_view_control</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">cam</span> <span class="o">=</span> <span class="n">view_ctl</span><span class="o">.</span><span class="n">convert_to_pinhole_camera_parameters</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">cam</span><span class="o">.</span><span class="n">extrinsic</span> <span class="o">=</span> <span class="n">w2c</span>
</span></span><span class="line"><span class="cl"><span class="n">view_ctl</span><span class="o">.</span><span class="n">convert_from_pinhole_camera_parameters</span><span class="p">(</span><span class="n">cam</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">destroy_window</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>The viewpoint parameters saved by <strong>pressing</strong>: <a class="link" href="https://www.open3d.org/docs/latest/tutorial/Basic/visualization.html#Store-view-point"  target="_blank" rel="noopener"
    ><code>Ctrl+c</code></a>
cannot be reloaded with <code>vis.get_render_option().load_from_json()</code>.</p>
<p>(<small>Search: &ldquo;open3d display colmap point cloud&rdquo; in <a class="link" href="https://www.google.com/search?q=open3d&#43;display&#43;colmap&#43;point&#43;cloud&amp;oq=open3d&#43;display&#43;colmap&#43;point&#43;cloud&amp;"  target="_blank" rel="noopener"
    >Google</a>
➔ <a class="link" href="https://www.open3d.org/docs/latest/tutorial/Basic/visualization.html"  target="_blank" rel="noopener"
    >Visualization — Open3D latest (664eff5) documentation</a></small>)</p>
<ul>
<li>
<p>Save the copied json content into a file &ldquo;o3d_render_scan1.json&rdquo;:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;class_name&#34;</span> <span class="p">:</span> <span class="s2">&#34;ViewTrajectory&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;interval&#34;</span> <span class="p">:</span> <span class="mi">29</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;is_loop&#34;</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;trajectory&#34;</span> <span class="p">:</span> 
</span></span><span class="line"><span class="cl">  <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;boundingbox_max&#34;</span> <span class="p">:</span> <span class="p">[</span> <span class="mf">2.0850396156311035</span><span class="p">,</span> <span class="mf">8.7633571624755859</span><span class="p">,</span> <span class="mf">31.446575164794922</span> <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;boundingbox_min&#34;</span> <span class="p">:</span> <span class="p">[</span> <span class="mf">-9.2711105346679688</span><span class="p">,</span> <span class="mf">-2.8082370758056641</span><span class="p">,</span> <span class="mf">20.023061752319336</span> <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;field_of_view&#34;</span> <span class="p">:</span> <span class="mf">60.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;front&#34;</span> <span class="p">:</span> <span class="p">[</span> <span class="mf">0.57468924964379176</span><span class="p">,</span> <span class="mf">0.44402843879692444</span><span class="p">,</span> <span class="mf">-0.68743800584737935</span> <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;lookat&#34;</span> <span class="p">:</span> <span class="p">[</span> <span class="mf">-3.5930354595184326</span><span class="p">,</span> <span class="mf">2.9775600433349609</span><span class="p">,</span> <span class="mf">25.734818458557129</span> <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;up&#34;</span> <span class="p">:</span> <span class="p">[</span> <span class="mf">-0.33054624782933378</span><span class="p">,</span> <span class="mf">-0.64249516212987978</span><span class="p">,</span> <span class="mf">-0.69133142897285405</span> <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;zoom&#34;</span> <span class="p">:</span> <span class="mf">0.69999999999999996</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;version_major&#34;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;version_minor&#34;</span> <span class="p">:</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>This viewpoint should&rsquo;t be loaded with <code>get_render_option().load_from_json()</code>, like:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">open3d</span> <span class="k">as</span> <span class="nn">o3d</span>
</span></span><span class="line"><span class="cl"><span class="n">pcd</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_point_cloud</span><span class="p">(</span><span class="s2">&#34;DTU_scan1/sparse/0/points3D.ply&#34;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ply&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">Visualizer</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">create_window</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">add_geometry</span><span class="p">(</span><span class="n">pcd</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">get_render_option</span><span class="p">()</span><span class="o">.</span><span class="n">load_from_json</span><span class="p">(</span><span class="s2">&#34;o3d_render_scan1.json&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">destroy_window</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Loading camera parameters with <code>get_render_option()</code> will pop an &ldquo;unsupport&rdquo; error:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>Open3D WARNING<span class="o">]</span> ViewTrajectory <span class="nb">read</span> JSON failed: unsupported json format.
</span></span></code></pre></td></tr></table>
</div>
</div><p>Because <a class="link" href="https://www.open3d.org/docs/0.11.0/tutorial/visualization/customized_visualization.html#mimic-draw-geometries-with-visualizer-class"  target="_blank" rel="noopener"
    ><code>RenderOption</code></a>
is <strong>not</strong> <code>ViewControl</code> (camera parameters).
(<small>Directed by <a class="link" href="https://www.google.com/search?q=open3D&#43;load&#43;camera&#43;from&#43;json&amp;oq=open3D&#43;load&#43;camera&#43;from&#43;json"  target="_blank" rel="noopener"
    >Google</a></small>)</p>
</li>
</ul>
</li>
<li>
<p>I <strong>drag</strong> the visualizer to a similar viewpoint to the pose43,
and <a class="link" href="https://github.com/isl-org/Open3D/blob/1860e75f820f60a4c84d441720020c1e7e4237a7/examples/python/visualization/load_save_viewpoint.py#L11-L18"  target="_blank" rel="noopener"
    >save the camera parameter</a>
with <code>write_pinhole_camera_parameters()</code>
as a json file.</p>
<p>(<small>Found in <a class="link" href="https://duckduckgo.com/?q=open3d&#43;save&#43;rendering&#43;setting&#43;as&#43;json&#43;file&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
➔ <a class="link" href="https://github.com/isl-org/Open3D/issues/567"  target="_blank" rel="noopener"
    >How to load viewpoint in Visualization? #567</a></small>)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">open3d</span> <span class="k">as</span> <span class="nn">o3d</span>
</span></span><span class="line"><span class="cl"><span class="n">pcd</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_point_cloud</span><span class="p">(</span><span class="s2">&#34;DTU_scan1/sparse/0/points3D.ply&#34;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ply&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">Visualizer</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">create_window</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">add_geometry</span><span class="p">(</span><span class="n">pcd</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># user changes the view and press &#34;q&#34; to terminate</span>
</span></span><span class="line"><span class="cl"><span class="n">param</span> <span class="o">=</span> <span class="n">vis</span><span class="o">.</span><span class="n">get_view_control</span><span class="p">()</span><span class="o">.</span><span class="n">convert_to_pinhole_camera_parameters</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">write_pinhole_camera_parameters</span><span class="p">(</span><span class="s2">&#34;o3d_render_scan1_save.json&#34;</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">destroy_window</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><details><summary>The json file contains extrinsic and intrinsic.</summary> {{{
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&#34;class_name&#34;</span> <span class="p">:</span> <span class="s2">&#34;PinholeCameraParameters&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&#34;extrinsic&#34;</span> <span class="p">:</span> 
</span></span><span class="line"><span class="cl">	<span class="p">[</span>
</span></span><span class="line"><span class="cl">		<span class="mf">0.65176050659153895</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">0.35039808285127577</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">-0.67262874275612927</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">0.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">-0.68560130823217202</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">0.65140983980868639</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">-0.32498625624902339</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">0.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">0.3242824204268171</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">0.67296835299631441</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">0.66479659119730228</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">0.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">-3.962131546638247</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">-17.999337566932006</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">-4.527720017212074</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="mf">1.0</span>
</span></span><span class="line"><span class="cl">	<span class="p">],</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&#34;intrinsic&#34;</span> <span class="p">:</span> 
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&#34;height&#34;</span> <span class="p">:</span> <span class="mi">800</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&#34;intrinsic_matrix&#34;</span> <span class="p">:</span> 
</span></span><span class="line"><span class="cl">		<span class="p">[</span>
</span></span><span class="line"><span class="cl">			<span class="mf">692.82032302755101</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="mf">0.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="mf">0.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="mf">0.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="mf">692.82032302755101</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="mf">0.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="mf">399.5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="mf">399.5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="mf">1.0</span>
</span></span><span class="line"><span class="cl">		<span class="p">],</span>
</span></span><span class="line"><span class="cl">		<span class="nt">&#34;width&#34;</span> <span class="p">:</span> <span class="mi">800</span>
</span></span><span class="line"><span class="cl">	<span class="p">},</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&#34;version_major&#34;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&#34;version_minor&#34;</span> <span class="p">:</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>}}}</p>
</details>
<p>Then, the identical viewpoint can be recovered by loading this json file with <code>read_pinhole_camera_parameters</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">open3d</span> <span class="k">as</span> <span class="nn">o3d</span>
</span></span><span class="line"><span class="cl"><span class="n">pcd</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_point_cloud</span><span class="p">(</span><span class="s2">&#34;DTU_scan1/sparse/0/points3D.ply&#34;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ply&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">Visualizer</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">create_window</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">ctr</span> <span class="o">=</span> <span class="n">vis</span><span class="o">.</span><span class="n">get_view_control</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">param</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_pinhole_camera_parameters</span><span class="p">(</span><span class="s2">&#34;o3d_render_scan1_save.json&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">add_geometry</span><span class="p">(</span><span class="n">pcd</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">ctr</span><span class="o">.</span><span class="n">convert_from_pinhole_camera_parameters</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">vis</span><span class="o">.</span><span class="n">destroy_window</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>I write the extrinsic in the above json to a <code>w2c</code> matrix:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">w2c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.65176050659153895</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.68560130823217202</span><span class="p">,</span> <span class="mf">0.3242824204268171</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.962131546638247</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="p">[</span><span class="mf">0.35039808285127577</span><span class="p">,</span> <span class="mf">0.65140983980868639</span><span class="p">,</span> <span class="mf">0.67296835299631441</span><span class="p">,</span> <span class="o">-</span><span class="mf">17.999337566932006</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="p">[</span><span class="o">-</span><span class="mf">0.67262874275612927</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.32498625624902339</span><span class="p">,</span> <span class="mf">0.66479659119730228</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.527720017212074</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]])</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Using this <code>w2c</code>, the sparse point cloud can be displayed <strong>correctly</strong>.</p>
</li>
<li>
<p>Replace the <strong>translation vector</strong> of pose43 with the above one, while keep the rotation 3x3 part unchanged:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">w2c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.311619</span><span class="p">,</span>  <span class="o">-</span><span class="mf">0.853452</span><span class="p">,</span> <span class="mf">0.417749</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.96</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="p">[</span><span class="mf">0.0270351</span><span class="p">,</span>  <span class="mf">0.447425</span><span class="p">,</span> <span class="mf">0.893913</span><span class="p">,</span> <span class="o">-</span><span class="mf">17.999</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="p">[</span><span class="o">-</span><span class="mf">0.949823</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.267266</span><span class="p">,</span> <span class="mf">0.162499</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.52</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]])</span> <span class="c1"># cam 43</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>With using this <code>w2c</code>, points are <strong>visible</strong>.</p>
</li>
</ol>
</li>
</ul>
<hr>
<h2 id="pycolmap">PyCOLMAP
</h2><ol>
<li>
<p><strong>Supports</strong>:</p>
<!-- (2025-09-26T09:17) -->
<ol>
<li><a class="link" href="https://colmap.github.io/index.html#:~:text=Python%20bindings%20in-,PyCOLMAP,-were%20originally%20added"  target="_blank" rel="noopener"
    >Colmap Documentation</a></li>
</ol>
</li>
</ol>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/mvg/">MVG</a>
        
            <a href="/tags/points/">Points</a>
        
    </section>


    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
	const mainArticleElement = document.querySelector(".main-article");
        renderMathInElement(mainArticleElement, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>

    

    

    


    

    


    
    


    
    


    
    

    

    


</article>



    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/post/writenotes/model/depth/b-test-mvs_ply/">
        
        
            <div class="article-image">
                
                    <img src="https://github.com/kwea123/CasMVSNet_pl/raw/master/assets/demo.png" loading="lazy" data-key="" data-hash="https://github.com/kwea123/CasMVSNet_pl/raw/master/assets/demo.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Test: Points - MVSNets | Restore Point Cloud from Depth Map</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/writenotes/model/depth/b-note-point-mvsnet/">
        
        
            <div class="article-image">
                
                    <img src="https://pic2.zhimg.com/v2-557251caddb35bac39401c9440615105_r.jpg" loading="lazy" data-key="" data-hash="https://pic2.zhimg.com/v2-557251caddb35bac39401c9440615105_r.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Read: Depth - MVG | Point-MVSNet</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/writenotes/model/depth/b-note-mvsnet/">
        
        
            <div class="article-image">
                
                    <img src="https://ar5iv.labs.arxiv.org/html/1804.02505/assets/x1.png" loading="lazy" data-key="" data-hash="https://ar5iv.labs.arxiv.org/html/1804.02505/assets/x1.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Read: Depth - MVG | MVSNet</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/writenotes/model/splats/b-note-ewa_splatting/">
        
        
            <div class="article-image">
                
                    <img src="https://pic2.zhimg.com/80/v2-7cbe3b0c3b67ce80593fad0d73a814b5_720w.webp" loading="lazy" data-key="" data-hash="https://pic2.zhimg.com/80/v2-7cbe3b0c3b67ce80593fad0d73a814b5_720w.webp"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Read: Render - Points | EWA Splatting</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2025 Zichen Wang
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
