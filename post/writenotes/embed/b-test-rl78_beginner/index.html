<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="(Feature image from RTK7F124FPC01000BJ - RL78/F24 (R7F124FPJ) Target Board | Renesas )\nRL78 Family References:\nRL78 Series - Low-Power 8-Bit &amp; 16-Bit Microcontrollers (MCU) | Renesas Searched by RL78 F24 Flash Led in DDG RL78/F23, F24 RENESAS MCU Collected in RL78 Low Power 16-bit MCUs for Automotive | Renesas Searched in s1 Notes:\nBrief comparision among MCUs r1-MCU:\nRL78/F24 (R7F124FPJ 100-pin) block diagram shows the UART0 (RXD0 and TXD0) is inside the SAU0 r2-F24\n">
<title>Test: EE - Boards | RL78 Beginner</title>

<link rel='canonical' href='http://blog.zichen.uk/post/writenotes/embed/b-test-rl78_beginner/'>

<link rel="stylesheet" href="/scss/style.min.0e95b70faf4f470dc6ba88da538ece0f8cf22d03bab371e1b345205b81899732.css"><meta property='og:title' content="Test: EE - Boards | RL78 Beginner">
<meta property='og:description' content="(Feature image from RTK7F124FPC01000BJ - RL78/F24 (R7F124FPJ) Target Board | Renesas )\nRL78 Family References:\nRL78 Series - Low-Power 8-Bit &amp; 16-Bit Microcontrollers (MCU) | Renesas Searched by RL78 F24 Flash Led in DDG RL78/F23, F24 RENESAS MCU Collected in RL78 Low Power 16-bit MCUs for Automotive | Renesas Searched in s1 Notes:\nBrief comparision among MCUs r1-MCU:\nRL78/F24 (R7F124FPJ 100-pin) block diagram shows the UART0 (RXD0 and TXD0) is inside the SAU0 r2-F24\n">
<meta property='og:url' content='http://blog.zichen.uk/post/writenotes/embed/b-test-rl78_beginner/'>
<meta property='og:site_name' content='Zichen Wang'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='EE' /><meta property='article:published_time' content='2024-11-25T10:28:00&#43;00:00'/><meta property='article:modified_time' content='2024-11-25T10:28:00&#43;00:00'/><meta property='og:image' content='https://www.renesas.com/sites/default/files/RTK7F124FPC01000BJ_RL78F24-Target-Board.png' />
<meta name="twitter:title" content="Test: EE - Boards | RL78 Beginner">
<meta name="twitter:description" content="(Feature image from RTK7F124FPC01000BJ - RL78/F24 (R7F124FPJ) Target Board | Renesas )\nRL78 Family References:\nRL78 Series - Low-Power 8-Bit &amp; 16-Bit Microcontrollers (MCU) | Renesas Searched by RL78 F24 Flash Led in DDG RL78/F23, F24 RENESAS MCU Collected in RL78 Low Power 16-bit MCUs for Automotive | Renesas Searched in s1 Notes:\nBrief comparision among MCUs r1-MCU:\nRL78/F24 (R7F124FPJ 100-pin) block diagram shows the UART0 (RXD0 and TXD0) is inside the SAU0 r2-F24\n"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://www.renesas.com/sites/default/files/RTK7F124FPC01000BJ_RL78F24-Target-Board.png' />
    <link rel="shortcut icon" href="/favicon-32x32.png" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_b598b46054b3fa80.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Zichen Wang</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/zichen34'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com/luckily1640'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/post/writenotes/' >
                
                
                
                <span>WriteNotes</span>
            </a>
        </li>
        
        
        <li >
            <a href='/post/writenotes/model/acadmodel/aboutme/' >
                
                
                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#rl78-family">RL78 Family</a></li>
    <li><a href="#uart">UART</a>
      <ol>
        <li><a href="#hardware">Hardware</a></li>
        <li><a href="#smcg-uart">Smcg Uart</a></li>
        <li><a href="#modify-code">Modify Code</a></li>
        <li><a href="#iarew">IAREW</a>
          <ol>
            <li><a href="#build-error">Build Error</a></li>
          </ol>
        </li>
        <li><a href="#e2-studio">E2 Studio</a>
          <ol>
            <li><a href="#icd-debugger">ICD Debugger</a></li>
          </ol>
        </li>
        <li><a href="#upload">Upload</a></li>
        <li><a href="#pin-connection">Pin Connection</a></li>
      </ol>
    </li>
    <li><a href="#blink-led2">Blink LED2</a></li>
    <li><a href="#spi">SPI</a>
      <ol>
        <li><a href="#sample-code">Sample Code</a></li>
        <li><a href="#smp581">SMP581</a>
          <ol>
            <li><a href="#no-received-data">No Received Data</a></li>
            <li><a href="#do-not-use-delay">Do Not Use Delay</a></li>
            <li><a href="#single-cmd-caused-nc">Single Cmd Caused NC</a></li>
            <li><a href="#value-keep-increasing">Value Keep Increasing</a></li>
            <li><a href="#parse-diagnostic-bits">Parse Diagnostic Bits</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#lin-blink-led">LIN Blink LED</a>
      <ol>
        <li><a href="#create-e2-studio-project">Create E2 Studio Project</a>
          <ol>
            <li><a href="#smart-configurator">Smart Configurator</a></li>
            <li><a href="#lin-configurator">LIN Configurator</a></li>
            <li><a href="#cs-builds-library">CS+ Builds Library</a></li>
            <li><a href="#e2-studio-compiler">E2 Studio Compiler</a></li>
          </ol>
        </li>
        <li><a href="#add-user-code">Add User Code</a>
          <ol>
            <li><a href="#sample-code-f13">Sample Code F13</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#pwm">PWM</a>
      <ol>
        <li><a href="#principle">Principle</a></li>
        <li><a href="#renesas-configure">Renesas Configure</a></li>
        <li><a href="#f24-led">F24 LED</a></li>
      </ol>
    </li>
    <li><a href="#adc">ADC</a></li>
    <li><a href="#iar-ide">IAR IDE</a>
      <ol>
        <li><a href="#blinky-led">Blinky LED</a></li>
        <li><a href="#migrate-from-cs">Migrate from CS+</a></li>
        <li><a href="#build-options">Build Options</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/post/writenotes/embed/b-test-rl78_beginner/">
                
                    <img src="https://www.renesas.com/sites/default/files/RTK7F124FPC01000BJ_RL78F24-Target-Board.png" loading="lazy" alt="Featured image of post Test: EE - Boards | RL78 Beginner" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/test/" style="background-color: #ff8a22; color: #fff;">
                Test
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/writenotes/embed/b-test-rl78_beginner/">Test: EE - Boards | RL78 Beginner</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Nov 25, 2024</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    38 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
<section class="toc toc--inline">
    <h2 class="">Table of contents</h2>
    <div class="" >
        <nav id="TableOfContents">
  <ol>
    <li><a href="#rl78-family">RL78 Family</a></li>
    <li><a href="#uart">UART</a>
      <ol>
        <li><a href="#hardware">Hardware</a></li>
        <li><a href="#smcg-uart">Smcg Uart</a></li>
        <li><a href="#modify-code">Modify Code</a></li>
        <li><a href="#iarew">IAREW</a>
          <ol>
            <li><a href="#build-error">Build Error</a></li>
          </ol>
        </li>
        <li><a href="#e2-studio">E2 Studio</a>
          <ol>
            <li><a href="#icd-debugger">ICD Debugger</a></li>
          </ol>
        </li>
        <li><a href="#upload">Upload</a></li>
        <li><a href="#pin-connection">Pin Connection</a></li>
      </ol>
    </li>
    <li><a href="#blink-led2">Blink LED2</a></li>
    <li><a href="#spi">SPI</a>
      <ol>
        <li><a href="#sample-code">Sample Code</a></li>
        <li><a href="#smp581">SMP581</a>
          <ol>
            <li><a href="#no-received-data">No Received Data</a></li>
            <li><a href="#do-not-use-delay">Do Not Use Delay</a></li>
            <li><a href="#single-cmd-caused-nc">Single Cmd Caused NC</a></li>
            <li><a href="#value-keep-increasing">Value Keep Increasing</a></li>
            <li><a href="#parse-diagnostic-bits">Parse Diagnostic Bits</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#lin-blink-led">LIN Blink LED</a>
      <ol>
        <li><a href="#create-e2-studio-project">Create E2 Studio Project</a>
          <ol>
            <li><a href="#smart-configurator">Smart Configurator</a></li>
            <li><a href="#lin-configurator">LIN Configurator</a></li>
            <li><a href="#cs-builds-library">CS+ Builds Library</a></li>
            <li><a href="#e2-studio-compiler">E2 Studio Compiler</a></li>
          </ol>
        </li>
        <li><a href="#add-user-code">Add User Code</a>
          <ol>
            <li><a href="#sample-code-f13">Sample Code F13</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#pwm">PWM</a>
      <ol>
        <li><a href="#principle">Principle</a></li>
        <li><a href="#renesas-configure">Renesas Configure</a></li>
        <li><a href="#f24-led">F24 LED</a></li>
      </ol>
    </li>
    <li><a href="#adc">ADC</a></li>
    <li><a href="#iar-ide">IAR IDE</a>
      <ol>
        <li><a href="#blinky-led">Blinky LED</a></li>
        <li><a href="#migrate-from-cs">Migrate from CS+</a></li>
        <li><a href="#build-options">Build Options</a></li>
      </ol>
    </li>
  </ol>
</nav>

    </div>
</section>



    
    
    <p>(Feature image from <a class="link" href="https://www.renesas.com/en/products/microcontrollers-microprocessors/rl78-low-power-8-16-bit-mcus/rtk7f124fpc01000bj-rl78f24-r7f124fpj-target-board#overview"  target="_blank" rel="noopener"
    >RTK7F124FPC01000BJ - RL78/F24 (R7F124FPJ) Target Board | Renesas </a>)</p>
<hr>
<h2 id="rl78-family">RL78 Family
</h2><p><strong>References</strong>:</p>
<ol>
<li><a id="Rl78-Prod-r1"></a>
<a class="link" href="https://www.renesas.com/en/products/microcontrollers-microprocessors/rl78-low-power-8-16-bit-mcus#featured_products"  target="_blank" rel="noopener"
    >RL78 Series - Low-Power 8-Bit &amp; 16-Bit Microcontrollers (MCU) | Renesas</a>
<small>
<ul>
<li>Searched by <code>RL78 F24 Flash Led</code> in <a id="RL78-Prod-s1"></a>
<a class="link" href="https://duckduckgo.com/?q=RL78&#43;F24&#43;Flash&#43;Led&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="RL78-Prod-r2"></a>
<a class="link" href="https://www.renesas.com/en/document/dst/rl78f23-f24-datasheet?r=1498256#page=7.10"  target="_blank" rel="noopener"
    >RL78/F23, F24 RENESAS MCU</a>
<small>
<ul>
<li>Collected in <a class="link" href="https://www.renesas.com/en/products/automotive-products/rl78-automotive-mcus#featured_products"  target="_blank" rel="noopener"
    >RL78 Low Power 16-bit MCUs for Automotive | Renesas</a></li>
<li>Searched in <a class="link" href="#RL78-Prod-s1" >s1</a>
</small></li>
</ul>
</li>
</ol>
<hr>
<p><strong>Notes</strong>:</p>
<ol>
<li>
<p>Brief comparision among MCUs <sup><a class="link" href="#Rl78-Prod-r1" >r1-MCU</a></sup>:</p>
<p><img src="https://www.renesas.com/sites/default/files/media/images/rl78-portfolio-230914.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
</li>
<li>
<p>RL78/F24 (R7F124FPJ 100-pin) block diagram shows the <code>UART0</code> (<code>RXD0</code> and <code>TXD0</code>) is <strong>inside</strong> the <code>SAU0</code>
<sup><a class="link" href="#RL78-Prod-r2" >r2-F24</a></sup></p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-11-Pins_Of_TXD0_And_RXD0-2024-11-28_205626.png"
	width="1782"
	height="722"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="246"
		data-flex-basis="592px"
	
></p>
</li>
</ol>
<hr>
<h2 id="uart">UART
</h2><h3 id="hardware">Hardware
</h3><p><strong>References</strong>:</p>
<ol>
<li><a id="Hw-Uart-r1"></a>
<a class="link" href="https://www.youtube.com/watch?v=q-XUKRfXQOE"  target="_blank" rel="noopener"
    >Implementing UART Tx in RL78 F14 - YouTube - SM training academy</a>
<small>
<ul>
<li>Searched by <code>UART code demonstration for Renesas RL78/F23</code> in
<a class="link" href="https://duckduckgo.com/?q=UART&#43;code&#43;demonstration&#43;for&#43;Renesas&#43;RL78%2FF23&amp;iax=videos&amp;ia=videos&amp;iai=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Dq-XUKRfXQOE"  target="_blank" rel="noopener"
    >DDG video</a>
</small></li>
</ul>
</li>
<li><a id="Hw-Uart-r2"></a>
<a class="link" href="https://www.renesas.com/en/products/microcontrollers-microprocessors/rl78-low-power-8-16-bit-mcus/rtk7f124fpc01000bj-rl78f24-r7f124fpj-target-board"  target="_blank" rel="noopener"
    >RTK7F124FPC01000BJ - RL78/F24 (R7F124FPJ) Target Board | Renesas</a>
<small>
<ul>
<li>Searched by <code>renesas R7F124FPJ3A downloader</code> in
<a class="link" href="https://duckduckgo.com/?q=renesas&#43;R7F124FPJ3A&#43;downloader&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Hw-Uart-r3"></a>
<a class="link" href="https://www.renesas.com/en/document/mat/e2-emulator-lite-rte0t0002lkce00000r-users-manual"  target="_blank" rel="noopener"
    >E2 Emulator Lite RTE0T0002LKCE00000R User&rsquo;s Manual</a>
<small>
<ul>
<li>Searched by <code>Renesas E2 lite usage</code> in
<a class="link" href="https://duckduckgo.com/?q=Renesas&#43;E2&#43;lite&#43;usage&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id=""></a>
<a class="link" href="" ></a>
<small>
<ul>
<li>Searched by <code> </code> in
<a class="link" href="" >DDG</a>
</small></li>
</ul>
</li>
</ol>
<hr>
<p><strong>Environment</strong>:</p>
<ol>
<li>
<p>RL78 / F24 Target board 100 pin</p>
<ul>
<li>MCU: <code>R7F124FPJ3A</code>, 2335AM456</li>
<li>PCB: RTK7F124FPC01000BJ REV.1.0</li>
</ul>
</li>
<li>
<p>E2 Emulator Lite: RTE0T0002LKCE00000R</p>
</li>
</ol>
<hr>
<p><strong>Notes</strong>:</p>
<p>(2024-11-25)</p>
<ol>
<li>
<p>The TTL needs to be converted to USB voltage level to achieve the
communication between a PC and a UART
<sup><a class="link" href="#Hw-Uart-r1" >r1-SM</a></sup>.</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_G23-UART-Vid-01_0-26.png"
	width="563"
	height="216"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="260"
		data-flex-basis="625px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_G23-UART-Vid-02_0-57.png"
	width="485"
	height="200"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="242"
		data-flex-basis="582px"
	
></p>
<ul>
<li>
<p>However, I don&rsquo;t have a convertor.</p>
</li>
<li>
<p>I have an Arduino Nano, which can be connected to a USB (<code>COM</code>) port.</p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 280 121"
      >
      <g transform='translate(8,16)'>
<path d='M 120,16 L 144,16' fill='none' stroke='currentColor'></path>
<path d='M 216,16 L 248,16' fill='none' stroke='currentColor'></path>
<path d='M 176,32 L 184,32' fill='none' stroke='currentColor'></path>
<path d='M 176,48 L 184,48' fill='none' stroke='currentColor'></path>
<path d='M 120,80 L 144,80' fill='none' stroke='currentColor'></path>
<path d='M 216,80 L 248,80' fill='none' stroke='currentColor'></path>
<path d='M 120,16 L 120,48' fill='none' stroke='currentColor'></path>
<path d='M 120,48 L 120,80' fill='none' stroke='currentColor'></path>
<path d='M 144,16 L 144,80' fill='none' stroke='currentColor'></path>
<path d='M 216,16 L 216,80' fill='none' stroke='currentColor'></path>
<path d='M 248,16 L 248,80' fill='none' stroke='currentColor'></path>
<text text-anchor='middle' x='0' y='52' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='8' y='52' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='24' y='52' fill='currentColor' style='font-size:1em'>━</text>
<text text-anchor='middle' x='32' y='52' fill='currentColor' style='font-size:1em'>━</text>
<text text-anchor='middle' x='40' y='52' fill='currentColor' style='font-size:1em'>━</text>
<text text-anchor='middle' x='56' y='36' fill='currentColor' style='font-size:1em'>M</text>
<text text-anchor='middle' x='56' y='52' fill='currentColor' style='font-size:1em'>U</text>
<text text-anchor='middle' x='56' y='68' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='64' y='36' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='64' y='52' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='64' y='68' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='72' y='36' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='72' y='52' fill='currentColor' style='font-size:1em'>B</text>
<text text-anchor='middle' x='72' y='68' fill='currentColor' style='font-size:1em'>b</text>
<text text-anchor='middle' x='80' y='36' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='80' y='68' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='88' y='68' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='96' y='52' fill='currentColor' style='font-size:1em'>━</text>
<text text-anchor='middle' x='104' y='52' fill='currentColor' style='font-size:1em'>━</text>
<text text-anchor='middle' x='112' y='4' fill='currentColor' style='font-size:1em'>A</text>
<text text-anchor='middle' x='112' y='52' fill='currentColor' style='font-size:1em'>━</text>
<text text-anchor='middle' x='120' y='4' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='120' y='100' fill='currentColor' style='font-size:1em'>(</text>
<text text-anchor='middle' x='128' y='4' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='128' y='100' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='136' y='4' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='136' y='100' fill='currentColor' style='font-size:1em'>v</text>
<text text-anchor='middle' x='144' y='4' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='144' y='100' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='152' y='4' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='152' y='36' fill='currentColor' style='font-size:1em'>T</text>
<text text-anchor='middle' x='152' y='52' fill='currentColor' style='font-size:1em'>R</text>
<text text-anchor='middle' x='152' y='68' fill='currentColor' style='font-size:1em'>G</text>
<text text-anchor='middle' x='152' y='100' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='160' y='4' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='160' y='36' fill='currentColor' style='font-size:1em'>x</text>
<text text-anchor='middle' x='160' y='52' fill='currentColor' style='font-size:1em'>x</text>
<text text-anchor='middle' x='160' y='68' fill='currentColor' style='font-size:1em'>N</text>
<text text-anchor='middle' x='160' y='100' fill='currentColor' style='font-size:1em'>)</text>
<text text-anchor='middle' x='168' y='68' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='200' y='36' fill='currentColor' style='font-size:1em'>R</text>
<text text-anchor='middle' x='200' y='52' fill='currentColor' style='font-size:1em'>T</text>
<text text-anchor='middle' x='208' y='4' fill='currentColor' style='font-size:1em'>R</text>
<text text-anchor='middle' x='208' y='36' fill='currentColor' style='font-size:1em'>x</text>
<text text-anchor='middle' x='208' y='52' fill='currentColor' style='font-size:1em'>x</text>
<text text-anchor='middle' x='216' y='4' fill='currentColor' style='font-size:1em'>L</text>
<text text-anchor='middle' x='224' y='4' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='232' y='4' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='240' y='4' fill='currentColor' style='font-size:1em'>/</text>
<text text-anchor='middle' x='248' y='4' fill='currentColor' style='font-size:1em'>F</text>
<text text-anchor='middle' x='256' y='4' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='264' y='4' fill='currentColor' style='font-size:1em'>4</text>
</g>

    </svg>
  
</div>
</li>
</ul>
</li>
<li>
<p>I don&rsquo;t Short circuit pins as RL78/G23 required? <sup><a class="link" href="#Hw-Uart-r2" >r2-Intro</a></sup> in the video
<sup><a class="link" href="#Smcg-Uart-r1" >r1-Show</a></sup>.</p>
<ul>
<li>
<p>I just connected the <code>VDD</code> pin (#20 in the connector CN1) to 3.3V,
and the <code>GND</code> (#22 in CN1) to ground.</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-Target_Board-Manual_01.png"
	width="1118"
	height="1663"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="67"
		data-flex-basis="161px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-Target_Board-Manual_02.png"
	width="2067"
	height="1462"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="141"
		data-flex-basis="339px"
	
></p>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="smcg-uart">Smcg Uart
</h3><p><strong>References</strong>:</p>
<ol>
<li><a id="Smcg-Uart-r1"></a>
<a class="link" href="https://www.renesas.com/en/ajax/show-video/25566193"  target="_blank" rel="noopener"
    >How to Create a UART Communication Project Using Smart Configurator in e² studio</a>
<small>
<ul>
<li>Collected by <a class="link" href="https://www.renesas.com/en/software-tool/rl78-smart-configurator#tools_support"  target="_blank" rel="noopener"
    >RL78 Smart Configurator | Renesas</a></li>
<li>Searched by <code>smart configurator for RL78 F23 UART</code> in
<a class="link" href="https://duckduckgo.com/?q=smart&#43;configurator&#43;for&#43;RL78&#43;F23&#43;UART&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Smcg-Uart-r2"></a>
<a class="link" href="https://www.renesas.com/en/document/mat/rl78-smart-configurator-users-guide-iarew#page=58.08"  target="_blank" rel="noopener"
    >RL78 Smart Configurator User’s Guide: IAREW</a>
<small>
<ul>
<li>Collected by <a class="link" href="https://www.renesas.com/en/document/gde/rl78f24-guide-engineer?r=1552481"  target="_blank" rel="noopener"
    >RL78/F24 Guide for Engineer - Renesas Electronics Corporation</a></li>
<li>Searched by <code>UART Communication component on RL78/F24</code> in
<a class="link" href="https://duckduckgo.com/?q=UART&#43;Communication&#43;component&#43;on&#43;RL78%2FF24&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id=""></a>
<a class="link" href="" ></a>
<small>
<ul>
<li>Searched by <code> </code> in
<a class="link" href="" >DDG</a>
</small></li>
</ul>
</li>
</ol>
<hr>
<p><strong>Notes</strong>:</p>
<p>(2024-11-26)</p>
<ol>
<li>
<p>Creat a new Smcg project:</p>
<ol>
<li>
<p>Select <strong>device</strong>:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-Smcg-01-2024-11-26_111918.png"
	width="858"
	height="987"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="86"
		data-flex-basis="208px"
	
></p>
</li>
<li>
<p>Add UART component and <strong>specify operation</strong>:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-Smcg-02-Add_Component-2024-11-26_112514.png"
	width="698"
	height="767"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="91"
		data-flex-basis="218px"
	
></p>
<ul>
<li>
<p>The resource can be <code>RLIN30</code> or <code>RLIN31</code></p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-Smcg-03-Specify_Operation-2024-11-26_113716.png"
	width="709"
	height="491"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="144"
		data-flex-basis="346px"
	
></p>
</li>
</ul>
</li>
<li></li>
</ol>
</li>
<li>
<p>The file structure of code generated by Smcg
<sup><a class="link" href="#Smcg-Uart-r2" >r2-Docs</a><sup></p>
</li>
</ol>
<hr>
<h3 id="modify-code">Modify Code
</h3><p><strong>References</strong>:</p>
<ol>
<li><a id="Soft-Uart-r1"></a>
<a class="link" href="https://www.renesas.com/en/document/man/smart-configurator-users-manual-rl78-api-reference?r=1622856#page=572.10"  target="_blank" rel="noopener"
    >Smart Configurator User&rsquo;s Manual: RL78 API Reference</a>
<small>
<ul>
<li>Listed in the Documentation: <a class="link" href="https://www.renesas.com/en/software-tool/rl78-smart-configurator#documents"  target="_blank" rel="noopener"
    >RL78 Smart Configurator | Renesas</a>
</small></li>
</ul>
</li>
</ol>
<hr>
<p><strong>Notes</strong>:</p>
<p>(2024-11-25)</p>
<ol>
<li>
<p>The <code>r_cg_serial.h</code> lists <strong>all the functions</strong> can be used in the UART communication
<sup><a class="link" href="https://youtu.be/q-XUKRfXQOE?t=967"  target="_blank" rel="noopener"
    >r1-16:07</a></sup>.</p>
<ul>
<li>
<p>That means I may need to be <strong>familiar with the usage</strong> of each function
<sup><a class="link" href="#Soft-Uart-r1" >r1-Manual</a></sup>.</p>
</li>
<li>
<p>Basically, 2 functions are most often used:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">R_UART0_Start</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">MD_STATUS</span> <span class="nf">R_UART0_Send</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span> <span class="k">const</span> <span class="n">tx_buf</span><span class="p">,</span> <span class="kt">uint16_t</span> <span class="n">tx_num</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>A callback function <code>r_uart0_callback_sendend(void)</code> (defined in <code>r_cg_serial_user.c</code>)
will be executed after the transmission completed.
<sup><a class="link" href="https://youtu.be/q-XUKRfXQOE?t=2031"  target="_blank" rel="noopener"
    >r1-33:48</a></sup></p>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="iarew">IAREW
</h3><h4 id="build-error">Build Error
</h4><p><strong>References</strong>:</p>
<ol>
<li><a id="Iar-r1"></a>
<a class="link" href="https://www.youtube.com/watch?v=e_oBZhoCS6c"  target="_blank" rel="noopener"
    >How to Create a UART Communication Project Using Smart Configurator in e² studio - RenesasPresents</a></li>
</ol>
<hr>
<p><strong>Problems</strong>:</p>
<ol>
<li>
<p>I copied the code from video <sup><a class="link" href="#Iar-r1" >r1-YouTube</a></sup>,
then clicked the <code>Build All</code> in IAR.
The building failed.</p>
</li>
<li>
<p>Two errors that some sizes (of sections) exceed the block size <code>OPT_BYTE</code> and <code>SECUR_ID</code></p>
<p>Build Error:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-IAR-01-Build_Error-2024-11-26_154201.png"
	width="867"
	height="820"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="105"
		data-flex-basis="253px"
	
></p>
<details><summary>Error Messages</summary>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Messages
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">UART-Test-Debug
</span></span><span class="line"><span class="cl">Reading project nodes ...
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Cleaning ... <span class="m">14</span> files.
</span></span><span class="line"><span class="cl">r_bsp_common_iar.asm
</span></span><span class="line"><span class="cl">cstartup.s
</span></span><span class="line"><span class="cl">Config_UARTO.c
</span></span><span class="line"><span class="cl">Config_UARTO_user.c
</span></span><span class="line"><span class="cl">r_cg_systeminit.c
</span></span><span class="line"><span class="cl">r_cg_sau_common.c
</span></span><span class="line"><span class="cl">hdwinit.c
</span></span><span class="line"><span class="cl">r_bsp_init.c
</span></span><span class="line"><span class="cl">main.c
</span></span><span class="line"><span class="cl">r_bsp_common.c
</span></span><span class="line"><span class="cl">Pin.c
</span></span><span class="line"><span class="cl">mcu_clocks.c
</span></span><span class="line"><span class="cl">vecttbl.c
</span></span><span class="line"><span class="cl">UART-Test.out
</span></span><span class="line"><span class="cl">Error<span class="o">[</span>Lp004<span class="o">]</span>: actual size <span class="o">(</span>0x5<span class="o">)</span> exceeds maximum size <span class="o">(</span>0x4<span class="o">)</span> <span class="k">for</span> block <span class="s2">&#34;OPT_BYTE&#34;</span>
</span></span><span class="line"><span class="cl">Error<span class="o">[</span>Lp004<span class="o">]</span>: actual size <span class="o">(</span>0x10<span class="o">)</span> exceeds maximum size <span class="o">(</span>0xa<span class="o">)</span> <span class="k">for</span> block <span class="s2">&#34;SECUR_ID&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Total number of errors: <span class="m">2</span>
</span></span><span class="line"><span class="cl">Total number of warnings: <span class="m">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Build failed
</span></span></code></pre></td></tr></table>
</div>
</div></details>
</li>
</ol>
<hr>
<p><strong>Notes</strong>:</p>
<hr>
<h3 id="e2-studio">E2 Studio
</h3><p><strong>References</strong>:</p>
<ol>
<li><a id="Uart-E2-r1"></a>
<a class="link" href="https://www.renesas.com/en/document/mat/e2-emulator-lite-rte0t0002lkce00000r-users-manual#page=24.07"  target="_blank" rel="noopener"
    >E2 Emulator Lite RTE0T0002LKCE00000R User&rsquo;s Manual</a>
<small>
<ul>
<li>Searched by <code>Renesas E2 lite usage</code> in
<a class="link" href="https://duckduckgo.com/?q=Renesas&#43;E2&#43;lite&#43;usage&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
</ol>
<hr>
<p><strong>Notes</strong>:</p>
<p>(2024-11-28)</p>
<ol>
<li>
<p><strong>Hardware Resources</strong></p>
<ol>
<li>
<p>Pins of <code>TXD0</code> (Pin: <code>P15</code>) and <code>RXD0</code> (Pin: <code>P16</code>) on the target board: Connector2 - pin#5 (<code>TXD0</code>) and pin#7 (<code>RXD0</code>).</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-12-Pins_On_Target_Board_TXD0_And_RXD0-2024-11-28_210206.png"
	width="1317"
	height="672"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="195"
		data-flex-basis="470px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-13-Pins_On_Connector_TXD0_And_RXD0-2024-11-28_211059.png"
	width="644"
	height="863"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="74"
		data-flex-basis="179px"
	
></p>
</li>
</ol>
</li>
<li>
<p><strong>Configure The Components</strong></p>
<ol>
<li>
<p>Create an E2 Studio project</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-01-Create_Proj-2024-11-26_161523.png"
	width="859"
	height="602"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="142"
		data-flex-basis="342px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-02-Create_Proj_Debugger-2024-11-27_113754.png"
	width="845"
	height="740"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="114"
		data-flex-basis="274px"
	
></p>
</li>
<li>
<p>Configure <code>UART Communication</code>: Transmission and Reception</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-07-Trans-2024-11-28_180932.png"
	width="1288"
	height="1266"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="101"
		data-flex-basis="244px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-08-Reception-2024-11-28_181828.png"
	width="1288"
	height="1266"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="101"
		data-flex-basis="244px"
	
></p>
</li>
</ol>
</li>
<li>
<p><strong>Add User Code And Run The Project</strong></p>
<ol>
<li>
<p><code>UART_F24.c</code>: Define reception buffer and messages to be sent outside the <code>main</code> function as global variables</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cm">/** Global variables and functions (to be accessed by other files) */</span>
</span></span><span class="line"><span class="cl"><span class="kt">uint8_t</span> <span class="n">g_Uart0RxBuf</span><span class="p">;</span>	<span class="cm">/* UART0 receive buffer */</span>
</span></span><span class="line"><span class="cl"><span class="kt">uint8_t</span> <span class="n">g_Uart0RxErr</span><span class="p">;</span> 	<span class="cm">/* UART0 receive error status */</span>
</span></span><span class="line"><span class="cl"><span class="n">MD_STATUS</span> <span class="n">g_Uart0TxEnd</span><span class="p">;</span>	<span class="cm">/* UART0 transmission end */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/** Private global variables and functions (to be sent) */</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">messageOK</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#34;OK</span><span class="se">\r\n</span><span class="s">&#34;</span><span class="p">};</span>	<span class="cm">/* Message for receiving &#34;T&#34; */</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">messageok</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#34;ok</span><span class="se">\r\n</span><span class="s">&#34;</span><span class="p">};</span>	<span class="cm">/* Message for receiving &#34;t&#34; */</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">messageUC</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#34;UC</span><span class="se">\r\n</span><span class="s">&#34;</span><span class="p">};</span>	<span class="cm">/* Message for receiving other characters */</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">messageFE</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#34;FE</span><span class="se">\r\n</span><span class="s">&#34;</span><span class="p">};</span>	<span class="cm">/* Framing error message */</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">messagePE</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#34;PE</span><span class="se">\r\n</span><span class="s">&#34;</span><span class="p">};</span>	<span class="cm">/* Parity error message */</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">messageOE</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#34;OE</span><span class="se">\r\n</span><span class="s">&#34;</span><span class="p">};</span>	<span class="cm">/* Overrun error message */</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-09-Main_Loop-2024-11-28_190316.png"
	width="1287"
	height="1262"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="101"
		data-flex-basis="244px"
	
></p>
</li>
<li>
<p><code>Config_UART0_user.c</code>: Customized callback functions (triggered by respective interruption)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"></code></pre></td></tr></table>
</div>
</div><p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-10-Callbacks-2024-11-28_195812.png"
	width="1287"
	height="1307"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="98"
		data-flex-basis="236px"
	
></p>
</li>
</ol>
<ul>
<li>
<p>The same code can be built with 0 error, but prompting liscene warning:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-02-Warn_Build-2024-11-26_163425.png"
	width="1920"
	height="1020"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="188"
		data-flex-basis="451px"
	
></p>
</li>
<li>
<p><strong>Analysis</strong>:</p>
<ol>
<li>
<p>Maybe IAR&rsquo;s liscene has been expired. So, the program cannot be built correctly.</p>
<ul>
<li>Today should be the last of my evaluation liscene, as the prompt shows &ldquo;will be expired in <strong>0 days</strong>&rdquo;.</li>
</ul>
<p>(2024-11-27)</p>
<ul>
<li>
<p>Nov 27 becomes red:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-IAR-02-Expiry-2024-11-27_101936.png"
	width="571"
	height="243"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="234"
		data-flex-basis="563px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-IAR-03-Build_Error-2024-11-27_102645.png"
	width="911"
	height="820"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="111"
		data-flex-basis="266px"
	
></p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li>
<p>E2 studio cannot debug: Must connect to the <strong>debugger</strong></p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-03-Debug_As_Hardware-2024-11-27_123843.png"
	width="1400"
	height="1228"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="114"
		data-flex-basis="273px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-04-Debug_Needs_Debugger-2024-11-27_151126.png"
	width="934"
	height="1020"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="91"
		data-flex-basis="219px"
	
></p>
</li>
<li>
<p>E2 studio cannot debug: <strong>Do not power</strong> the board when debugging with a debugger.
<sup><a class="link" href="#Uart-E2-r1" >r1-Manual</a></sup></p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-Debug_Hw-02.jpg"
	width="4029"
	height="1200"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="335"
		data-flex-basis="805px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-04-Debug_wo_power-2024-11-27_110553.png"
	width="921"
	height="404"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="227"
		data-flex-basis="547px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-E2-Debug_Hw-01-Correct.jpg"
	width="3977"
	height="1282"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="310"
		data-flex-basis="744px"
	
></p>
</li>
</ol>
<hr>
<h4 id="icd-debugger">ICD Debugger
</h4><p>(2025-01-04)</p>
<ul>
<li>
<p>Connect tag of Microchip ICD (In-Circuit Debugger) to 14-pin cable of E2 Lite:</p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 344 153"
      >
      <g transform='translate(8,16)'>
<path d='M 144,0 L 176,0' fill='none' stroke='currentColor'></path>
<path d='M 16,16 L 144,16' fill='none' stroke='currentColor'></path>
<path d='M 144,16 L 176,16' fill='none' stroke='currentColor'></path>
<path d='M 176,16 L 304,16' fill='none' stroke='currentColor'></path>
<path d='M 32,32 L 48,32' fill='none' stroke='currentColor'></path>
<path d='M 72,32 L 88,32' fill='none' stroke='currentColor'></path>
<path d='M 112,32 L 128,32' fill='none' stroke='currentColor'></path>
<path d='M 152,32 L 168,32' fill='none' stroke='currentColor'></path>
<path d='M 192,32 L 208,32' fill='none' stroke='currentColor'></path>
<path d='M 232,32 L 248,32' fill='none' stroke='currentColor'></path>
<path d='M 272,32 L 288,32' fill='none' stroke='currentColor'></path>
<path d='M 32,48 L 48,48' fill='none' stroke='currentColor'></path>
<path d='M 72,48 L 88,48' fill='none' stroke='currentColor'></path>
<path d='M 112,48 L 128,48' fill='none' stroke='currentColor'></path>
<path d='M 152,48 L 168,48' fill='none' stroke='currentColor'></path>
<path d='M 192,48 L 208,48' fill='none' stroke='currentColor'></path>
<path d='M 232,48 L 248,48' fill='none' stroke='currentColor'></path>
<path d='M 272,48 L 288,48' fill='none' stroke='currentColor'></path>
<path d='M 32,80 L 48,80' fill='none' stroke='currentColor'></path>
<path d='M 72,80 L 88,80' fill='none' stroke='currentColor'></path>
<path d='M 112,80 L 128,80' fill='none' stroke='currentColor'></path>
<path d='M 152,80 L 168,80' fill='none' stroke='currentColor'></path>
<path d='M 192,80 L 208,80' fill='none' stroke='currentColor'></path>
<path d='M 232,80 L 248,80' fill='none' stroke='currentColor'></path>
<path d='M 272,80 L 288,80' fill='none' stroke='currentColor'></path>
<path d='M 32,96 L 48,96' fill='none' stroke='currentColor'></path>
<path d='M 72,96 L 88,96' fill='none' stroke='currentColor'></path>
<path d='M 112,96 L 128,96' fill='none' stroke='currentColor'></path>
<path d='M 152,96 L 168,96' fill='none' stroke='currentColor'></path>
<path d='M 192,96 L 208,96' fill='none' stroke='currentColor'></path>
<path d='M 232,96 L 248,96' fill='none' stroke='currentColor'></path>
<path d='M 272,96 L 288,96' fill='none' stroke='currentColor'></path>
<path d='M 16,112 L 304,112' fill='none' stroke='currentColor'></path>
<path d='M 16,16 L 16,112' fill='none' stroke='currentColor'></path>
<path d='M 32,32 L 32,48' fill='none' stroke='currentColor'></path>
<path d='M 32,80 L 32,96' fill='none' stroke='currentColor'></path>
<path d='M 48,32 L 48,48' fill='none' stroke='currentColor'></path>
<path d='M 48,80 L 48,96' fill='none' stroke='currentColor'></path>
<path d='M 72,32 L 72,48' fill='none' stroke='currentColor'></path>
<path d='M 72,80 L 72,96' fill='none' stroke='currentColor'></path>
<path d='M 88,32 L 88,48' fill='none' stroke='currentColor'></path>
<path d='M 88,80 L 88,96' fill='none' stroke='currentColor'></path>
<path d='M 112,32 L 112,48' fill='none' stroke='currentColor'></path>
<path d='M 112,80 L 112,96' fill='none' stroke='currentColor'></path>
<path d='M 128,32 L 128,48' fill='none' stroke='currentColor'></path>
<path d='M 128,80 L 128,96' fill='none' stroke='currentColor'></path>
<path d='M 144,0 L 144,16' fill='none' stroke='currentColor'></path>
<path d='M 152,32 L 152,48' fill='none' stroke='currentColor'></path>
<path d='M 152,80 L 152,96' fill='none' stroke='currentColor'></path>
<path d='M 168,32 L 168,48' fill='none' stroke='currentColor'></path>
<path d='M 168,80 L 168,96' fill='none' stroke='currentColor'></path>
<path d='M 176,0 L 176,16' fill='none' stroke='currentColor'></path>
<path d='M 192,32 L 192,48' fill='none' stroke='currentColor'></path>
<path d='M 192,80 L 192,96' fill='none' stroke='currentColor'></path>
<path d='M 208,32 L 208,48' fill='none' stroke='currentColor'></path>
<path d='M 208,80 L 208,96' fill='none' stroke='currentColor'></path>
<path d='M 232,32 L 232,48' fill='none' stroke='currentColor'></path>
<path d='M 232,80 L 232,96' fill='none' stroke='currentColor'></path>
<path d='M 248,32 L 248,48' fill='none' stroke='currentColor'></path>
<path d='M 248,80 L 248,96' fill='none' stroke='currentColor'></path>
<path d='M 272,32 L 272,48' fill='none' stroke='currentColor'></path>
<path d='M 272,80 L 272,96' fill='none' stroke='currentColor'></path>
<path d='M 288,32 L 288,48' fill='none' stroke='currentColor'></path>
<path d='M 288,80 L 288,96' fill='none' stroke='currentColor'></path>
<path d='M 304,16 L 304,112' fill='none' stroke='currentColor'></path>
<text text-anchor='middle' x='0' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='0' y='100' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='32' y='132' fill='currentColor' style='font-size:1em'>G</text>
<text text-anchor='middle' x='40' y='4' fill='currentColor' style='font-size:1em'>▽</text>
<text text-anchor='middle' x='40' y='132' fill='currentColor' style='font-size:1em'>N</text>
<text text-anchor='middle' x='48' y='132' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='112' y='4' fill='currentColor' style='font-size:1em'>T</text>
<text text-anchor='middle' x='120' y='4' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='128' y='4' fill='currentColor' style='font-size:1em'>K</text>
<text text-anchor='middle' x='184' y='132' fill='currentColor' style='font-size:1em'>R</text>
<text text-anchor='middle' x='192' y='4' fill='currentColor' style='font-size:1em'>V</text>
<text text-anchor='middle' x='192' y='132' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='200' y='4' fill='currentColor' style='font-size:1em'>T</text>
<text text-anchor='middle' x='200' y='132' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='208' y='4' fill='currentColor' style='font-size:1em'>R</text>
<text text-anchor='middle' x='208' y='132' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='216' y='4' fill='currentColor' style='font-size:1em'>E</text>
<text text-anchor='middle' x='216' y='132' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='224' y='4' fill='currentColor' style='font-size:1em'>F</text>
<text text-anchor='middle' x='232' y='132' fill='currentColor' style='font-size:1em'>G</text>
<text text-anchor='middle' x='240' y='132' fill='currentColor' style='font-size:1em'>N</text>
<text text-anchor='middle' x='248' y='132' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='272' y='4' fill='currentColor' style='font-size:1em'>R</text>
<text text-anchor='middle' x='280' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='288' y='4' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='296' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='304' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='320' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='320' y='100' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='328' y='52' fill='currentColor' style='font-size:1em'>3</text>
<text text-anchor='middle' x='328' y='100' fill='currentColor' style='font-size:1em'>4</text>
</g>

    </svg>
  
</div>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>E2 Lite Programmer 14 pin</th>
          <th>Tag Connect 6 pin</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Pin 2</td>
          <td>Pin 4 – GND</td>
      </tr>
      <tr>
          <td>Pin 5</td>
          <td>Pin 5 – Tool0</td>
      </tr>
      <tr>
          <td>Pin 8 + 9</td>
          <td>Pin 2 – VCC</td>
      </tr>
      <tr>
          <td>Pin 13 + 10</td>
          <td>Pin 1 - MCU RST</td>
      </tr>
  </tbody>
</table></div>
<ul>
<li>Reference: EE_Team &gt; Hardware &gt; E41 &gt; E41 Programmer to ECU.docx</li>
</ul>
</li>
</ul>
<hr>
<h3 id="upload">Upload
</h3><p><strong>Problems</strong>:</p>
<ol>
<li>
<p>I don&rsquo;t want to test the code by launching &ldquo;Debug&rdquo; every time.
I want to embed the program into the MCU and let it run itself after power on.</p>
</li>
<li>
<p>The TX and RX wires from Arduino will <strong>power</strong> the RL78 target board,
and then the debugging cannot be started, as the error:
<code>Emulator power is selected, but external power is being applied.</code></p>
</li>
</ol>
<hr>
<p><strong>References</strong>:</p>
<ol>
<li><a id="Upload-r1"></a>
<a class="link" href="https://en-support.renesas.com/knowledgeBase/20851878"  target="_blank" rel="noopener"
    >Can I evaluate and develop the RL78 microcontroller on the Arduino IDE? - Renesas Electronics</a>
<small>
<ul>
<li>Searched by <code>Renesas RL78 embed a program into MCU</code> in
<a class="link" href="https://duckduckgo.com/?q=Renesas&#43;RL78&#43;embed&#43;a&#43;program&#43;into&#43;MCU&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Upload-r2"></a>
<a class="link" href="https://community.renesas.com/tools/e2studio/f/e2studio-forum/17459/serial-terminal-option-in-e2/57197"  target="_blank" rel="noopener"
    >Serial Terminal Option in E2? - e2studio - Forum - e2studio IDE &hellip;</a>
<small>
<ul>
<li>Searched by <code>e2 studio serial monitor</code> in <a id="Upload-s2"></a>
<a class="link" href="https://duckduckgo.com/?q=e2&#43;studio&#43;serial&#43;monitor&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Upload-r3"></a>
<a class="link" href="https://www.renesas.com/en/document/man/e2-studio-users-manual-getting-started-guide-v70#page=33"  target="_blank" rel="noopener"
    >e2 studio Integrated Development Environment User&rsquo;s Manual: Getting &hellip;</a>
<small>
<ul>
<li>Found in <a class="link" href="#Upload-s2" >s2</a>
</small></li>
</ul>
</li>
</ol>
<hr>
<p><strong>Notes</strong>:</p>
<p>(2024-11-29)</p>
<ol>
<li>
<p>Arduino IDE can develope RL78 MCU. It supports G-class MCU
<sup><a class="link" href="#Upload-r1" >r1-FAQs</a></sup>.
I am not sure how about F24.</p>
</li>
<li>
<p>Plug in the TX and RX wires <strong>after</strong> the debugging process launched
<sup><a class="link" href="#Uart-E2-r1" >r1-Manual</a></sup>.</p>
</li>
<li>
<p>E2 has a serial monitor: TM Terminal
<sup><a class="link" href="#" >r2-Forum</a></sup>.</p>
</li>
<li>
<p>There is a <strong>&lsquo;Download&rsquo;</strong> button in the debugging tools <sup><a class="link" href="#Upload-r3" >r3-Manual</a></sup>,
but mine is <strong>gray</strong>.</p>
</li>
</ol>
<hr>
<h3 id="pin-connection">Pin Connection
</h3><p><strong>Problems</strong>:</p>
<ol>
<li>
<p>The RL78/F24 target board are connected to Arduino <strong>Nano</strong> with TX and RX wires,
The Arduino will transmit the character <code>t</code> to the RL78/F24.
Then, the RL78/F24 is expected to return <code>ok</code> back.</p>
</li>
<li>
<p>The Arduino Nano code is from <a class="link" href="#Pin-Ardu-r2" >r2-Docs</a>.
And I have <strong>extended</strong> the <code>RX0</code> and <code>TX1</code> to pins <code>D3</code> and <code>D2</code></p>
</li>
</ol>
<hr>
<p><strong>References</strong>:</p>
<ol>
<li><a id="Pin-Ardu-r1"></a>
<a class="link" href="https://forums.raspberrypi.com/viewtopic.php?t=337678"  target="_blank" rel="noopener"
    >How to read data through UART - Raspberry Pi Forums</a>
<small>
<ul>
<li>Searched by <code>raspberry pi uart receive and display on terminal</code> in
<a class="link" href="https://tinyurl.com/4wvm5ek4"  target="_blank" rel="noopener"
    >Google</a>
</small></li>
</ul>
</li>
<li><a id="Pin-Ardu-r2"></a>
<a class="link" href="https://docs.arduino.cc/learn/communication/uart/#rxtx-pin-examples"  target="_blank" rel="noopener"
    >Universal Asynchronous Receiver-Transmitter (UART) - Arduino Docs</a>
<small>
<ul>
<li>Searched by <code>Arduino sends and receives character via UART</code> in
<a class="link" href="https://duckduckgo.com/?q=Arduino&#43;sends&#43;and&#43;receives&#43;character&#43;via&#43;UART&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
</ol>
<hr>
<p><strong>Practices</strong>:</p>
<ol>
<li>
<p>Try to send <code>t</code> to F24 by using <code>Serial.println()</code>:</p>
<ul>
<li>
<p><strong>Results</strong></p>
<ol>
<li>
<p>The Output in Serial Monitor:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">t
</span></span><span class="line"><span class="cl">t
</span></span><span class="line"><span class="cl">t
</span></span><span class="line"><span class="cl">t
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
</ul>
</li>
</ol>
<p>(2024-12-02)</p>
<ol start="2">
<li>
<p><del><code>Serial.write()</code> writes data to the serial port,
while the <code>Serial.print()</code> writes data to USB (printing in terminal),
reminded by the code of <sup><a class="link" href="#Pin-Ardu-r1" >r1-Raspi</a></sup></del>
<code>Serial.print()</code> will send data.</p>
<ul>
<li>
<p><strong>Results</strong>:</p>
<ol>
<li>
<p>The Serial Monitor output became:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">tttttt...
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>The voltage on <code>TX1</code> and <code>D2</code> sometimes keep 4.6V for a long time,
and sometimes they become 0.0 V.
I didn&rsquo;t understand why is that.</p>
</li>
</ol>
</li>
</ul>
</li>
<li>
<p>Test the original TX1, RX0</p>
<ul>
<li>
<p><strong>Reasons</strong>:</p>
<ol>
<li>Try my luck.</li>
</ol>
</li>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p>After I re-plugged the wire: from D2 + D3 to TX1 + RX0,
I noticed that the history message in Serial Terminal showed &ldquo;FE&rdquo;.</p>
</li>
<li>
<p>F24&rsquo;s pin-5 &gt; <code>D3</code>, and pin-7 &gt; <code>TX1</code></p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-UART-Arduino-2024-12-03.png"
	width="1034"
	height="564"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="183"
		data-flex-basis="440px"
	
></p>
</li>
</ol>
</li>
<li>
<p><strong>Results</strong>:</p>
<ol>
<li>
<p>F24 gives wrong feedback. The Serial Monitor printed:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">FE
</span></span><span class="line"><span class="cl">UC
</span></span><span class="line"><span class="cl">FE
</span></span><span class="line"><span class="cl">UC
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
</ul>
</li>
</ol>
<p>(2024-12-05)</p>
<ol start="3">
<li>
<p>Rectify pin connects by separating the 2 groups of serial ports without crossing them.</p>
<ul>
<li>
<p><strong>Reasons</strong>:</p>
<ul>
<li>Figured out the correct usage of SoftwareSerial</li>
</ul>
</li>
<li>
<p><strong>Actions</strong>:</p>
</li>
<li>
<p><strong>Results</strong>:</p>
<ol>
<li>Garbled characters appears</li>
</ol>
</li>
<li>
<p><strong>Analysis</strong>:</p>
<ol>
<li>
<p>The data <strong>received by F24</strong> was problematic,
and didn&rsquo;t match its expectations.</p>
<p>I should confirm what data are sent from the Arduino Nano.</p>
</li>
<li>
<p>I can set a breakpoint in the E2 Studio to watch the data that F24 received.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<h2 id="blink-led2">Blink LED2
</h2><p><strong>Problems</strong>:</p>
<ol>
<li>
<p>How to download the program to the board?</p>
</li>
<li>
<p>How to use the debugger?</p>
</li>
</ol>
<hr>
<p><strong>References</strong>:</p>
<ol>
<li><a id="Led-r1"></a>
<a class="link" href="https://youtu.be/W55R7AcxHN8?si=-6Da4eLV1Pr23lx7"  target="_blank" rel="noopener"
    >Interfacing LED with Renesas RL78 Microcontroller - YouTube - SM training academy</a>
<small>
<ol>
<li>Played following <a class="link" href="#Hw-Uart-r1" >r1-SM</a>
</small></li>
</ol>
</li>
<li><a id="Led-r2"></a>
<a class="link" href="https://www.renesas.com/en/document/mat/rl78f24-target-board-rtk7f124fpc01000bj-users-manual-rev101?r=1614646"  target="_blank" rel="noopener"
    >RL78/F24 Target Board RTK7F124FPC01000BJ User&rsquo;s Manual Rev.1.01</a>
<small>
</small></li>
<li><a id="Led-r3"></a>
<a class="link" href="https://www.renesas.com/en/video/smart-configurator-tutorial-create-led-blinking-program-configuring-rl78-timer"  target="_blank" rel="noopener"
    >Smart Configurator Tutorial - Create a LED Blinking Program Configuring RL78 Timer | Renesas</a>
<small>
<ul>
<li>Searched by <code>RL78 blink Led</code> in
<a class="link" href="https://duckduckgo.com/?q=RL78&#43;blink&#43;Led&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Led-r4"></a>
<a class="link" href="https://youtu.be/XwMRzzvNT2s?t=245"  target="_blank" rel="noopener"
    >e² studio Quick Start Guide (3/3) - Build and Debug for RL78 - YouTube - RenesasPresents</a>
<small>
<ul>
<li>Searched by <code>RL78 debug skill</code> in
<a class="link" href="https://duckduckgo.com/?q=RL78&#43;debug&#43;skill&amp;iax=videos&amp;ia=videos"  target="_blank" rel="noopener"
    >DDG video</a>
</small></li>
</ul>
</li>
</ol>
<hr>
<p><strong>Notes</strong>:</p>
<p>(2024-11-28)</p>
<ol>
<li>
<p><strong>Schematic</strong>:</p>
<ol>
<li>
<p>When the <code>P67</code> is set to <code>Low</code>, the <code>LED2</code> will be <strong>ON</strong>
<sup><a class="link" href="https://youtu.be/W55R7AcxHN8?t=218"  target="_blank" rel="noopener"
    >r1-3:38</a></sup>.</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-LED-01-Schmatic-2024-11-28_094124.png"
	width="596"
	height="972"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="61"
		data-flex-basis="147px"
	
></p>
<ul>
<li>When the P67 is <strong>pulled down</strong>, the LED will light.</li>
</ul>
</li>
<li>
<p>Only need to connect the debugger to the target board.
No power supply to the target board.</p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 392 89"
      >
      <g transform='translate(8,16)'>
<path d='M 0,0 L 104,0' fill='none' stroke='currentColor'></path>
<path d='M 224,0 L 272,0' fill='none' stroke='currentColor'></path>
<path d='M 104,16 L 120,16' fill='none' stroke='currentColor'></path>
<path d='M 208,16 L 224,16' fill='none' stroke='currentColor'></path>
<path d='M 120,32 L 128,32' fill='none' stroke='currentColor'></path>
<path d='M 200,32 L 208,32' fill='none' stroke='currentColor'></path>
<path d='M 104,48 L 120,48' fill='none' stroke='currentColor'></path>
<path d='M 208,48 L 224,48' fill='none' stroke='currentColor'></path>
<path d='M 0,64 L 104,64' fill='none' stroke='currentColor'></path>
<path d='M 224,64 L 272,64' fill='none' stroke='currentColor'></path>
<path d='M 0,0 L 0,64' fill='none' stroke='currentColor'></path>
<path d='M 104,0 L 104,16' fill='none' stroke='currentColor'></path>
<path d='M 104,16 L 104,48' fill='none' stroke='currentColor'></path>
<path d='M 104,48 L 104,64' fill='none' stroke='currentColor'></path>
<path d='M 120,16 L 120,32' fill='none' stroke='currentColor'></path>
<path d='M 120,32 L 120,48' fill='none' stroke='currentColor'></path>
<path d='M 208,16 L 208,32' fill='none' stroke='currentColor'></path>
<path d='M 208,32 L 208,48' fill='none' stroke='currentColor'></path>
<path d='M 224,0 L 224,16' fill='none' stroke='currentColor'></path>
<path d='M 224,16 L 224,48' fill='none' stroke='currentColor'></path>
<path d='M 224,48 L 224,64' fill='none' stroke='currentColor'></path>
<path d='M 272,0 L 272,64' fill='none' stroke='currentColor'></path>
<text text-anchor='middle' x='16' y='36' fill='currentColor' style='font-size:1em'>✴</text>
<text text-anchor='middle' x='48' y='20' fill='currentColor' style='font-size:1em'>T</text>
<text text-anchor='middle' x='56' y='20' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='56' y='36' fill='currentColor' style='font-size:1em'>B</text>
<text text-anchor='middle' x='64' y='20' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='64' y='36' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='72' y='20' fill='currentColor' style='font-size:1em'>g</text>
<text text-anchor='middle' x='72' y='36' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='80' y='20' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='80' y='36' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='88' y='20' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='88' y='36' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='144' y='36' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='152' y='36' fill='currentColor' style='font-size:1em'>4</text>
<text text-anchor='middle' x='152' y='52' fill='currentColor' style='font-size:1em'>b</text>
<text text-anchor='middle' x='160' y='36' fill='currentColor' style='font-size:1em'>-</text>
<text text-anchor='middle' x='160' y='52' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='168' y='36' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='168' y='52' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='176' y='36' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='176' y='52' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='184' y='36' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='240' y='20' fill='currentColor' style='font-size:1em'>E</text>
<text text-anchor='middle' x='240' y='36' fill='currentColor' style='font-size:1em'>L</text>
<text text-anchor='middle' x='248' y='20' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='248' y='36' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='256' y='36' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='264' y='36' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='280' y='36' fill='currentColor' style='font-size:1em'>━</text>
<text text-anchor='middle' x='288' y='36' fill='currentColor' style='font-size:1em'>━</text>
<text text-anchor='middle' x='304' y='20' fill='currentColor' style='font-size:1em'>M</text>
<text text-anchor='middle' x='304' y='36' fill='currentColor' style='font-size:1em'>U</text>
<text text-anchor='middle' x='312' y='20' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='312' y='36' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='320' y='20' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='320' y='36' fill='currentColor' style='font-size:1em'>B</text>
<text text-anchor='middle' x='328' y='20' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='336' y='36' fill='currentColor' style='font-size:1em'>━</text>
<text text-anchor='middle' x='344' y='36' fill='currentColor' style='font-size:1em'>━</text>
<text text-anchor='middle' x='352' y='20' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='352' y='36' fill='currentColor' style='font-size:1em'>U</text>
<text text-anchor='middle' x='360' y='20' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='360' y='36' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='368' y='36' fill='currentColor' style='font-size:1em'>B</text>
</g>

    </svg>
  
</div>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-LED-11-Real_Effect-2024-11-28-164700.jpg"
	width="3317"
	height="779"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="425"
		data-flex-basis="1021px"
	
></p>
</li>
</ol>
</li>
<li>
<p><strong>Configure The Components</strong>:</p>
<ol>
<li>
<p><strong>Blinking</strong> <code>LED2</code> needs to configure 2 components:
<code>Ports</code> and <code>Timer Array Unit</code>
<sup><a class="link" href="#Led-r3" >r3-Tutorial</a></sup></p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>Components</th>
          <th>Resources</th>
          <th>Function</th>
          <th>Setting</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Ports</td>
          <td>PORT6</td>
          <td>On/Off LED (P67)</td>
          <td>P67: Output</td>
      </tr>
      <tr>
          <td>Interval Timer</td>
          <td>TAU0_0</td>
          <td>Toggle LED2 every 500ms</td>
          <td>Timer: TAU0_0 <br> Counter clock: CK00 <br> Interrupt interval: 500ms <br> Enable Interrupt (INTTM00) <br> Interrupt level: Level 3</td>
      </tr>
  </tbody>
</table></div>
</li>
<li>
<p>Smart Configurator <sup><a class="link" href="https://youtu.be/W55R7AcxHN8?t=737"  target="_blank" rel="noopener"
    >r1-12:17</a></sup>:</p>
<p>Add component &gt; Ports &gt; Config_PORT &gt; PORT6 &gt; P67</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-LED-03-Smcg_Port6-2024-11-28_114806.png"
	width="1687"
	height="802"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="210"
		data-flex-basis="504px"
	
></p>
<ul>
<li>
<p>If directly check the pin <code>P67</code>, it&rsquo;ll <strong>NOT be initialized</strong>:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-LED-02-Smcg_Pins-2024-11-28_103512.png"
	width="1535"
	height="851"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="180"
		data-flex-basis="432px"
	
></p>
</li>
</ul>
</li>
<li>
<p>Smart Configurator: Timer Array Unit</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-LED-04-Smcg_TAU0-2024-11-28_121245.png"
	width="858"
	height="477"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="179"
		data-flex-basis="431px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-LED-05-Smcg_Timer_Int-2024-11-28_121651.png"
	width="1437"
	height="803"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="178"
		data-flex-basis="429px"
	
></p>
</li>
<li>
<p>Select using E2 Lite for debugging</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-LED-12-2025-01-20_004537.png"
	width="977"
	height="1247"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="78"
		data-flex-basis="188px"
	
></p>
<ul>
<li>
<p>Also, if using CS+, don&rsquo;t forget to check: Debug &gt; Using Debug Tool</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-LED-13-2025-01-21_123845.png"
	width="644"
	height="574"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="112"
		data-flex-basis="269px"
	
></p>
</li>
</ul>
</li>
<li>
<p>Click &ldquo;Generate Code&rdquo;</p>
</li>
</ol>
</li>
<li>
<p><strong>Add User Code and Run Project</strong></p>
<ol>
<li>
<p><code>Config_TAU0_user.c</code>: Include <code>Pin.h</code> and write timer interrupt behavior:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;Pin.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="nf">PIN_WRITE</span><span class="p">(</span><span class="n">LED2</span><span class="p">)</span> <span class="o">=</span> <span class="o">~</span><span class="nf">PIN_READ</span><span class="p">(</span><span class="n">LED2</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-LED-08-E2_TAU0_Interrupt_Flip_Pin-2024-11-28_131906.png"
	width="1292"
	height="910"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="141"
		data-flex-basis="340px"
	
></p>
</li>
<li>
<p><code>Pin.h</code>: Define macro for <code>LED2</code></p>
<ul>
<li>Note, the video shows &ldquo;Users guide&rdquo;, which <strong>doesn&rsquo;t appear</strong> in my <code>Pin.h</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#define LED2 6,7
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-LED-09-E2_LED1_Pin_Macro_Definition-2024-11-28_132225.png"
	width="1292"
	height="871"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="148"
		data-flex-basis="356px"
	
></p>
<p>(2024-12-20)</p>
<ul>
<li>
<p><strong>Symbolic name</strong> can be specified in the Smart Configurator</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">// src/smc_gen/r_pincfg/Pin.h
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/* User<span class="err">&#39;</span>s guide <span class="k">for</span> symbolic name.
</span></span><span class="line"><span class="cl"> * The generated symbolic names can be used in the user application as follows: 
</span></span><span class="line"><span class="cl"> *
</span></span><span class="line"><span class="cl"> * Example: Toggle LED1 at Pin P54.
</span></span><span class="line"><span class="cl"> *  There are <span class="m">2</span> ways to toggle LED1
</span></span><span class="line"><span class="cl"> *   1<span class="o">)</span> Using symbolic name macro
</span></span><span class="line"><span class="cl"> *    Assuming the symbolic name <span class="k">for</span> P54 is <span class="s2">&#34;LED1&#34;</span>, the generated macro definition will be:
</span></span><span class="line"><span class="cl"> *         <span class="c1">#define LED1    5,4</span>
</span></span><span class="line"><span class="cl"> *
</span></span><span class="line"><span class="cl"> *    To use this macro definition to toggle the LED1, call the symbolic name APIs:
</span></span><span class="line"><span class="cl"> *         PIN_WRITE<span class="o">(</span>LED1<span class="o">)</span> <span class="o">=</span> ~PIN_READ<span class="o">(</span>LED1<span class="o">)</span>
</span></span><span class="line"><span class="cl"> *
</span></span><span class="line"><span class="cl"> *   2<span class="o">)</span> Not using symbolic name macro
</span></span><span class="line"><span class="cl"> *    Call the symbolic name APIs directly
</span></span><span class="line"><span class="cl"> *         PIN_WRITE<span class="o">(</span>5,4<span class="o">)</span> <span class="o">=</span> ~PIN_READ<span class="o">(</span>5,4<span class="o">)</span>
</span></span><span class="line"><span class="cl"> */
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/* Symbolic name */
</span></span><span class="line"><span class="cl"><span class="c1">#define MCU_RXD1        1,1</span>
</span></span><span class="line"><span class="cl"><span class="c1">#define MCU_LIN_EN        1,0</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p><code>Blink_LED.c</code>: <code>main</code> function.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nf">R_Config_TAU0_0_Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nf">EI</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-LED-10-E2_Blink_Loop_Forever-2024-11-28_132729.png"
	width="1020"
	height="552"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="184"
		data-flex-basis="443px"
	
></p>
<p>(2025-04-17T15:01:15)</p>
<ul>
<li>
<p>If <strong>do not use</strong> a timer interrupt, the <code>main()</code> can be:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;r_smc_entry.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">delay</span><span class="p">(</span><span class="kt">long</span> <span class="n">d</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">d</span><span class="o">--</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>   
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nf">PIN_WRITE</span><span class="p">(</span><span class="n">LED1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>	<span class="c1">// ON
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nf">delay</span><span class="p">(</span><span class="mi">500000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nf">PIN_WRITE</span><span class="p">(</span><span class="n">LED1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>	<span class="c1">// OFF
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nf">delay</span><span class="p">(</span><span class="mi">500000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p>Build project to generate binary file</p>
<ul>
<li><code>Project</code> &gt; <code>Build Project</code></li>
</ul>
</li>
<li>
<p>Right-click on the project name &gt; Debug As &gt; 3 Renesas GDB Hardware Debugging</p>
<ul>
<li>
<p>Debug configuration (using default settings):</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/RL78_F24-LED-07-E2_Debug_Configuration-2024-11-28_125629.png"
	width="1115"
	height="818"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="136"
		data-flex-basis="327px"
	
></p>
<ul>
<li>
<p>Click <code>Resume</code> button to continue the program.
The program will stop at the <strong>beginning</strong> of the main funciton.</p>
<p>Click <code>Resume</code> again to start execution.</p>
</li>
</ul>
</li>
</ul>
<p>(2024-12-10)</p>
<ul>
<li>Add breadpoint by double-cliking
and add a global to watch by dragging it to &ldquo;Expressions&rdquo; view
<sup><a class="link" href="#Led-r4" >r4-YouTube</a></sup>.</li>
</ul>
</li>
</ol>
</li>
</ol>
<hr>
<h2 id="spi">SPI
</h2><p><strong>Problems</strong>:</p>
<p>(2024-11-29)</p>
<ol>
<li>Use RL78/F24 to read values of the pressure sensor Bosch SMP581.</li>
</ol>
<hr>
<p><strong>References</strong>:</p>
<ol>
<li><a id="Spi-Rl78-r1"></a>
<a class="link" href="https://www.renesas.com/en/software-tool/rl78-smart-configurator#videos_training"  target="_blank" rel="noopener"
    >ELCL Slave Select Pin Function (4-wire SPI) Tutorial (1/3) - Create project for RL78/G23</a>
<small>
<ul>
<li>Found on the page: <a class="link" href="https://www.renesas.com/en/software-tool/rl78-smart-configurator"  target="_blank" rel="noopener"
    >RL78 Smart ConfiguratorSolution Toolkit</a>
when looking for solution to burn the hex code to MCU, and entering this page by accidentaly clicking.</li>
<li>The page is opened when searching (241129) <code>smart configurator for RL78 F23 UART</code> in
<a class="link" href="https://duckduckgo.com/?q=smart&#43;configurator&#43;for&#43;RL78&#43;F23&#43;UART&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Spi-Rl78-r2"></a>
<a class="link" href="https://www.renesas.com/en/document/apn/rl78g23-handshake-based-spi-master-transmissionreception-rev101#page=23.07"  target="_blank" rel="noopener"
    >RL78/G23 Handshake-based SPI Master Transmission/Reception Rev.1.01 | Renesas</a>
<small>
<ul>
<li>Searched by <code>RL78 SPI</code> in (241206) <a id="Spi-Rl78-s2"></a>
<a class="link" href="https://www.renesas.com/en/search?keywords=RL78%20SPI&amp;page=6"  target="_blank" rel="noopener"
    >Renesas search page</a></li>
<li>Try to search the above keywords after browsing
the search results of <code>F24 SPI</code>.
<a class="link" href="https://www.renesas.com/en/search?keywords=F24%20SPI&amp;page=6"  target="_blank" rel="noopener"
    >Total 6 pages</a>
don&rsquo;t include SPI application note.
</small></li>
</ul>
</li>
<li><a id="Spi-Rl78-r3"></a>
<a class="link" href="https://www.renesas.com/en/document/apn/rl78g23-handshake-based-spi-master-transmissionreception-rev101"  target="_blank" rel="noopener"
    >RL78/G10 Serial Array Unit (CSI Master Communication) CC-RL | Renesas</a>
<small>
<ul>
<li>Searched by <a class="link" href="#Spi-Rl78-s2" >s2</a>
</small></li>
</ul>
</li>
<li><a id="Spi-Rl78-r4"></a>
<a class="link" href="https://www.renesas.com/en/document/scd/rl78g23-handshake-based-spi-master-transmissionreception-rev101?language=en"  target="_blank" rel="noopener"
    >Sample Code for RL78/G23 Handshake-based SPI Master Transmission/Reception Rev.1.01</a>
<small>
<ul>
<li>Searched by <code>R01AN5889JJ0101</code> in
<a class="link" href="https://www.renesas.com/en/search?keywords=R01AN5889JJ0101"  target="_blank" rel="noopener"
    >Renesas search</a>
</small></li>
</ul>
</li>
<li><a id="Spi-Rl78-r5"></a>
<a class="link" href="https://www.renesas.com/en/video/e-studio-quick-start-guide-install-e-studio-and-cc-rl-compiler-linux"  target="_blank" rel="noopener"
    >e² studio Quick Start Guide - Install e² studio and CC-RL Compiler on Linux | Renesas</a>
<small>
<ul>
<li>Searched by <code>e2 studio install CC-RL</code> in
<a class="link" href="https://duckduckgo.com/?q=e2&#43;studio&#43;install&#43;CC-RL&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Spi-Rl78-r"></a>
<a class="link" href="" ></a>
<small>
<ul>
<li>Searched by <a class="link" href="#" >s2</a>
</small></li>
</ul>
</li>
</ol>
<hr>
<p><strong>Notes</strong>:</p>
<ol>
<li>
<p>ELCL (Logic and Event Link Controller)</p>
<ul>
<li>
<p>ELCL module can simplify the circuit by reducing 4 wires to 3 <sup><a class="link" href="#Spi-Rl78-r1" >r1-Tutorial</a></sup>.</p>
</li>
<li>
<p>The video demonstration uses board: RL78 - G23 64 pin (<code>R7F100GLGxFB</code>),
which has an option of &ldquo;Download ELCL module&rdquo;.
Although F24 doesn&rsquo;t have ELCL, it has SPI.</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/F24-SPI-ELCL-01_F24_No_ELCL-2024-12-08_231829.png"
	width="856"
	height="842"
	
	loading="lazy"
	
		alt="img: F24 SPI"
	
	
		class="gallery-image" 
		data-flex-grow="101"
		data-flex-basis="243px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/F24-SPI-ELCL-02_F24_To_G23-2024-12-08_225107.png"
	width="705"
	height="537"
	
	loading="lazy"
	
		alt="img: Diff"
	
	
		class="gallery-image" 
		data-flex-grow="131"
		data-flex-basis="315px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/F24-SPI-ELCL-03_G_Download_ELCL-2024-12-08_225512.png"
	width="857"
	height="842"
	
	loading="lazy"
	
		alt="img: G23"
	
	
		class="gallery-image" 
		data-flex-grow="101"
		data-flex-basis="244px"
	
></p>
</li>
<li>
<p>ELCL enables an MCU to serve as an <strong>slave</strong> device, by simulating an &ldquo;slave selection&rdquo; signal.</p>
</li>
</ul>
</li>
</ol>
<p>(2024-12-06)</p>
<ol start="2">
<li>
<p>SPI is a kind of CSI communication <sup><a class="link" href="#Spi-Rl78-r2" >r2-G23</a></sup></p>
</li>
<li>
<p><code>Transmit/receive</code> is analogous to the <code>SPI.transfer16()</code> in Arduino:
Read 1 byte from the bus and <strong>at the same time</strong> send 1 byte to the bus.</p>
</li>
</ol>
<hr>
<h3 id="sample-code">Sample Code
</h3><p>(2024-12-09)</p>
<ol>
<li>
<p>Open the sample project after downloading it <sup><a class="link" href="#Spi-Rl78-r4" >r4-Code</a></sup></p>
<ul>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p>Install more packages</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/F24-SPI-Sample_Code-01-E2_Studio_Cannot_Open_Proj-2024-12-09_093708.png"
	width="583"
	height="427"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="136"
		data-flex-basis="327px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/F24-SPI-Sample_Code-02-E2_Studio_Cannot_Install_CC_RL-2024-12-09_094006.png"
	width="503"
	height="257"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="195"
		data-flex-basis="469px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/F24-SPI-Sample_Code-03-E2_Studio_Install_CC_RL-2024-12-09_095735.png"
	width="972"
	height="745"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="130"
		data-flex-basis="313px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/F24-SPI-Sample_Code-04-E2_Studio_Install_Packages-2024-12-09_103018.png"
	width="972"
	height="1030"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="94"
		data-flex-basis="226px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/F24-SPI-Sample_Code-05-E2_Studio_Install_GCC_For_RL78-2024-12-09_103244.png"
	width="582"
	height="482"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="120"
		data-flex-basis="289px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/F24-SPI-Sample_Code-06-E2_Studio_Install_LLVM_For_RL78-2024-12-09_104118.png"
	width="582"
	height="482"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="120"
		data-flex-basis="289px"
	
></p>
</li>
<li>
<p>installing CC-RL may require license manager
<sup><a class="link" href="#Spi-Rl78-r5" >r5-Linux</a></sup></p>
</li>
</ol>
</li>
<li>
<p><strong>Results</strong>:</p>
<ol>
<li>
<p>Those packages are <strong>not needed</strong>, at least don&rsquo;t help to open the sample project.</p>
<p>Those packages do not include the required CC-RL compiler.</p>
</li>
</ol>
</li>
</ul>
</li>
<li>
<p>Use <strong>IAR</strong>, where the company has <strong>valid license</strong> manager.</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/F24-SPI-Sample_Code-08-IAR_Requires_License_Manager-2024-12-09_113234.png"
	width="777"
	height="357"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="217"
		data-flex-basis="522px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/F24-SPI-Sample_Code-07-IAR_License_Manager-2024-12-09_111331.png"
	width="777"
	height="357"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="217"
		data-flex-basis="522px"
	
></p>
<ul>
<li>
<p>BTW, <strong>CS+</strong> can build the project:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/F24-SPI-Sample_Code-09-CS_Can_Build-2024-12-09_112543.png"
	width="1325"
	height="908"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="145"
		data-flex-basis="350px"
	
></p>
</li>
</ul>
</li>
<li>
<p>Config the <strong>SPI for F24</strong> based on the sample <code>.smcg</code> file</p>
<ul>
<li>
<p><strong>Reasons</strong>:</p>
<ol>
<li>The .smcg file in the sample code can be opened with Smart Configuartor.</li>
</ol>
</li>
</ul>
</li>
<li>
<p>The LEDs are used as <strong>indicators</strong>, the code is <strong>not controlling</strong> LEDs.
See ch 1.5 for objectives description.</p>
<p><a class="link" href="https://www.renesas.com/en/document/sch/rl78g23-64p-fast-prototyping-board-schematics#page=2.00"  target="_blank" rel="noopener"
    >G23 Schematic</a></p>
</li>
<li>
<p>The <code>data_length</code> is <code>1</code> byte (8 bits).
And the array <code>uint8_t</code> is containing the <code>uint8_t</code> type.
So, 1 cell stores 1 data.</p>
<p>The function: <code>R_Config_CSI00_Send_Receive()</code> just sends 1 char, and receives 1 char.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// Lin #305
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">R_Config_CSI00_Send_Receive</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_tx_data</span><span class="p">,</span> <span class="n">data_length</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_rx_data</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>The interrupt: <code>INTCSI00</code> ?</p>
</li>
<li>
<p>The line #284: <code>g_num = g_rx_data_stored[0] &amp; 0x3F;</code></p>
</li>
<li>
<p>The <code>cnt-1</code> in the Line #252: <code>g_rx_data_stored[cnt-1] = g_rx_data</code></p>
</li>
<li>
<p>The <code>(0x80 &gt; g_rx_data_stored[0])</code> in line #255</p>
</li>
</ol>
<hr>
<h3 id="smp581">SMP581
</h3><p>(2024-12-08)</p>
<ol>
<li>
<p>Create Project</p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 264 217"
      >
      <g transform='translate(8,16)'>
<path d='M 0,0 L 232,0' fill='none' stroke='currentColor'></path>
<path d='M 0,48 L 32,48' fill='none' stroke='currentColor'></path>
<path d='M 32,48 L 72,48' fill='none' stroke='currentColor'></path>
<path d='M 72,48 L 112,48' fill='none' stroke='currentColor'></path>
<path d='M 112,48 L 208,48' fill='none' stroke='currentColor'></path>
<path d='M 208,48 L 232,48' fill='none' stroke='currentColor'></path>
<path d='M 0,144 L 32,144' fill='none' stroke='currentColor'></path>
<path d='M 32,144 L 72,144' fill='none' stroke='currentColor'></path>
<path d='M 72,144 L 112,144' fill='none' stroke='currentColor'></path>
<path d='M 112,144 L 160,144' fill='none' stroke='currentColor'></path>
<path d='M 176,144 L 208,144' fill='none' stroke='currentColor'></path>
<path d='M 208,144 L 248,144' fill='none' stroke='currentColor'></path>
<path d='M 0,192 L 160,192' fill='none' stroke='currentColor'></path>
<path d='M 176,192 L 248,192' fill='none' stroke='currentColor'></path>
<path d='M 0,0 L 0,48' fill='none' stroke='currentColor'></path>
<path d='M 0,144 L 0,192' fill='none' stroke='currentColor'></path>
<path d='M 32,48 L 32,80' fill='none' stroke='currentColor'></path>
<path d='M 32,128 L 32,144' fill='none' stroke='currentColor'></path>
<path d='M 72,48 L 72,80' fill='none' stroke='currentColor'></path>
<path d='M 72,128 L 72,144' fill='none' stroke='currentColor'></path>
<path d='M 112,48 L 112,80' fill='none' stroke='currentColor'></path>
<path d='M 112,128 L 112,144' fill='none' stroke='currentColor'></path>
<path d='M 160,144 L 160,192' fill='none' stroke='currentColor'></path>
<path d='M 176,144 L 176,192' fill='none' stroke='currentColor'></path>
<path d='M 208,48 L 208,80' fill='none' stroke='currentColor'></path>
<path d='M 208,128 L 208,144' fill='none' stroke='currentColor'></path>
<path d='M 232,0 L 232,48' fill='none' stroke='currentColor'></path>
<path d='M 248,144 L 248,192' fill='none' stroke='currentColor'></path>
<text text-anchor='middle' x='16' y='36' fill='currentColor' style='font-size:1em'>M</text>
<text text-anchor='middle' x='16' y='116' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='24' y='36' fill='currentColor' style='font-size:1em'>O</text>
<text text-anchor='middle' x='24' y='100' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='24' y='116' fill='currentColor' style='font-size:1em'>O</text>
<text text-anchor='middle' x='32' y='36' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='32' y='100' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='32' y='116' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='32' y='164' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='40' y='20' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='40' y='36' fill='currentColor' style='font-size:1em'>I</text>
<text text-anchor='middle' x='40' y='100' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='40' y='116' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='40' y='180' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='48' y='20' fill='currentColor' style='font-size:1em'>M</text>
<text text-anchor='middle' x='48' y='180' fill='currentColor' style='font-size:1em'>N</text>
<text text-anchor='middle' x='56' y='20' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='56' y='180' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='64' y='20' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='64' y='36' fill='currentColor' style='font-size:1em'>M</text>
<text text-anchor='middle' x='64' y='100' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='64' y='116' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='72' y='20' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='72' y='36' fill='currentColor' style='font-size:1em'>I</text>
<text text-anchor='middle' x='72' y='100' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='72' y='116' fill='currentColor' style='font-size:1em'>I</text>
<text text-anchor='middle' x='72' y='164' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='80' y='20' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='80' y='36' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='80' y='100' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='80' y='116' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='88' y='36' fill='currentColor' style='font-size:1em'>O</text>
<text text-anchor='middle' x='88' y='116' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='96' y='20' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='104' y='20' fill='currentColor' style='font-size:1em'>h</text>
<text text-anchor='middle' x='104' y='100' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='104' y='116' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='112' y='20' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='112' y='36' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='112' y='100' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='112' y='116' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='112' y='164' fill='currentColor' style='font-size:1em'>9</text>
<text text-anchor='middle' x='120' y='20' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='120' y='36' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='120' y='100' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='120' y='116' fill='currentColor' style='font-size:1em'>K</text>
<text text-anchor='middle' x='128' y='20' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='128' y='36' fill='currentColor' style='font-size:1em'>K</text>
<text text-anchor='middle' x='128' y='116' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='136' y='20' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='136' y='116' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='144' y='20' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='152' y='20' fill='currentColor' style='font-size:1em'>b</text>
<text text-anchor='middle' x='160' y='20' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='168' y='20' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='176' y='20' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='184' y='20' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='200' y='36' fill='currentColor' style='font-size:1em'>N</text>
<text text-anchor='middle' x='200' y='100' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='200' y='116' fill='currentColor' style='font-size:1em'>N</text>
<text text-anchor='middle' x='200' y='180' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='208' y='36' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='208' y='100' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='208' y='116' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='208' y='164' fill='currentColor' style='font-size:1em'>3</text>
<text text-anchor='middle' x='208' y='180' fill='currentColor' style='font-size:1em'>N</text>
<text text-anchor='middle' x='216' y='36' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='216' y='100' fill='currentColor' style='font-size:1em'>6</text>
<text text-anchor='middle' x='216' y='116' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='216' y='164' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='216' y='180' fill='currentColor' style='font-size:1em'>1</text>
</g>

    </svg>
  
</div>
</li>
<li>
<p>Configure The Components</p>
<ul>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p>Components</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>Components</th>
          <th>Resources</th>
          <th>Function</th>
          <th>Setting</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>SPI</td>
          <td>CSI00</td>
          <td>SCK00, SI00, SO00</td>
          <td></td>
      </tr>
      <tr>
          <td>Ports</td>
          <td>PORT6</td>
          <td>Chip selection</td>
          <td>P67: Output</td>
      </tr>
  </tbody>
</table></div>
<ul>
<li>If checking the option: <code>Output 1</code>, the LED is off initially
<sup><a class="link" href="#Spi-Rl78-r1" >r1-Tutorial</a></sup>.</li>
</ul>
</li>
<li>
<p>Sensor specifics:</p>
<ul>
<li>
<p>The sensor is of <strong>16 bits</strong>.</p>
</li>
<li>
<p>The <code>SPI_MODE1</code> of Arduino corresponds to the <code>Type 2</code> in RL78</p>
</li>
</ul>
</li>
</ol>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/SPI-First_Recv-01-CSI_Config-2024-12-12_165440.png"
	width="1552"
	height="1334"
	
	loading="lazy"
	
		alt="img: Config SPI"
	
	
		class="gallery-image" 
		data-flex-grow="116"
		data-flex-basis="279px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/SPI-First_Recv-02-Port_Config-2024-12-12_184905.png"
	width="1552"
	height="1290"
	
	loading="lazy"
	
		alt="img: Config Port"
	
	
		class="gallery-image" 
		data-flex-grow="120"
		data-flex-basis="288px"
	
></p>
</li>
</ul>
</li>
<li>
<p><strong>Add User Code and Run Project</strong></p>
<ol>
<li>
<p>Define the &ldquo;Chip Selection&rdquo; pin in <code>src\smc_gen\general\r_cg_userdefine.h</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#define CS1_pin P6_bit.no6
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>In another way, this pin can be called by assigning a symbolic name to it,
and then use <code>PIN_WRITE()</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// src/smc_gen/r_pincfg/Pin.h
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define MCU_Pressure_CS        6,3
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// src/hw/hw_smp581.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">PIN_WRITE</span><span class="p">(</span><span class="n">MCU_Pressure_CS</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p><strong>No response</strong> data received:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">uint16_t</span>  <span class="n">g_tx_data</span><span class="p">;</span>  <span class="cm">/* Send data buffer */</span>
</span></span><span class="line"><span class="cl"><span class="kt">uint16_t</span>  <span class="n">g_rx_data</span><span class="p">;</span>  <span class="cm">/* Receive data buffer */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="kt">uint16_t</span> <span class="n">data_length</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="kt">uint16_t</span> <span class="n">MODE</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span>     <span class="cm">/* Command code */</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="mi">0</span><span class="n">B0011000000000000</span><span class="p">,</span>  <span class="cm">/* Read pressure, Keep all errors */</span>
</span></span><span class="line"><span class="cl">  <span class="mi">0</span><span class="n">B0101000000000000</span><span class="p">,</span>  <span class="cm">/* Read temperature, Keep all errors */</span>
</span></span><span class="line"><span class="cl">  <span class="mi">0</span><span class="n">B1001000000000000</span><span class="p">,</span>  <span class="cm">/* Config &amp; Identi */</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nf">R_Config_CSI00_Start</span><span class="p">();</span>                 <span class="cm">/* Enable CSI00 module */</span>
</span></span><span class="line"><span class="cl">  <span class="n">CS1_pin</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>              <span class="cm">/* set CS1 active       */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">g_tx_data</span> <span class="o">=</span> <span class="n">MODE</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">while</span><span class="p">(</span><span class="mi">1U</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">R_Config_CSI00_Send_Receive</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_tx_data</span><span class="p">,</span> <span class="n">data_length</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_rx_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
</ol>
<hr>
<h4 id="no-received-data">No Received Data
</h4><p><strong>Problems</strong>:</p>
<p>(2024-12-10)</p>
<ul>
<li>A few examples <sup><a class="link" href="#Spi-Ex-r1" >r1-Forum</a></sup> indicated that calling SPI is easy.
But why I cannot receive data?</li>
</ul>
<hr>
<p><strong>References</strong>:</p>
<ol>
<li><a id="Spi-Ex-r1"></a>
<a class="link" href="https://community.renesas.com/mcu-mpu/rl78/f/rl78-forum/31102/rl78-g14-spi"  target="_blank" rel="noopener"
    >RL78/G14 SPI - Forum - RL78 MCU - Renesas Engineering Community</a>
<small>
<ul>
<li>Searched by <code>RL78 F24 SPI experiment</code> in
<a class="link" href="https://duckduckgo.com/?q=RL78&#43;F24&#43;SPI&#43;experiment&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Spi-Ses-r2"></a>
<a class="link" href="https://community.renesas.com/mcu-mpu/rl78/f/rl78-forum/29920/how-to-perform-spi-interface-in-renesas"  target="_blank" rel="noopener"
    >How to perform SPI interface in Renesas? - Forum - RL78 MCU - Renesas Engineering Community</a>
<small>
<ul>
<li>Searched by <code>RL78 F24 SPI experiment</code> in
<a class="link" href="https://duckduckgo.com/?q=RL78&#43;F24&#43;SPI&#43;experiment&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Spi-Ex-r3"></a>
<a class="link" href="https://www.renesas.com/en/document/apn/rl78g23-elcl-slave-select-pin-function-4-wire-spi#page=11"  target="_blank" rel="noopener"
    >RL78/G23 ELCL Slave Select Pin Function (for 4-wire SPI) Application Note Rev.2.00 (R01AN5614EJ0200)</a></li>
</ol>
<hr>
<p><strong>Practices</strong>:</p>
<p>(2024-12-10)</p>
<ol>
<li>
<p>Try to debug.</p>
<ul>
<li>
<p>The values passed to the arguments are not displayed</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/SPI-Debug-2024-12-10_162849.png"
	width="1920"
	height="1020"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="188"
		data-flex-basis="451px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/SPI-Debug-02-2024-12-10_163518.png"
	width="1920"
	height="1020"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="188"
		data-flex-basis="451px"
	
></p>
</li>
</ul>
</li>
</ol>
<p>(2024-12-12)</p>
<ol start="2">
<li>
<p>Take the <strong>Arduino code</strong> as an example</p>
<ul>
<li>
<p><strong>Results</strong>:</p>
<ol>
<li>The sensor works fine with Arduino</li>
</ol>
</li>
<li>
<p><strong>Analysis</strong>:</p>
<ol>
<li>
<p>MISO of the SMP581 should connect to MISO of MCU: <code>SO00</code> (Serial Output) of RL78/F24.</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/SPI-First_Recv-04-Wiring_CS-2024-12-12_192200.png"
	width="655"
	height="710"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="92"
		data-flex-basis="221px"
	
></p>
</li>
<li>
<p><strong>Stable power supply</strong> is necessary for the sensor to return correct values.
Both 5V and 3.3V can make SMP581 work correctly.</p>
<p>Otherwise, unstable voltage (from the sparkfun stick) won&rsquo;t enable
the SMP581 return data, <strong>only 0</strong>.</p>
</li>
</ol>
</li>
</ul>
</li>
<li>
<p>Use <strong>RL78/F24 to provide the CS</strong> signal.</p>
<ul>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>Keep the <code>CS1_pin</code> always low and connect it to SMP581.</li>
</ol>
</li>
<li>
<p><strong>Results</strong>:</p>
<ol>
<li>
<p><strong>Constant low</strong> voltage doesn&rsquo;t let the sensor return data.</p>
<p>If there is only <code>digitalWrite(ssPin, LOW);</code> without <code>digitalWrite(ssPin, HIGH);</code>,
no returned data:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Requesting Temperature Value and Diagnosis...
</span></span><span class="line"><span class="cl">Cmd has been transfered
</span></span><span class="line"><span class="cl">Data received: <span class="m">101000000000000</span>
</span></span><span class="line"><span class="cl">Diag bits rmvd: <span class="m">0</span>
</span></span><span class="line"><span class="cl">Number of LSB: <span class="m">0</span>
</span></span><span class="line"><span class="cl">Current temperature <span class="o">(</span>℃<span class="o">)</span>: 10530.32
</span></span><span class="line"><span class="cl">Requesting Pressure Value and Diagnosis...
</span></span><span class="line"><span class="cl">Cmd has been transfered
</span></span><span class="line"><span class="cl">Data received: <span class="m">101000000000000</span>
</span></span><span class="line"><span class="cl">Diag bits rmvd: <span class="m">0</span>
</span></span><span class="line"><span class="cl">Number of LSB: <span class="m">0</span>
</span></span><span class="line"><span class="cl">Current pressure <span class="o">(</span>kPa<span class="o">)</span>: 60.00
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
<li>
<p><strong>Analysis</strong>:</p>
<ol>
<li><strong>Delay is necessary</strong> for SMP581 to return, which is also mentioned in
<sup><a class="link" href="#Spi-Ses-r2" >r2-Forum</a></sup></li>
</ol>
</li>
</ul>
</li>
<li>
<p>Use a LED-blinking <code>INTTM00</code> of RL78/F24 to control the CS, and the MISO and MOSI are connected to Arduino</p>
<ul>
<li>
<p><strong>Results</strong>:</p>
<ol>
<li>Data received by Arduino is not correct.</li>
</ol>
</li>
<li>
<p><strong>Analysis</strong>:</p>
<ol>
<li>The CS pin turning on and off should be <strong>together with the data transfer</strong> function.</li>
</ol>
</li>
</ul>
</li>
<li>
<p>✅ Use syntex turning the <code>CS1_pin</code> <strong>ON and OFF</strong> to surround the data transfer function:</p>
<ul>
<li>
<p><strong>Reasons</strong>:</p>
<ol>
<li>To mimic the Arduino code.</li>
<li>Shown in the forum post <a class="link" href="#Spi-Ses-r2" >r2-Forum</a></li>
</ol>
</li>
<li>
<p><strong>Actions</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">delay</span><span class="p">(</span><span class="kt">long</span> <span class="n">d</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	   <span class="k">while</span><span class="p">(</span><span class="n">d</span><span class="o">--</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">EI</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nf">R_Config_CSI00_Start</span><span class="p">();</span>                 <span class="cm">/* Enable CSI00 module */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="mi">1U</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">CS1_pin</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>            <span class="cm">/* Select the sensor by pulling the pin down */</span>
</span></span><span class="line"><span class="cl">    	 <span class="n">g_tx_data</span> <span class="o">=</span> <span class="n">MODE</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    	 <span class="n">result</span> <span class="o">=</span> <span class="nf">R_Config_CSI00_Send_Receive</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_tx_data</span><span class="p">,</span> <span class="n">data_length</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_rx_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    	 <span class="nf">delay</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    	 <span class="n">CS1_pin</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>Results</strong>:</p>
<ol>
<li>
<p>The <code>g_rx_data</code> can keep changing (<code>21274</code> or <code>21270</code>):</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/SPI-First_Recv-03-Delay_And_Unselect_CS-2024-12-12_185537.png"
	width="1838"
	height="1380"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="133"
		data-flex-basis="319px"
	
></p>
</li>
<li>
<p>The converted physics values: Pressure (㎪) and temperature (℃) are similar to Arduino results.</p>
<p><a class="link" href="" >commit: 7ba9e25</a>
(<code>C:\Users\ZichenWang\e2_studio\workspace\F24-SPI-2024-12-09\F24_from_G23_Sample_Code</code>)</p>
</li>
</ol>
</li>
<li>
<p><strong>Analysis</strong>:</p>
<ol>
<li>TODO: Use interrupt when receiving data to read data instead of waiting for
a period of time using delay function,
as mentioned in <a class="link" href="#Spi-Ses-r2" >r2-Forum</a> and <a class="link" href="#Spi-Ex-r3" >r3-Manual</a>.</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<h4 id="do-not-use-delay">Do Not Use Delay
</h4><p><strong>Problems</strong>:</p>
<ol>
<li>
<p>The <code>main</code> function is a loop. The <code>delay()</code> will make the main loop wait there,
and cannot perform other services.</p>
<p>Therefore, a &ldquo;waiting state&rdquo; can be set in the state machine for a function.</p>
</li>
</ol>
<hr>
<p><strong>Notes</strong>:</p>
<p>(2024-12-23)</p>
<ol>
<li>
<p>The function is divided into 3 <strong>states</strong> by the &ldquo;delay&rdquo; state:</p>
<ul>
<li>
<p>The original function:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">bsp_spi_read_adc_smp581</span><span class="p">(</span><span class="kt">uint16_t</span><span class="o">*</span> <span class="n">tx_data_addr</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">data_length</span><span class="p">,</span> <span class="kt">uint16_t</span><span class="o">*</span> <span class="n">rx_data_addr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">CS1_pin</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>	<span class="cm">/* Chip selection */</span>
</span></span><span class="line"><span class="cl">	<span class="nf">R_Config_CSI00_Send_Receive</span><span class="p">(</span><span class="n">tx_data_addr</span><span class="p">,</span> <span class="n">data_length</span><span class="p">,</span> <span class="n">rx_data_addr</span><span class="p">);</span>	<span class="cm">/* The returned SPI data will be stored in rx_data*/</span>
</span></span><span class="line"><span class="cl">	<span class="nf">delay</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">CS1_pin</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Chip deselection*/</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Convert the function to a state machine:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">state</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="kt">uint32_t</span> <span class="n">start_time</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">bsp_spi_read_adc_smp581</span><span class="p">(</span><span class="kt">uint16_t</span><span class="o">*</span> <span class="n">tx_data_addr</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">data_length</span><span class="p">,</span> <span class="kt">uint16_t</span><span class="o">*</span> <span class="n">rx_data_addr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">switch</span> <span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="mi">0</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">			<span class="n">CS1_pin</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>	<span class="cm">/* Chip selection */</span>
</span></span><span class="line"><span class="cl">			<span class="nf">R_Config_CSI00_Send_Receive</span><span class="p">(</span><span class="n">tx_data_addr</span><span class="p">,</span> <span class="n">data_length</span><span class="p">,</span> <span class="n">rx_data_addr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="n">current_time</span> <span class="o">=</span> <span class="nf">service_get_1_ms</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">			<span class="n">state</span><span class="o">++</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">		<span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="mi">1</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="p">((</span><span class="nf">service_get_1_ms</span><span class="p">()</span><span class="o">-</span><span class="n">start_time</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="n">state</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">			<span class="n">CS1_pin</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Chip deselection*/</span>
</span></span><span class="line"><span class="cl">			<span class="n">state</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
</ol>
<hr>
<h4 id="single-cmd-caused-nc">Single Cmd Caused NC
</h4><p>(2024/01/04)</p>
<p><strong>Problems</strong>:</p>
<ol>
<li>
<p>When dubugging the project: F24-SPI-2024-12-09 (<code>8034804d</code>), the value keeps 100.xx unchanged.</p>
</li>
<li>
<p>The sensor works fine when connected to <strong>Arduino Nano</strong></p>
</li>
<li>
<p>The previous version before converting to layer-wise code seems to work fine.</p>
<ol>
<li>
<p>Image-1 shows the <strong>first</strong> pause at the breakpoint after <code>pressure_kpa</code> has been converted.</p>
</li>
<li>
<p>Image-2 shows the <strong>second</strong> pause. The pressure can be updated promptly without getting stuck.</p>
</li>
</ol>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/SPI-Debug_SMP581-01-All_Code_In_While_Loop-2025-01-05_093757.png"
	width="1902"
	height="1010"
	
	loading="lazy"
	
		alt="img-1"
	
	
		class="gallery-image" 
		data-flex-grow="188"
		data-flex-basis="451px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/SPI-Debug_SMP581-02-Step_Over_Can_Read-2025-01-05_095355.png"
	width="1902"
	height="1010"
	
	loading="lazy"
	
		alt="img-2"
	
	
		class="gallery-image" 
		data-flex-grow="188"
		data-flex-basis="451px"
	
></p>
</li>
</ol>
<p>(2025-01-08)</p>
<ol start="4">
<li>A single <code>main</code> function for F24 can get the updating pressure values,
but the layer-wise code get the pressure value unchanged: 100.130348 (21262).</li>
</ol>
<p>(2025-01-09)</p>
<ol start="5">
<li>
<p>Keep sending the pressure-request command only will cause the sensor not response.
The <code>pressure_kpa</code> remains <code>59.9989</code> unchanged, which is the same as the value that
the <strong>Arduino</strong> code printed, <strong>without connecting</strong> to the sensor.</p>
<ul>
<li>
<p>I found this problem because I initially want to change the &ldquo;<strong>workable</strong> version&rdquo; little by little
utill get to the &ldquo;layer-wise code&rdquo; version.</p>
<p>By doing this, I believe I can what step is problematic.
The first step I tried is <strong>removing the temperature reading</strong> part.
After doing that, the code appears the same problem: stucks at <code>59.9989</code>.</p>
</li>
<li>
<p>Sending the pressure-requesting command <strong>twice</strong> doesn&rsquo;t work either.</p>
</li>
<li>
<p>Even using <strong>different variables</strong> doesn&rsquo;t fix it.</p>
</li>
</ul>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/SPI-Debug_SMP581-03-Single_Cmd_Doesn%27t_Work-2025-01-09_155458.png"
	width="1524"
	height="1085"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="140"
		data-flex-basis="337px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/SPI-Debug_SMP581-04-Different_Variables-2025-01-09_161800.png"
	width="1526"
	height="1066"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="143"
		data-flex-basis="343px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/SPI-Debug_SMP581-05-Alternate_Command-2025-01-09_165601.png"
	width="1527"
	height="1084"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="140"
		data-flex-basis="338px"
	
></p>
</li>
</ol>
<hr>
<p><strong>References</strong>:</p>
<ol>
<li><a id=""></a>
<a class="link" href="" ></a></li>
</ol>
<hr>
<p><strong>Addressing</strong>:</p>
<p><del>1. Use UART to print values, rather watching values during debugging</del></p>
<p>(2024-01-09)</p>
<ol>
<li>Sending pressure-requesting and temperature-requesting commands <strong>together</strong></li>
</ol>
<hr>
<h4 id="value-keep-increasing">Value Keep Increasing
</h4><p><strong>Problems</strong>:</p>
<ol>
<li>The pressure value read from sensor only increases and never drops,
so the value after the first reading are not correct.</li>
</ol>
<p><strong>Issues</strong>:</p>
<ol>
<li><a class="link" href="#Spi-Pss-Iss1" >Check with Shuttleboard</a></li>
<li><a class="link" href="#Spi-Pss-Iss2" >Correct Timing</a></li>
<li><a class="link" href="#Spi-Pss-Iss3" >Test with SPI Interrupt</a></li>
</ol>
<hr>
<p><strong>Addressing</strong>:</p>
<p><a id="Spi-Pss-Iss1"></a></p>
<ol>
<li>
<p>Reproduce error by porting previous project of F24 - FPJ3A (&ldquo;F24-SPI-2024-12-09&rdquo;) testing the Shuttleboard.</p>
<ul>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p>Smart configurator only set 2 modules: SPI and Port (1 pin: P63)</p>
<p>Then copy the main function.</p>
<p>Add a breakpoint at the first sentence in the while loop: <code>P6_bit.no3 = 0;</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;r_smc_entry.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">uint16_t</span>  <span class="n">g_tx_data</span><span class="p">;</span>  <span class="cm">/* Send data buffer */</span>
</span></span><span class="line"><span class="cl"><span class="kt">uint16_t</span>  <span class="n">g_rx_data</span> <span class="o">=</span> <span class="mh">0xFFFFU</span><span class="p">;</span>  <span class="cm">/* Receive data buffer */</span>
</span></span><span class="line"><span class="cl"><span class="kt">uint16_t</span>  <span class="n">pressure_code_adc</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">uint16_t</span>  <span class="n">temperature_code_adc</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">float</span> <span class="n">pressure_kpa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">float</span> <span class="n">temperature_cel</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="kt">uint16_t</span> <span class="n">data_length</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="cm">/* 2 bytes */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="kt">uint16_t</span> <span class="n">MODE</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span>     <span class="cm">/* Command code */</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="mi">0</span><span class="n">B0011000000000000</span><span class="p">,</span>  <span class="cm">/* Read pressure, Keep all errors */</span>
</span></span><span class="line"><span class="cl">	<span class="mi">0</span><span class="n">B0101000000000000</span><span class="p">,</span>  <span class="cm">/* Read temperatur, Keep all errors */</span>
</span></span><span class="line"><span class="cl">	<span class="mi">0</span><span class="n">B1001000000000000</span><span class="p">,</span>  <span class="cm">/* Config &amp; Identi */</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">volatile</span> <span class="n">MD_STATUS</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">delay</span><span class="p">(</span><span class="kt">long</span> <span class="n">d</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="k">while</span><span class="p">(</span><span class="n">d</span><span class="o">--</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span> <span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">EI</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nf">R_Config_CSI00_Start</span><span class="p">();</span>                 <span class="cm">/* Enable CSI00 module */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="mi">1U</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    	<span class="cm">/* Read pressure from SMP581 */</span>
</span></span><span class="line"><span class="cl">    	<span class="n">P6_bit</span><span class="p">.</span><span class="n">no3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    	<span class="n">g_tx_data</span> <span class="o">=</span> <span class="n">MODE</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    	<span class="n">result</span> <span class="o">=</span> <span class="nf">R_Config_CSI00_Send_Receive</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_tx_data</span><span class="p">,</span> <span class="n">data_length</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_rx_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    	<span class="nf">delay</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    	<span class="n">P6_bit</span><span class="p">.</span><span class="n">no3</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    	<span class="n">pressure_code_adc</span> <span class="o">=</span> <span class="n">g_rx_data</span> <span class="o">&amp;</span> <span class="mh">0x0FFE</span><span class="p">;;</span>
</span></span><span class="line"><span class="cl">    	<span class="n">pressure_code_adc</span> <span class="o">=</span> <span class="n">pressure_code_adc</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    	<span class="n">pressure_kpa</span> <span class="o">=</span> <span class="p">(</span><span class="n">pressure_code_adc</span> <span class="o">+</span> <span class="mf">584.57</span><span class="p">)</span> <span class="o">/</span> <span class="mf">9.743</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    	<span class="cm">/* Read temperature from SMP581 */</span>
</span></span><span class="line"><span class="cl">    	<span class="n">P6_bit</span><span class="p">.</span><span class="n">no3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    	<span class="n">g_tx_data</span> <span class="o">=</span> <span class="n">MODE</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    	<span class="n">result</span> <span class="o">=</span> <span class="nf">R_Config_CSI00_Send_Receive</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_tx_data</span><span class="p">,</span> <span class="n">data_length</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_rx_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    	<span class="nf">delay</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    	<span class="n">P6_bit</span><span class="p">.</span><span class="n">no3</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    	<span class="n">temperature_code_adc</span> <span class="o">=</span> <span class="n">g_rx_data</span> <span class="o">&amp;</span> <span class="mh">0x0FFE</span><span class="p">;;</span>
</span></span><span class="line"><span class="cl">    	<span class="n">temperature_code_adc</span> <span class="o">=</span> <span class="n">temperature_code_adc</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    	<span class="n">temperature_cel</span> <span class="o">=</span> <span class="p">(</span><span class="n">temperature_code_adc</span> <span class="o">-</span> <span class="mi">248</span><span class="p">)</span> <span class="o">/</span> <span class="mf">6.2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    	<span class="nf">NOP</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
<li>
<p><strong>Results</strong>:</p>
<ol>
<li>
<p>Although the pressure returned from the inidividual sensor on the Shuttleboard may be not accurate,
the value <strong>maintains around</strong> 102 kPa.
However, the values of sensor on E41 board <strong>grows gradually</strong>.</p>
<p>It maybe only record the history highest value.</p>
</li>
<li>
<p>Even redownloding the code to MCU, the variable shown in the Watch windows <strong>keeps last value</strong>!
(<small>Redownloading is because I accidentally pressed F6 beside F5.</small>)</p>
</li>
<li>
<p>I also tested: Resetting the value of <code>g_rx_data</code> to 0 after each reading.
But the <code>g_rx_data</code> always still keeps grow, instead of oscillating around the normal atm pressure.</p>
</li>
</ol>
</li>
<li>
<p><strong>Analysis</strong>:</p>
<ol>
<li>
<p>I guess this could be hardware problem. The register inside the sensor could never be reset after each reading.</p>
<blockquote>
<p>I think this is not a software issue, as the same code works correctly with the individual SMP581 sensor.
I suspect the reason may be that some buffer inside the sensor may not be reset after each reading,
because during my debugging, when I redownload the program, the sensor returns the value from the previous debugging session.</p></blockquote>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<p><a id="Spi-Pss-Iss2"></a></p>
<p>(2025-02-11)</p>
<ol start="2">
<li>
<p>Correct Timing</p>
<ul>
<li>
<p><strong>Reasons</strong>:</p>
<ol>
<li>The technical support suspected the timing is problematic.</li>
</ol>
</li>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p>Determine the timing through oscilloscope.</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/Pressure_Sensor-SMP581-Timing_Update-Oscilloscope-SDS00001.jpg"
	width="800"
	height="480"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="166"
		data-flex-basis="400px"
	
></p>
</li>
<li>
<p>Adjust the timing</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="nf">PIN_WRITE</span><span class="p">(</span><span class="n">CS_PIN</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nf">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">g_tx_data</span> <span class="o">=</span> <span class="n">MODE</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="nf">R_Config_CSI00_Send_Receive</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_tx_data</span><span class="p">,</span> <span class="n">data_length</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_rx_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nf">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nf">PIN_WRITE</span><span class="p">(</span><span class="n">CS_PIN</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/writenotes/embed/b-test-rl78_beginner/Pressure_Sensor-SMP581-Timing_Update-2025-02-12_112353.png"
	width="616"
	height="259"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="237"
		data-flex-basis="570px"
	
></p>
<ul>
<li>I think using interrupt is a better way.</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<p><a id="Spi-Pss-Iss3"></a></p>
<p>(2025-02-12)</p>
<ol start="3">
<li>
<p>Test the SPI interrupt function</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// main.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">uint8_t</span>  <span class="n">g_tx_data</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>  		<span class="cm">/* Send data buffer */</span>
</span></span><span class="line"><span class="cl"><span class="kt">uint8_t</span>  <span class="n">g_rx_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0xFFU</span><span class="p">;</span>  <span class="cm">/* Receive data buffer */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">uint16_t</span>  <span class="n">pressure_code_adc</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">float</span> <span class="n">pressure_kpa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="kt">uint16_t</span> <span class="n">data_length</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="kt">uint8_t</span> <span class="n">TX_DATA</span><span class="p">[]</span> <span class="o">=</span>     <span class="cm">/* Command code */</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	 <span class="mi">0</span><span class="n">B00110000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	 <span class="mi">0</span><span class="n">B00000000</span><span class="p">,</span>  <span class="cm">/* Read pressure, Keep all errors */</span>
</span></span><span class="line"><span class="cl">	 <span class="mi">0</span><span class="n">B01010000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	 <span class="mi">0</span><span class="n">B00000000</span><span class="p">,</span>  <span class="cm">/* Read temperatur, Keep all errors */</span>
</span></span><span class="line"><span class="cl">	 <span class="mi">0</span><span class="n">B10010000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	 <span class="mi">0</span><span class="n">B00000000</span><span class="p">,</span>  <span class="cm">/* Config &amp; Identi */</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">volatile</span> <span class="n">MD_STATUS</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">delay</span><span class="p">(</span><span class="kt">long</span> <span class="n">d</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	 <span class="k">while</span><span class="p">(</span><span class="n">d</span><span class="o">--</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nf">R_Config_TAU0_3_Higher8bits_Start</span><span class="p">();</span> <span class="cm">/* 1ms interval timer start */</span>
</span></span><span class="line"><span class="cl">  <span class="nf">R_Config_CSI00_Start</span><span class="p">();</span>              <span class="cm">/* Enable CSI00 module */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">while</span><span class="p">(</span><span class="mi">1U</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* Wait for 1 ms */</span>
</span></span><span class="line"><span class="cl">    <span class="nf">DI</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="n">TMIF03H</span> <span class="o">==</span> <span class="mi">0U</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nf">HALT</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">TMIF03H</span> <span class="o">=</span> <span class="mi">0U</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* Issue Chip Select Signal */</span>
</span></span><span class="line"><span class="cl">    <span class="n">P6_bit</span><span class="p">.</span><span class="n">no3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* Read pressure from SMP581 */</span>
</span></span><span class="line"><span class="cl">    <span class="nf">EI</span><span class="p">();</span>	<span class="c1">// Enable lower interval 16 us?
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">result</span> <span class="o">=</span> <span class="nf">R_Config_CSI00_Send_Receive</span><span class="p">(</span><span class="o">&amp;</span><span class="n">TX_DATA</span><span class="p">,</span> <span class="n">data_length</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_rx_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">HALT</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nf">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>     <span class="c1">// I found this delay is necessary
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">P6_bit</span><span class="p">.</span><span class="n">no3</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">pressure_code_adc</span> <span class="o">=</span> <span class="p">((</span><span class="n">g_rx_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x07</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">)</span> <span class="o">|</span> <span class="p">((</span><span class="n">g_rx_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x7F</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">pressure_kpa</span> <span class="o">=</span> <span class="p">(</span><span class="n">pressure_code_adc</span> <span class="o">+</span> <span class="mf">584.57</span><span class="p">)</span> <span class="o">/</span> <span class="mf">9.743</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">NOP</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<hr>
<h4 id="parse-diagnostic-bits">Parse Diagnostic Bits
</h4><p><strong>Problems</strong>:</p>
<ol>
<li>Implement the diagnostic function for the pressure sensor SMP581</li>
</ol>
<hr>
<p><strong>Addressing</strong>:</p>
<p>(2025/03/31)</p>
<ol>
<li>
<p>Ask <a class="link" href="https://chat.deepseek.com/a/chat/s/5fe6ef50-411c-4928-b6c5-358ace10e0ec"  target="_blank" rel="noopener"
    >DeepSeek</a>
to generate code based on provided information</p>
<ul>
<li>
<p><strong>Reasons</strong>:</p>
<ol>
<li>I don&rsquo;t use windsurf as I need to remove the words: SMP581 from the source code.
The datasheet of SMP581 is not public.</li>
</ol>
</li>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p>Feed the related information in documentation along with the current <code>service</code></p>
<blockquote>
<p>6.3.2.2 Definition of the Bit Stream Coming from the sensor</p>
<p>Slave Response Variant1 16 bits:
Diagnostic bits (bit 15 – 11): These 5 bits transmit the diagnostic information of the sensor and reflect possible failures of the sensor.
Data bits (bit 10 – 1): These 10 data bits contain the value (pressure / temperature) requested by the master.
Parity (bit 0): The slave response is safeguarded by an odd parity over bits 15 to 1.
Even (including 0) will lead to a 1, odd will lead to a 0.</p>
<p>6.3.2.3 Diagnostic Bits</p>
<p>In 16 bit SPI mode, the sensor transmits diagnostic information via diagnosis bits Diag0&hellip;4 (bits 11&hellip;15)
when answering master requests for pressure/diagnosis or temperature/diagnosis.
The sensor recognizes errors and transmits diagnostic codes given in the table below.
In case of multiple errors, the sensor sends the failure with the highest priority.
In case of an error, the sensor continues to send pressure and temperature values.</p>
<p>Diagnosis code</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>Failure</th>
          <th>Detection</th>
          <th>Priority (1= highest)</th>
          <th>D15</th>
          <th>D14</th>
          <th>D13</th>
          <th>D12</th>
          <th>D11</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Sensor memory error</td>
          <td>OTP: At start up, RAM: Continuous</td>
          <td>1</td>
          <td>1</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
      </tr>
      <tr>
          <td>Acquisition chain failure</td>
          <td>At start up</td>
          <td>2</td>
          <td>0</td>
          <td>1</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
      </tr>
      <tr>
          <td>Pressure sensing element failure*</td>
          <td>At start up/ Continuous</td>
          <td>3</td>
          <td>0</td>
          <td>0</td>
          <td>1</td>
          <td>0</td>
          <td>0</td>
      </tr>
      <tr>
          <td>ADC’s upper limit</td>
          <td>Continuous</td>
          <td>4</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>1</td>
          <td>0</td>
      </tr>
      <tr>
          <td>ADC’s lower limit</td>
          <td>Continuous</td>
          <td>5</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>0</td>
          <td>1</td>
      </tr>
      <tr>
          <td>No error</td>
          <td>Continuous</td>
          <td>6</td>
          <td>0</td>
          <td>1</td>
          <td>0</td>
          <td>1</td>
          <td>0</td>
      </tr>
  </tbody>
</table></div>
<ul>
<li>Pressure sensing element failure - bond failure of pressure signal monitored only at Startup. Bond failure of sensing element supply and temperature-diode monitored continuously.</li>
</ul>
<p>In addition to the diagnosis codes above, the sensor recognizes communication errors. Communication errors are:
• The usage of an invalid command</p>
<p>• Communication cycles with the number of clock cycles during NCS low (active) being not equal to a multiple (including 0) of 16.</p>
<p>The sensor then responds with &ldquo;0b0000 0000 0000 0001&rdquo; in the next communication cycle.</p></blockquote>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<h2 id="lin-blink-led">LIN Blink LED
</h2><p><strong>Problems</strong>:</p>
<ol>
<li>
<p>I need to implement LIN communication.
Usually, in a LIN network, there is a single Master and multiple slaves.</p>
<p>However, I currently have only one RL78/F24 board.
Also, I don&rsquo;t have Babylin or other emulators to simulate the host computer.</p>
<p>So, I plan to test the communication between PC and the target board
via the UART and LIN protocol base on documents <sup><a class="link" href="#Uart-Rlin-r2" >r2-SIS</a></sup>.</p>
</li>
<li>
<p>If it&rsquo;s possible to let the F24 be a master <sup><a class="link" href="#Uart-Rlin-r1" >r1-Master</a></sup>, sending frames,
which ask the UART to transmit something?</p>
<ul>
<li>
<p>F24 has <strong>2 LIN channels</strong>! which be separately set as a master and a slave.</p>
<p>But how to write code for <strong>different channels</strong> on a single MCU?</p>
</li>
</ul>
</li>
<li>
<p>How to call <strong>RLIN api</strong>?</p>
</li>
</ol>
<p>(2024-12-03)</p>
<ol start="4">
<li>Simple project: Master channel send a commend to the slave channel to perform the behavior: blinking the LED.</li>
</ol>
<hr>
<h3 id="create-e2-studio-project">Create E2 Studio Project
</h3><p><strong>References</strong>:</p>
<ol>
<li><a id="Uart-Rlin-r1"></a>
<a class="link" href="https://www.renesas.com/en/document/apn/rl78f13-f14-group-lin-slave-mode-rlin3-rev102"  target="_blank" rel="noopener"
    >RL78/F13, F14 Group LIN Slave Mode (RLIN3) Rev.1.02</a>
<small>
<ul>
<li>Shared by Joseph</li>
<li>I think he found it by searching <code>F13 RLIN</code> in <a id="Uart-Rlin-s1"></a>
Renesas <a class="link" href="https://www.renesas.com/en/search?keywords=F13%20RLIN"  target="_blank" rel="noopener"
    >Search page</a>
</small></li>
</ul>
</li>
<li><a id="Uart-Rlin-r2"></a>
<a class="link" href="https://www.renesas.com/en/document/apn/rl78f2x-rlin3-module-software-integration-system"  target="_blank" rel="noopener"
    >RL78/F2x RLIN3 Module Software Integration System Rev.1.00</a>
<small>
<ul>
<li>Searched by <code>F23 RLIN</code> in
Renesas <a class="link" href="https://www.renesas.com/en/search?keywords=F23%20RLIN"  target="_blank" rel="noopener"
    >Searche page</a>
</small></li>
</ul>
</li>
<li><a id="Lin-Led-r3"></a>
<a class="link" href="https://youtu.be/IseZdz85NNw?si=FWO4QDf2LJjvgJtx"  target="_blank" rel="noopener"
    >How to Create a LIN Project with Smart Configurator on e² studio - YouTube - RenesasPresents</a></li>
<li><a id="Rlin-Proj-r4"></a>
<a class="link" href="https://www.renesas.com/en/document/apn/rl78f2x-rlin3-module-software-integration-system?r=1552481#page=27.10"  target="_blank" rel="noopener"
    >Chapter 5 - How to Build LIN Application | RLIN3 Module Software Integration System</a></li>
</ol>
<hr>
<h4 id="smart-configurator">Smart Configurator
</h4><p><strong>Notes</strong>:</p>
<p>(2024-12-04)</p>
<ol>
<li>
<p><strong>Create an e2 studio project</strong> <sup><a class="link" href="#Lin-Led-r3" >r3-YouTube</a></sup>:</p>
<ul>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p>File &gt; <strong>New</strong> &gt; Renesas C/C++ Project &gt; Renesas RL78</p>
<ul>
<li>
<p>&ldquo;Renesas CC-RL C/C++ Executable Project&rdquo;</p>
</li>
<li>
<p>Project Name: F24_Two_LIN_Channels_Blinking_LED</p>
</li>
<li>
<p>Target board: RL78 - F24 100pin &gt; R7F124FPJ3xFB;</p>
<p>Create Hardware Debug Configuration: E2 Lite (RL78)</p>
</li>
</ul>
</li>
<li>
<p>Use <strong>Smart Configurator</strong></p>
<ul>
<li>
<p>Clocks &gt; <code>Base frequency</code>: 40 MHz &gt; <code>High-speed on-chip oscillator</code>: 40 MHz &gt; Check <code>LIN0 clock</code> and <code>LIN1 clock</code></p>
</li>
<li>
<p>Components &gt; <code>r_bsp</code> &gt; Enable: StartClock, Set~, Change~,</p>
</li>
<li>
<p>Add Components &gt; rlin3</p>
</li>
<li>
<p><code>r_riln3</code> &gt; <code>RLIN3 channel0 setting</code> &gt;</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-01-Smcg_LIN_2_channels-2024-12-04_124412.png"
	width="1703"
	height="1380"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="123"
		data-flex-basis="296px"
	
></p>
</li>
<li>
<p>Add Components &gt; Interval Timer &gt; 16 bit count mode (Resource: <strong>TAU0_1</strong>) &gt;</p>
<p>Operation clock: CK00; Clock source: fCLK/2^8;
Interval value: 30 ms</p>
<ul>
<li>The master requires schedule implemented based on a timer <sup><a class="link" href="#Uart-Rlin-r2" >r2-RLIN3 p39</a></sup>.</li>
</ul>
</li>
<li>
<p>Add Components &gt; Ports &gt; PORT6</p>
<p>P66 &gt; Out &gt; Output 1</p>
</li>
<li>
<p>Add Components &gt; Interval Timer &gt; 16 bit count mode &gt; TAU0_0</p>
<p>Operation clock: CK00; Clock source: fCLK/2^8;
Interval value: 400ms
Interrupt setting check: End of timer channel 0 count, generate an interrupt (INTTM00)</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-02-Smcg_Config_TAU0_0-2024-12-04_130807.png"
	width="1705"
	height="652"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="261"
		data-flex-basis="627px"
	
></p>
</li>
<li>
<p>A change pops when generating code:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-02.05-Smcg_Gen_Code_Warn-2024-12-04_190023.png"
	width="582"
	height="393"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="148"
		data-flex-basis="355px"
	
></p>
</li>
<li>
<p><strong>Copy</strong> the Smcg generated lib: <code>r_rlin3_lib</code> to under the <code>src/</code>.</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-03-Smcg_Copy_Lin_Lib-2024-12-04_131916.png"
	width="752"
	height="1380"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="54"
		data-flex-basis="130px"
	
></p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<h4 id="lin-configurator">LIN Configurator
</h4><ul>
<li>
<p><strong>Actions</strong>:</p>
<ol start="3">
<li>
<p>Use <strong>LIN Configurator for RL78/F23_F24</strong> to setup LDF:</p>
<ul>
<li>
<p>Set Baud rate for both channels to 19200</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-15-LIN_Configurator-Gen_Code-2024-12-04_154915.png"
	width="572"
	height="640"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="89"
		data-flex-basis="214px"
	
></p>
</li>
<li>
<p>Set an unconditional frame for the Master: channel0</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-04-LIN_Configurator-Frame_Master-2024-12-04_140831.png"
	width="1194"
	height="927"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="128"
		data-flex-basis="309px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-05-LIN_Configurator-Signal_Master-2024-12-04_141420.png"
	width="783"
	height="556"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="140"
		data-flex-basis="337px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-07-LIN_Configurator-Frame1_Master-2024-12-04_142149.png"
	width="1193"
	height="927"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="128"
		data-flex-basis="308px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-06-LIN_Configurator-Signal1_Master-2024-12-04_142002.png"
	width="784"
	height="556"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="141"
		data-flex-basis="338px"
	
></p>
</li>
<li>
<p>Set schedule for the Master channel: Transmit these two frames repeatedly</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-08-LIN_Configurator-Schedule0_Master-2024-12-04_142442.png"
	width="1223"
	height="776"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="157"
		data-flex-basis="378px"
	
></p>
</li>
<li>
<p>Set frames for <strong>Slave</strong>: Channel1, <strong>Publishing</strong> responses</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-10-LIN_Configurator-Frame0_Slave-2024-12-04_144713.png"
	width="1193"
	height="927"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="128"
		data-flex-basis="308px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-09-LIN_Configurator-Signal_Slave-2024-12-04_144502.png"
	width="783"
	height="556"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="140"
		data-flex-basis="337px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-12-LIN_Configurator-Frame1_Slave-2024-12-04_150601.png"
	width="1193"
	height="927"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="128"
		data-flex-basis="308px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-11-LIN_Configurator-Signal1_Slave-2024-12-04_150231.png"
	width="783"
	height="556"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="140"
		data-flex-basis="337px"
	
></p>
</li>
<li>
<p>Both frame published by the slave required an <code>Response_Error_Signal</code></p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-14-LIN_Configurator-Signal_Err0_Slave-2024-12-04_154412.png"
	width="783"
	height="556"
	
	loading="lazy"
	
		alt="img: Error sig for Frm0"
	
	
		class="gallery-image" 
		data-flex-grow="140"
		data-flex-basis="337px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-13-LIN_Configurator-Signal_Err_Slave-2024-12-04_153001.png"
	width="783"
	height="556"
	
	loading="lazy"
	
		alt="img: Error sig for Frm1"
	
	
		class="gallery-image" 
		data-flex-grow="140"
		data-flex-basis="337px"
	
></p>
</li>
<li>
<p><strong>Save</strong> LIN Configurator project beside the <code>src/</code></p>
</li>
<li>
<p><strong>Generate</strong> the driver source code into <code>src/r_riln3_lib/</code></p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-16-LIN_Configurator-Gen_Code_Dir-2024-12-04_155148.png"
	width="597"
	height="621"
	
	loading="lazy"
	
		alt="img: Dir"
	
	
		class="gallery-image" 
		data-flex-grow="96"
		data-flex-basis="230px"
	
></p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h4 id="cs-builds-library">CS+ Builds Library
</h4><ul>
<li>
<p><strong>Actions</strong>:</p>
<ol start="4">
<li>
<p>Use <strong>CS+</strong> to compile the driver source files:</p>
<ul>
<li>
<p>Open the generated <code>.mtpj</code> project file. Each channel (Mater &amp; Slave) has their own project:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-17-CS&#43;_Open_Proj-2024-12-04_155959.png"
	width="986"
	height="913"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="107"
		data-flex-basis="259px"
	
></p>
</li>
<li>
<p>Build the CS+ project separately:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-18-CS&#43;_Build_Proj-2024-12-04_161122.png"
	width="1710"
	height="908"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="188"
		data-flex-basis="451px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-20-CS&#43;_Build_Proj_Slave-2024-12-04_163749.png"
	width="1710"
	height="908"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="188"
		data-flex-basis="451px"
	
></p>
</li>
<li>
<p>Library file <code>liblin21s_CCRL_0.lib</code> is generated
<sup><a class="link" href="#Rlin-Proj-r4" >r4-Ch5</a></sup>.</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h4 id="e2-studio-compiler">E2 Studio Compiler
</h4><ul>
<li>
<p><strong>Actions</strong>:</p>
<ol start="5">
<li>
<p>Go back the e2 Studio to <strong>configure the compiler</strong>: Include the LIN library.</p>
<ol>
<li>
<p>Open Building properties, encountering an error: <code>No property pages</code></p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-19-E2-Config_Compiler-2024-12-04_162914.png"
	width="756"
	height="1120"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="67"
		data-flex-basis="162px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-21-E2-No_Properties_Pages-2024-12-04_165525.png"
	width="846"
	height="208"
	
	loading="lazy"
	
		alt="img: Cannot open"
	
	
		class="gallery-image" 
		data-flex-grow="406"
		data-flex-basis="976px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-22-E2-No_Properties_Pages_2_Proj-2024-12-04_165949.png"
	width="2560"
	height="1380"
	
	loading="lazy"
	
		alt="img: 2 proj"
	
	
		class="gallery-image" 
		data-flex-grow="185"
		data-flex-basis="445px"
	
></p>
<ul>
<li>
<p><del>Maybe e2 studio should keep open, while I close it before.</del></p>
</li>
<li>
<p>I generated the code <strong>again</strong>:</p>
<ol>
<li>Smcg generates code, and <strong>copy</strong> <code>r_rlin3_lib</code> to /src;</li>
<li>LIN Configurator generates code into <code>src/r_rlin3_lib</code></li>
<li>CS+ builds project.</li>
</ol>
<p>Then, the e2 studio&rsquo;s <code>File</code> &gt; <code>Properties</code> can be opened.</p>
</li>
</ul>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-23-E2-File_Properties-2024-12-04_193418.png"
	width="1286"
	height="604"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="212"
		data-flex-basis="510px"
	
></p>
</li>
<li>
<p>Add files: Relocatable files, object files, and library file setting</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-24-E2-Setup_Linker-2024-12-04_193418.png"
	width="1287"
	height="967"
	
	loading="lazy"
	
		alt="img: Setup Linker"
	
	
		class="gallery-image" 
		data-flex-grow="133"
		data-flex-basis="319px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-25-E2-Compiler_Add_Lib-2024-12-04_194344.png"
	width="1108"
	height="445"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="248"
		data-flex-basis="597px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-26-E2-Compiler_Not_Build_Now-2024-12-04_194637.png"
	width="807"
	height="262"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="308"
		data-flex-basis="739px"
	
></p>
</li>
<li>
<p><strong>Exclude the &ldquo;Driver source code&rdquo;</strong> generated by the LIN Configurator from building process.</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-27-E2-Exculde_Driver_Source_Code-2024-12-04_195103.png"
	width="950"
	height="1089"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="87"
		data-flex-basis="209px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-28-E2-Exclude_From_HardwareDebug-2024-12-04_200046.png"
	width="797"
	height="597"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="133"
		data-flex-basis="320px"
	
></p>
</li>
<li>
<p><strong>Add source files</strong>: <code>drv/conf/</code> to Compiler</p>
<ul>
<li>
<p>The <code>File</code> &gt; <code>Properties</code> dosen&rsquo;t appear again.</p>
</li>
<li>
<p>After I canceled the excluding (un-check the &ldquo;HardwareDebug&rdquo; option),
the <code>File</code> &gt; <code>Properties</code> still doesn&rsquo;t show up.</p>
</li>
<li>
<p>I re-generate the codes, but this time the properties <strong>missed many options</strong>:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-29-E2-Blank_Properties-2024-12-04_203035.png"
	width="1002"
	height="815"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="122"
		data-flex-basis="295px"
	
></p>
</li>
<li>
<p>After clicking the Refresh, the properties are restored,
but the Linker disappeared:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-30-E2-Refresh_To_See_Properties_2024-12-04_210220.png"
	width="609"
	height="1091"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="55"
		data-flex-basis="133px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-31-E2-Linker_Options_Disappeared_2024-12-04_211159.png"
	width="1215"
	height="815"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="357px"
	
></p>
</li>
<li>
<p>I closed the E2 studio, and reopen it, the <code>File</code> &gt; <code>Properties</code> can show up,
although the &ldquo;No property pages&rdquo; pops again at first.
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-32-E2-Reopen_No_Pages_At_First_2024-12-04_212149.png"
	width="1046"
	height="1116"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="93"
		data-flex-basis="224px"
	
></p>
<p>I have to <strong>select the project name</strong>!
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-34-E2-Select_Project_Name_After_Reopen-2024-12-04_213922.png"
	width="1551"
	height="1116"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="138"
		data-flex-basis="333px"
	
></p>
<p>As I gradually <strong>Unfold</strong> the project level-by-level,
the available properties are loaded gradually.</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-35-E2-Add_Source_Dirs-2024-12-04_214343.png"
	width="1875"
	height="1117"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="167"
		data-flex-basis="402px"
	
></p>
<p>After I unfold the project folder, those properties disappeared again:
<del>It seems that I have to <strong>Select</strong> the .smcg file to load settings.</del></p>
<p>(<strong>Note</strong>: here, I have <strong>excluded</strong> those driver source code.)</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-33-E2-Select_Smcg_File_Blank_Options_2024-12-04_213053.png"
	width="1286"
	height="1119"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="114"
		data-flex-basis="275px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-36-E2-Add_Source_Dirs_Conf-2024-12-04_215103.png"
	width="786"
	height="332"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="236"
		data-flex-basis="568px"
	
></p>
</li>
</ul>
</li>
<li>
<p>Add Macro Definition: <code>__LIN_CH0_P1__</code></p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-37-E2-Add_Macro_Definition-2024-12-04_215338.png"
	width="1245"
	height="877"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="141"
		data-flex-basis="340px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-38-E2-Add_Macro_Definition_P1-2024-12-04_215907.png"
	width="787"
	height="293"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="268"
		data-flex-basis="644px"
	
></p>
</li>
<li>
<p>Memory Small model</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-39-E2-Compiler_Object_Small_Model-2024-12-04_220211.png"
	width="1611"
	height="637"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="252"
		data-flex-basis="606px"
	
></p>
</li>
<li>
<p>Re-Build Project:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-40-E2-Rebuild_Project_After_Setting_Compiler-2024-12-04_220634.png"
	width="1107"
	height="1120"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="98"
		data-flex-basis="237px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-41-E2-Rebuild_Succeed-2024-12-04_220935.png"
	width="1107"
	height="1337"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="82"
		data-flex-basis="198px"
	
></p>
</li>
</ol>
</li>
<li>
<p>Use <strong>e2 Studio</strong> to configure the compiler for slave (Channel1)</p>
<ol>
<li>
<p><del><strong>Fold</strong> the Project and</del> Make the project name <strong>selected</strong>. Or just <strong>Right click</strong> on the project name.</p>
</li>
<li>
<p>File &gt; Properties &gt; C/C++ Build: Settings &gt; Linker &gt; Input &gt; Add <code>liblin21s_CCRL_1.lib</code> (built by CS+)</p>
</li>
<li>
<p>Add source dir: Settings &gt; Compiler &gt; Source &gt; Add <code>src/r_rlin3_lib/r_lin_drv/Channel1/conf/</code></p>
</li>
<li>
<p>Add Macro definition: <code>__LIN_CH1_P1_ </code>
<sup><a class="link" href="#Uart-Rlin-r2" >r2-Docs p29</a></sup></p>
</li>
<li>
<p>Right click on the project &gt; <code>Build Project</code></p>
</li>
</ol>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/03_05-F24_LIN_Blink_Led-41-E2-Build_Slave_Channel1-2024-12-04_235802.png"
	width="1107"
	height="1380"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="80"
		data-flex-basis="192px"
	
></p>
</li>
</ol>
</li>
</ul>
<hr>
<h3 id="add-user-code">Add User Code
</h3><h4 id="sample-code-f13">Sample Code F13
</h4><p><strong>References</strong>:</p>
<ol>
<li><a id="Lin-Usr-Code-r1"></a>
<a class="link" href="https://community.renesas.com/mcu-mpu/rl78/f/rl78-forum/19115/rl78-lin-sample-code"  target="_blank" rel="noopener"
    >RL78 LIN sample code - Forum - RL78 MCU - Renesas Engineering Community</a>
<small>
<ul>
<li>Searched by <code>RL78/F13, F14 Group LIN Master Mode (RLIN3)</code> in
<a class="link" href="https://duckduckgo.com/?q=RL78%2FF13%2C&#43;F14&#43;Group&#43;LIN&#43;Master&#43;Mode&#43;%28RLIN3%29&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Lin-Usr-Code-r2"></a>
<a class="link" href="https://community.renesas.com/mcu-mpu/ra/f/forum/18739/ek-ra6m4-sample-project-error-toolchain-configured-for-project-is-not-currently-available"  target="_blank" rel="noopener"
    >EK-RA6M4 sample project: [ERROR] Toolchain configured for project is not currently available. - Forum - RA MCU - Renesas Engineering Community</a>
<small>
<ul>
<li>Searched by <code>[ERROR] Toolchain configured for project is not currently available. Please add/enable toolchain through Renesas Toolchain Management or select a different toolchain for this project.</code> in
<a class="link" href="https://duckduckgo.com/?q=%5BERROR%5D&#43;Toolchain&#43;configured&#43;for&#43;project&#43;is&#43;not&#43;currently&#43;available.&#43;Please&#43;add%2Fenable&#43;toolchain&#43;through&#43;Renesas&#43;Toolchain&#43;Management&#43;or&#43;select&#43;a&#43;different&#43;toolchain&#43;for&#43;this&#43;project.&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
</ol>
<p><strong>Notes</strong>:</p>
<p>(2024-12-18)</p>
<ol>
<li>
<p>Open project</p>
<ul>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p>Download the zip files <sup><a class="link" href="#Lin-Usr-Code-r1" >r1-Forum</a></sup>: MASTER_LIN.zip; SLAVE_LIN.zip</p>
</li>
<li>
<p>Import existing projects &gt; Select archive file: MASTER_LIN.zip &gt; Finish</p>
</li>
</ol>
</li>
</ul>
</li>
<li>
<p>The sample code for F13 require CC-RL compiler,
which however, cannot be installed:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/Lin_Example-01-Import-2024-12-18_091027.png"
	width="874"
	height="751"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="116"
		data-flex-basis="279px"
	
></p>
</li>
</ol>
<p>(2024-12-19)</p>
<ol start="3">
<li>
<p>Don&rsquo;t find <code>make</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Extracting support files...
</span></span><span class="line"><span class="cl"><span class="o">[</span>ERROR<span class="o">]</span> Toolchain configured <span class="k">for</span> project is not currently available. Please add/enable toolchain through Renesas Toolchain Management or <span class="k">select</span> a different toolchain <span class="k">for</span> this project.
</span></span><span class="line"><span class="cl">08:49:47 **** Incremental Build of configuration HardwareDebug <span class="k">for</span> project MASTER_LIN ****
</span></span><span class="line"><span class="cl">make -r --output-sync -j20 all 
</span></span><span class="line"><span class="cl">Cannot run program <span class="s2">&#34;make&#34;</span>: Launching failed
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Error: Program <span class="s2">&#34;make&#34;</span> not found in PATH
</span></span><span class="line"><span class="cl"><span class="nv">PATH</span><span class="o">=[</span>C:/Renesas/e2_studio/eclipse//plugins/org.eclipse.justj.openjdk.hotspot.jre.full.win32.x86_64_21.0.3.v20240426-1530/jre/bin/server<span class="p">;</span>C:/Renesas/e2_studio/eclipse//plugins/org.eclipse.justj.openjdk.hotspot.jre.full.win32.x86_64_21.0.3.v20240426-1530/jre/bin<span class="p">;</span>C:<span class="se">\P</span>rogramData<span class="se">\G</span>CC <span class="k">for</span> Renesas RL78 4.9.2.202201-GNURL78-ELF<span class="se">\r</span>l78-elf<span class="se">\r</span>l78-elf<span class="se">\b</span>in<span class="p">;</span>C:<span class="se">\P</span>rogramData<span class="se">\L</span>LVM <span class="k">for</span> Renesas RL78 17.0.1.202409<span class="se">\b</span>in<span class="p">;</span>C:<span class="se">\P</span>rogram Files <span class="o">(</span>x86<span class="o">)</span><span class="se">\C</span>ommon Files<span class="se">\O</span>racle<span class="se">\J</span>ava<span class="se">\j</span>ava8path<span class="p">;</span>C:<span class="se">\P</span>rogram Files <span class="o">(</span>x86<span class="o">)</span><span class="se">\C</span>ommon Files<span class="se">\O</span>racle<span class="se">\J</span>ava<span class="se">\j</span>avapath<span class="p">;</span>C:<span class="se">\W</span>indows<span class="se">\s</span>ystem32<span class="p">;</span>C:<span class="se">\W</span>indows<span class="p">;</span>C:<span class="se">\W</span>indows<span class="se">\S</span>ystem32<span class="se">\W</span>bem<span class="p">;</span>C:<span class="se">\W</span>indows<span class="se">\S</span>ystem32<span class="se">\W</span>indowsPowerShell<span class="se">\v</span>1.0<span class="se">\;</span>C:<span class="se">\W</span>indows<span class="se">\S</span>ystem32<span class="se">\O</span>penSSH<span class="se">\;</span>C:<span class="se">\P</span>rogram Files<span class="se">\d</span>otnet<span class="se">\;</span>C:<span class="se">\P</span>rogram Files<span class="se">\T</span>ailscale<span class="se">\;</span>C:<span class="se">\P</span>rogram Files<span class="se">\G</span>it<span class="se">\c</span>md<span class="p">;</span>C:<span class="se">\P</span>rogram Files<span class="se">\W</span>ireGuard<span class="se">\;</span>C:<span class="se">\P</span>rogramData<span class="se">\G</span>CC <span class="k">for</span> Renesas RL78 4.9.2.202201-GNURL78-ELF<span class="se">\r</span>l78-elf<span class="se">\r</span>l78-elf<span class="se">\b</span>in<span class="p">;</span>C:<span class="se">\P</span>rogramData<span class="se">\L</span>LVM <span class="k">for</span> Renesas RL78 17.0.1.202409<span class="se">\b</span>in<span class="p">;</span>C:<span class="se">\U</span>sers<span class="se">\Z</span>ichenWang<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\M</span>icrosoft<span class="se">\W</span>indowsApps<span class="p">;</span>C:<span class="se">\U</span>sers<span class="se">\Z</span>ichenWang<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\P</span>rograms<span class="se">\M</span>icrosoft VS Code<span class="se">\b</span>in<span class="p">;</span>C:<span class="se">\U</span>sers<span class="se">\Z</span>ichenWang<span class="se">\.</span>dotnet<span class="se">\t</span>ools<span class="p">;</span>C:<span class="se">\P</span>rogram Files <span class="o">(</span>x86<span class="o">)</span><span class="se">\N</span>map<span class="p">;</span>C:<span class="se">\t</span>exlive<span class="se">\2</span>024<span class="se">\b</span>in<span class="se">\w</span>indows<span class="p">;</span>C:<span class="se">\R</span>enesas<span class="se">\e</span>2_studio<span class="se">\e</span>clipse<span class="o">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">08:49:47 Build Failed. <span class="m">1</span> errors, <span class="m">0</span> warnings. <span class="o">(</span>took 47ms<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>However, my <strong>another project</strong> can be built successfully</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Extracting support files...
</span></span><span class="line"><span class="cl">09:01:55 **** Incremental Build of configuration HardwareDebug <span class="k">for</span> project F24_from_G23_Sample_Code ****
</span></span><span class="line"><span class="cl">make -r --output-sync -j20 all 
</span></span><span class="line"><span class="cl">Build complete.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">09:01:55 Build Finished. <span class="m">0</span> errors, <span class="m">0</span> warnings. <span class="o">(</span>took 157ms<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Actions</strong>:</p>
<ol>
<li>
<p>Check toolchain in File &gt; Properties <sup><a class="link" href="#Lin-Usr-Code-r2" >r2-Forum</a></sup></p>
<p>The compiler <code>Renesas CC-RL</code> was set to an old version: <code>v1.10.00</code>.
However, my compiler version is <code>1.14.00</code></p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/Lin_Example-02-Could_Not_Find_Make-2024-12-19_091814.png"
	width="1026"
	height="1020"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="100"
		data-flex-basis="241px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/Lin_Example-03-Compiler_Version_Higher-2024-12-19_092419.png"
	width="1026"
	height="1012"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="101"
		data-flex-basis="243px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/Lin_Example-04-Change_To_My_Version-2024-12-19_092641.png"
	width="1026"
	height="1012"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="101"
		data-flex-basis="243px"
	
></p>
</li>
</ol>
</li>
<li>
<p>Exclude files from building</p>
<ul>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p>Exclude <code>MASTER_LIN/src/MASTER_LIN.c</code> from build</p>
<p>Otherwise, there will be an error: <code>Duplicate symbol &quot;_main&quot; in &quot;.\src\MASTER_LIN.obj&quot;</code></p>
<details><summary>Building failure messages</summary>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Invoking Linker: MASTER_LIN.abs
</span></span><span class="line"><span class="cl">LinkerMASTER_LIN.tmp<span class="o">=</span>
</span></span><span class="line"><span class="cl">    -MAKEUD<span class="o">=</span><span class="s2">&#34;C:\Users\ZichenWang\Downloads\Y-ASK-RL78F13-LIN\MASTER_LIN\HardwareDebug/MASTER_LIN_l.ud&#34;</span> 
</span></span><span class="line"><span class="cl">    -device<span class="o">=</span><span class="s2">&#34;C:/Users/ZichenWang/.eclipse/com.renesas.platform_1435879475/DebugComp/RL78/RL78/Common/DR5F10BMG.DVF&#34;</span> 
</span></span><span class="line"><span class="cl">    -list 
</span></span><span class="line"><span class="cl">    -nooptimize 
</span></span><span class="line"><span class="cl">    -entry<span class="o">=</span>_start 
</span></span><span class="line"><span class="cl">    -auto_section_layout 
</span></span><span class="line"><span class="cl">    -security_id<span class="o">=</span><span class="m">00000000000000000000</span> 
</span></span><span class="line"><span class="cl">    -debug_monitor<span class="o">=</span>1FE00-1FFFF 
</span></span><span class="line"><span class="cl">    -user_opt_byte<span class="o">=</span>FFFFE8 
</span></span><span class="line"><span class="cl">    -ocdbg<span class="o">=</span><span class="m">84</span> 
</span></span><span class="line"><span class="cl">    -ocdtr 
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\generate\cstart.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\generate\stkinit.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\MASTER_LIN.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\RLIN_driver.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\RLIN_driver_user.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_cgc.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_cgc_user.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_intc.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_intc_user.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_port.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_port_user.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_wdt.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_wdt_user.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_main.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_systeminit.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -library<span class="o">=</span><span class="s2">&#34;.\MASTER_LIN.lib&#34;</span>
</span></span><span class="line"><span class="cl">    -output<span class="o">=</span><span class="s2">&#34;MASTER_LIN.abs&#34;</span> 
</span></span><span class="line"><span class="cl">    -debug 
</span></span><span class="line"><span class="cl">    -nocompress 
</span></span><span class="line"><span class="cl">    -memory<span class="o">=</span>high 
</span></span><span class="line"><span class="cl">    -rom<span class="o">=</span>.data<span class="o">=</span>.dataR,.sdata<span class="o">=</span>.sdataR 
</span></span><span class="line"><span class="cl">    -nomessage 
</span></span><span class="line"><span class="cl">    -nologo
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">W0561018:The evaluation period of CC-RL V1 is valid <span class="k">for</span> the remaining <span class="m">37</span> days. After that, functional limit will be applied. Please consider purchasing the product.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">E0562300:Duplicate symbol <span class="s2">&#34;_main&#34;</span> in <span class="s2">&#34;.\src\MASTER_LIN.obj&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Renesas Optimizing Linker Abort
</span></span><span class="line"><span class="cl">make: *** <span class="o">[</span>makefile:111: MASTER_LIN.abs<span class="o">]</span> Error <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;make -r --output-sync -j20 all&#34;</span> terminated with <span class="nb">exit</span> code 2. Build might be incomplete.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">13:04:51 Build Failed. <span class="m">2</span> errors, <span class="m">29</span> warnings. <span class="o">(</span>took 1s.701ms<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></details>
</li>
<li>
<p>Exclude <code>MASTER_LIN/generate/hdwinit.asm</code> from build:</p>
<p>Otherwise, there is an error: <code>Duplicate symbol &quot;_hdwinit&quot; in &quot;.\generate\hdwinit.obj&quot;</code></p>
<details><summary>Building failure messages</summary>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Extracting support files...
</span></span><span class="line"><span class="cl">13:12:23 **** Incremental Build of configuration HardwareDebug <span class="k">for</span> project MASTER_LIN ****
</span></span><span class="line"><span class="cl">make -r --output-sync -j20 all 
</span></span><span class="line"><span class="cl">Invoking Library Generator: MASTER_LIN.lib
</span></span><span class="line"><span class="cl">Library Generator Completed
</span></span><span class="line"><span class="cl">LibraryGeneratorMASTER_LIN.tmp<span class="o">=</span>
</span></span><span class="line"><span class="cl">    -MAKEUD_LBG<span class="o">=</span><span class="s2">&#34;C:\Users\ZichenWang\Downloads\Y-ASK-RL78F13-LIN\MASTER_LIN\HardwareDebug\MASTER_LIN_lbg.ud&#34;</span> 
</span></span><span class="line"><span class="cl">    -cpu<span class="o">=</span>S3 
</span></span><span class="line"><span class="cl">    -output<span class="o">=</span>MASTER_LIN.lib 
</span></span><span class="line"><span class="cl">    -nologo
</span></span><span class="line"><span class="cl">Invoking Linker: MASTER_LIN.abs
</span></span><span class="line"><span class="cl">LinkerMASTER_LIN.tmp<span class="o">=</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">W0561018:The evaluation period of CC-RL V1 is valid <span class="k">for</span> the remaining <span class="m">37</span> days. After that, functional limit will be applied. Please consider purchasing the product.
</span></span><span class="line"><span class="cl">    -MAKEUD<span class="o">=</span><span class="s2">&#34;C:\Users\ZichenWang\Downloads\Y-ASK-RL78F13-LIN\MASTER_LIN\HardwareDebug/MASTER_LIN_l.ud&#34;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">E0562300:Duplicate symbol <span class="s2">&#34;_hdwinit&#34;</span> in <span class="s2">&#34;.\generate\hdwinit.obj&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    -device<span class="o">=</span><span class="s2">&#34;C:/Users/ZichenWang/.eclipse/com.renesas.platform_1435879475/DebugComp/RL78/RL78/Common/DR5F10BMG.DVF&#34;</span> 
</span></span><span class="line"><span class="cl">Renesas Optimizing Linker Abort
</span></span><span class="line"><span class="cl">    -list 
</span></span><span class="line"><span class="cl">    -nooptimize 
</span></span><span class="line"><span class="cl">    -entry<span class="o">=</span>_start 
</span></span><span class="line"><span class="cl">make: *** <span class="o">[</span>makefile:111: MASTER_LIN.abs<span class="o">]</span> Error <span class="m">1</span>
</span></span><span class="line"><span class="cl">    -auto_section_layout 
</span></span><span class="line"><span class="cl">    -security_id<span class="o">=</span><span class="m">00000000000000000000</span> 
</span></span><span class="line"><span class="cl">    -debug_monitor<span class="o">=</span>1FE00-1FFFF 
</span></span><span class="line"><span class="cl">    -user_opt_byte<span class="o">=</span>FFFFE8 
</span></span><span class="line"><span class="cl">    -ocdbg<span class="o">=</span><span class="m">84</span> 
</span></span><span class="line"><span class="cl">    -ocdtr 
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\generate\cstart.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\generate\hdwinit.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\generate\stkinit.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\RLIN_driver.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\RLIN_driver_user.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_cgc.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_cgc_user.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_intc.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_intc_user.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_port.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_port_user.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_wdt.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_cg_wdt_user.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_main.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -input<span class="o">=</span><span class="s2">&#34;.\src\r_systeminit.obj&#34;</span>
</span></span><span class="line"><span class="cl">    -library<span class="o">=</span><span class="s2">&#34;.\MASTER_LIN.lib&#34;</span>
</span></span><span class="line"><span class="cl">    -output<span class="o">=</span><span class="s2">&#34;MASTER_LIN.abs&#34;</span> 
</span></span><span class="line"><span class="cl">    -debug 
</span></span><span class="line"><span class="cl">    -nocompress 
</span></span><span class="line"><span class="cl">    -memory<span class="o">=</span>high 
</span></span><span class="line"><span class="cl">    -rom<span class="o">=</span>.data<span class="o">=</span>.dataR,.sdata<span class="o">=</span>.sdataR 
</span></span><span class="line"><span class="cl">    -nomessage 
</span></span><span class="line"><span class="cl">    -nologo
</span></span><span class="line"><span class="cl"><span class="s2">&#34;make -r --output-sync -j20 all&#34;</span> terminated with <span class="nb">exit</span> code 2. Build might be incomplete.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">13:12:23 Build Failed. <span class="m">2</span> errors, <span class="m">1</span> warnings. <span class="o">(</span>took 352ms<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></details>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<h2 id="pwm">PWM
</h2><h3 id="principle">Principle
</h3><ol>
<li>
<p>PWM 信号频率的理论上限是时钟频率的一半</p>
<ul>
<li>
<p><strong>References</strong>:</p>
<ol>
<li><a id=""></a>
<a class="link" href="https://yuanbao.tencent.com/chat/naQivTmsDa/ff65355b-0965-4879-aa08-6e569895b617"  target="_blank" rel="noopener"
    >元宝 - Single PWM Drive Pump Solenoid</a></li>
<li><a id=""></a>
<a class="link" href="https://yuanbao.tencent.com/chat/naQivTmsDa/ea245781-090e-4bd7-ba54-b18536c6d219"  target="_blank" rel="noopener"
    >元宝 - 时钟与PWM信号关系解析</a></li>
<li><a id=""></a>
<a class="link" href="https://gemini.google.com/u/1/app/f4bd56984d506a03"  target="_blank" rel="noopener"
    >Gemini 2.5P - PWM 信号与电平跳变</a></li>
</ol>
</li>
<li>
<p><strong>Supports</strong>:</p>
<p>(2025-06-03T14:26)</p>
<ol>
<li>
<p>PWM 与时钟一样也是方波，由一次上升和一次下降组成。数字电路一般是由时钟的上升沿（或由下降沿）触发，所以生成一个 PWM 周期需要两个时钟周期：</p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 216 201"
      >
      <g transform='translate(8,16)'>
<path d='M 56,32 L 72,32' fill='none' stroke='currentColor'></path>
<path d='M 88,32 L 104,32' fill='none' stroke='currentColor'></path>
<path d='M 120,32 L 136,32' fill='none' stroke='currentColor'></path>
<path d='M 152,32 L 168,32' fill='none' stroke='currentColor'></path>
<path d='M 72,64 L 88,64' fill='none' stroke='currentColor'></path>
<path d='M 104,64 L 120,64' fill='none' stroke='currentColor'></path>
<path d='M 136,64 L 152,64' fill='none' stroke='currentColor'></path>
<path d='M 168,64 L 176,64' fill='none' stroke='currentColor'></path>
<path d='M 56,96 L 88,96' fill='none' stroke='currentColor'></path>
<path d='M 120,96 L 152,96' fill='none' stroke='currentColor'></path>
<path d='M 88,128 L 120,128' fill='none' stroke='currentColor'></path>
<path d='M 152,128 L 176,128' fill='none' stroke='currentColor'></path>
<path d='M 40,160 L 200,160' fill='none' stroke='currentColor'></path>
<path d='M 40,0 L 40,160' fill='none' stroke='currentColor'></path>
<path d='M 56,32 L 56,64' fill='none' stroke='currentColor'></path>
<path d='M 56,96 L 56,128' fill='none' stroke='currentColor'></path>
<path d='M 72,32 L 72,64' fill='none' stroke='currentColor'></path>
<path d='M 88,32 L 88,64' fill='none' stroke='currentColor'></path>
<path d='M 88,96 L 88,128' fill='none' stroke='currentColor'></path>
<path d='M 104,32 L 104,64' fill='none' stroke='currentColor'></path>
<path d='M 120,32 L 120,64' fill='none' stroke='currentColor'></path>
<path d='M 120,96 L 120,128' fill='none' stroke='currentColor'></path>
<path d='M 136,32 L 136,64' fill='none' stroke='currentColor'></path>
<path d='M 152,32 L 152,64' fill='none' stroke='currentColor'></path>
<path d='M 152,96 L 152,128' fill='none' stroke='currentColor'></path>
<path d='M 168,32 L 168,64' fill='none' stroke='currentColor'></path>
<polygon points='48.000000,0.000000 36.000000,-5.600000 36.000000,5.600000' fill='currentColor' transform='rotate(270.000000, 40.000000, 0.000000)'></polygon>
<text text-anchor='middle' x='8' y='52' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='8' y='116' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='16' y='52' fill='currentColor' style='font-size:1em'>L</text>
<text text-anchor='middle' x='16' y='116' fill='currentColor' style='font-size:1em'>W</text>
<text text-anchor='middle' x='24' y='52' fill='currentColor' style='font-size:1em'>K</text>
<text text-anchor='middle' x='24' y='116' fill='currentColor' style='font-size:1em'>M</text>
<text text-anchor='middle' x='56' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='56' y='148' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='56' y='180' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='72' y='180' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='80' y='180' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='88' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='88' y='180' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='96' y='180' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='104' y='180' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='112' y='180' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='120' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='120' y='148' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='152' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='184' y='148' fill='currentColor' style='font-size:1em'>⋮</text>
</g>

    </svg>
  
</div>
<ul>
<li>
<p>双边沿触发的数字电路设计太复杂</p>
</li>
<li>
<p>电路被时钟边沿触发后，还需要经过计数器更新、比较寄存器 CCR，输出缓冲等运算，可能无法在半个时钟周期内（如果在上升沿触发，也就是在下降沿来临前），完成这些动作，实现有效跳变。</p>
<p>(2025-06-04T12:10)</p>
<ul>
<li>不确定这是不是 “synchronization with f_CLK” mentioned in Page 415 of <a class="link" href="#Pwm-Cfg-RHard-r1" >r1-HrdManual</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p>f_PWM = f_CLK/2 时，PWM 分辨率为 2（计数器仅有 0，1 两种状态），没有应用价值<sup><a class="link" href="" >r1-元宝</a></sup></p>
</li>
<li>
<p>PWM 分辨率是自动重装载值 ARR，严格来讲是 1/(ARR+1)。ARR 是在一个 PWM 周期内的 <strong>时钟周期数量</strong></p>
<ul>
<li>
<p>ARR 计数值 = 3，分辨率是 1/4:</p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 328 201"
      >
      <g transform='translate(8,16)'>
<path d='M 48,32 L 64,32' fill='none' stroke='currentColor'></path>
<path d='M 80,32 L 96,32' fill='none' stroke='currentColor'></path>
<path d='M 112,32 L 128,32' fill='none' stroke='currentColor'></path>
<path d='M 144,32 L 160,32' fill='none' stroke='currentColor'></path>
<path d='M 176,32 L 192,32' fill='none' stroke='currentColor'></path>
<path d='M 208,32 L 224,32' fill='none' stroke='currentColor'></path>
<path d='M 240,32 L 256,32' fill='none' stroke='currentColor'></path>
<path d='M 272,32 L 288,32' fill='none' stroke='currentColor'></path>
<path d='M 64,64 L 80,64' fill='none' stroke='currentColor'></path>
<path d='M 96,64 L 112,64' fill='none' stroke='currentColor'></path>
<path d='M 128,64 L 144,64' fill='none' stroke='currentColor'></path>
<path d='M 160,64 L 176,64' fill='none' stroke='currentColor'></path>
<path d='M 192,64 L 208,64' fill='none' stroke='currentColor'></path>
<path d='M 224,64 L 240,64' fill='none' stroke='currentColor'></path>
<path d='M 256,64 L 272,64' fill='none' stroke='currentColor'></path>
<path d='M 288,64 L 304,64' fill='none' stroke='currentColor'></path>
<path d='M 112,96 L 176,96' fill='none' stroke='currentColor'></path>
<path d='M 240,96 L 304,96' fill='none' stroke='currentColor'></path>
<path d='M 48,128 L 112,128' fill='none' stroke='currentColor'></path>
<path d='M 176,128 L 240,128' fill='none' stroke='currentColor'></path>
<path d='M 32,160 L 312,160' fill='none' stroke='currentColor'></path>
<path d='M 32,0 L 32,160' fill='none' stroke='currentColor'></path>
<path d='M 48,32 L 48,64' fill='none' stroke='currentColor'></path>
<path d='M 64,32 L 64,64' fill='none' stroke='currentColor'></path>
<path d='M 80,32 L 80,64' fill='none' stroke='currentColor'></path>
<path d='M 96,32 L 96,64' fill='none' stroke='currentColor'></path>
<path d='M 112,32 L 112,64' fill='none' stroke='currentColor'></path>
<path d='M 112,96 L 112,128' fill='none' stroke='currentColor'></path>
<path d='M 128,32 L 128,64' fill='none' stroke='currentColor'></path>
<path d='M 144,32 L 144,64' fill='none' stroke='currentColor'></path>
<path d='M 160,32 L 160,64' fill='none' stroke='currentColor'></path>
<path d='M 176,32 L 176,64' fill='none' stroke='currentColor'></path>
<path d='M 176,96 L 176,128' fill='none' stroke='currentColor'></path>
<path d='M 192,32 L 192,64' fill='none' stroke='currentColor'></path>
<path d='M 208,32 L 208,64' fill='none' stroke='currentColor'></path>
<path d='M 224,32 L 224,64' fill='none' stroke='currentColor'></path>
<path d='M 240,32 L 240,64' fill='none' stroke='currentColor'></path>
<path d='M 240,96 L 240,128' fill='none' stroke='currentColor'></path>
<path d='M 256,32 L 256,64' fill='none' stroke='currentColor'></path>
<path d='M 272,32 L 272,64' fill='none' stroke='currentColor'></path>
<path d='M 288,32 L 288,64' fill='none' stroke='currentColor'></path>
<path d='M 304,32 L 304,64' fill='none' stroke='currentColor'></path>
<path d='M 304,96 L 304,128' fill='none' stroke='currentColor'></path>
<polygon points='40.000000,0.000000 28.000000,-5.600000 28.000000,5.600000' fill='currentColor' transform='rotate(270.000000, 32.000000, 0.000000)'></polygon>
<text text-anchor='middle' x='0' y='52' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='0' y='116' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='8' y='52' fill='currentColor' style='font-size:1em'>L</text>
<text text-anchor='middle' x='8' y='116' fill='currentColor' style='font-size:1em'>W</text>
<text text-anchor='middle' x='16' y='52' fill='currentColor' style='font-size:1em'>K</text>
<text text-anchor='middle' x='16' y='116' fill='currentColor' style='font-size:1em'>M</text>
<text text-anchor='middle' x='48' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='48' y='100' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='48' y='116' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='48' y='148' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='80' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='80' y='100' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='80' y='116' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='80' y='180' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='96' y='180' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='104' y='180' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='112' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='112' y='180' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='120' y='180' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='128' y='180' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='136' y='180' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='144' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='176' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='176' y='148' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='208' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='208' y='100' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='208' y='116' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='240' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='272' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='304' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='304' y='148' fill='currentColor' style='font-size:1em'>⋮</text>
</g>

    </svg>
  
</div>
<ul>
<li>
<p>如果 CLK 频率是 72 MHz，不使用预分频器，ARR=3，则 PWM 频率是 72M/4 = 18M</p>
</li>
<li>
<p>脉宽调制：控制一个 pwm 周期内高电平和低电平的比例。
时钟信号的占空比是 50%，高低电平各占一半，而 PWM 生成的方波占空比可以在 0% 和 100% 变化，通过设置计数器的最大值。</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>一个 PWM 周期内通常不允许大于两次电平跳变，所以无法实现电平为 010100 的一个 PWM 周期<sup><a class="link" href="" >r3-Gemini</a></sup></p>
<ul>
<li>
<p>ARR = 6</p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 328 201"
      >
      <g transform='translate(8,16)'>
<path d='M 48,32 L 64,32' fill='none' stroke='currentColor'></path>
<path d='M 80,32 L 96,32' fill='none' stroke='currentColor'></path>
<path d='M 112,32 L 128,32' fill='none' stroke='currentColor'></path>
<path d='M 144,32 L 160,32' fill='none' stroke='currentColor'></path>
<path d='M 176,32 L 192,32' fill='none' stroke='currentColor'></path>
<path d='M 208,32 L 224,32' fill='none' stroke='currentColor'></path>
<path d='M 240,32 L 256,32' fill='none' stroke='currentColor'></path>
<path d='M 272,32 L 288,32' fill='none' stroke='currentColor'></path>
<path d='M 64,64 L 80,64' fill='none' stroke='currentColor'></path>
<path d='M 96,64 L 112,64' fill='none' stroke='currentColor'></path>
<path d='M 128,64 L 144,64' fill='none' stroke='currentColor'></path>
<path d='M 160,64 L 176,64' fill='none' stroke='currentColor'></path>
<path d='M 192,64 L 208,64' fill='none' stroke='currentColor'></path>
<path d='M 224,64 L 240,64' fill='none' stroke='currentColor'></path>
<path d='M 256,64 L 272,64' fill='none' stroke='currentColor'></path>
<path d='M 288,64 L 304,64' fill='none' stroke='currentColor'></path>
<path d='M 80,96 L 112,96' fill='none' stroke='currentColor'></path>
<path d='M 144,96 L 176,96' fill='none' stroke='currentColor'></path>
<path d='M 48,128 L 80,128' fill='none' stroke='currentColor'></path>
<path d='M 112,128 L 144,128' fill='none' stroke='currentColor'></path>
<path d='M 176,128 L 208,128' fill='none' stroke='currentColor'></path>
<path d='M 208,128 L 240,128' fill='none' stroke='currentColor'></path>
<path d='M 32,160 L 312,160' fill='none' stroke='currentColor'></path>
<path d='M 32,0 L 32,160' fill='none' stroke='currentColor'></path>
<path d='M 48,32 L 48,64' fill='none' stroke='currentColor'></path>
<path d='M 64,32 L 64,64' fill='none' stroke='currentColor'></path>
<path d='M 80,32 L 80,64' fill='none' stroke='currentColor'></path>
<path d='M 80,96 L 80,128' fill='none' stroke='currentColor'></path>
<path d='M 96,32 L 96,64' fill='none' stroke='currentColor'></path>
<path d='M 112,32 L 112,64' fill='none' stroke='currentColor'></path>
<path d='M 112,96 L 112,128' fill='none' stroke='currentColor'></path>
<path d='M 128,32 L 128,64' fill='none' stroke='currentColor'></path>
<path d='M 144,32 L 144,64' fill='none' stroke='currentColor'></path>
<path d='M 144,96 L 144,128' fill='none' stroke='currentColor'></path>
<path d='M 160,32 L 160,64' fill='none' stroke='currentColor'></path>
<path d='M 176,32 L 176,64' fill='none' stroke='currentColor'></path>
<path d='M 176,96 L 176,128' fill='none' stroke='currentColor'></path>
<path d='M 192,32 L 192,64' fill='none' stroke='currentColor'></path>
<path d='M 208,32 L 208,64' fill='none' stroke='currentColor'></path>
<path d='M 224,32 L 224,64' fill='none' stroke='currentColor'></path>
<path d='M 240,32 L 240,64' fill='none' stroke='currentColor'></path>
<path d='M 256,32 L 256,64' fill='none' stroke='currentColor'></path>
<path d='M 272,32 L 272,64' fill='none' stroke='currentColor'></path>
<path d='M 288,32 L 288,64' fill='none' stroke='currentColor'></path>
<path d='M 304,32 L 304,64' fill='none' stroke='currentColor'></path>
<polygon points='40.000000,0.000000 28.000000,-5.600000 28.000000,5.600000' fill='currentColor' transform='rotate(270.000000, 32.000000, 0.000000)'></polygon>
<text text-anchor='middle' x='0' y='52' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='0' y='116' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='8' y='52' fill='currentColor' style='font-size:1em'>L</text>
<text text-anchor='middle' x='8' y='116' fill='currentColor' style='font-size:1em'>W</text>
<text text-anchor='middle' x='16' y='52' fill='currentColor' style='font-size:1em'>K</text>
<text text-anchor='middle' x='16' y='116' fill='currentColor' style='font-size:1em'>M</text>
<text text-anchor='middle' x='48' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='48' y='100' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='48' y='116' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='48' y='148' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='80' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='96' y='180' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='112' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='112' y='180' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='120' y='180' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='128' y='180' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='136' y='180' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='144' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='144' y='180' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='152' y='180' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='176' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='208' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='240' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='240' y='148' fill='currentColor' style='font-size:1em'>⋮</text>
<text text-anchor='middle' x='272' y='84' fill='currentColor' style='font-size:1em'>↑</text>
<text text-anchor='middle' x='304' y='84' fill='currentColor' style='font-size:1em'>↑</text>
</g>

    </svg>
  
</div>
</li>
</ul>
</li>
<li>
<p>加预分频器是为了避免超出计数器的最大计数值<sup><a class="link" href="" >r2-元宝</a></sup></p>
<ul>
<li>主时钟频率 72MHz，目标 PWM 频率 1kHz，不使用 Prescaler，则 ARR 是 71,999，如果使用 16 位的计数器（最大计数值是 65,535，还未数到 71,999，就复位到0了。</li>
</ul>
</li>
<li>
<p>预分频器无法增加占空比分辨率，即缩小占空比的最小步进</p>
<ul>
<li>
<p>主时钟频率 72MHz，目标 PWM 频率 100 kHz，不使用 Prescaler，则自动重装载值是 720，如果使用 16 位的计数器（最大计数值是 65,535，但有效计数区间只是 720，占空比的分辨率只有 1/720，没有充分利用 16 位计数器的理论分辨率 1/65535.</p>
<p>如果使用 Prescaler = 2, ARR 会进一步减小到 360，占空比分辨率是 1/360。为了增加分辨率，可以增加主时钟频率。</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<ol start="2">
<li>
<p>PWM 信号的频率不会影响电机转速</p>
<ul>
<li>
<p><strong>Supports</strong>:</p>
<ol>
<li>PWM 信号频率影响稳定性和损耗<sup><a class="link" href="" >r1-元宝</a></sup></li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="renesas-configure">Renesas Configure
</h3><p><strong>Issues</strong>:</p>
<ol>
<li><a class="link" href="Pwm-Cfg-2Chls" >Configure Two Channels</a></li>
<li><a class="link" href="#Pwm-Cfg-2pwm" >Configure Two PWM</a></li>
<li><a class="link" href="#Pwm-Cfg-RHard" >Renesas Hardware</a></li>
<li><a class="link" href="#Pwm-Cfg-Mc" >Minimum Code</a></li>
</ol>
<hr>
<p><strong>Notes</strong>:</p>
<p><a id="Pwm-Cfg-2Chls"></a></p>
<ol>
<li>
<p><strong>Configurations for One PWM with Two Channels in Smart Configurator</strong></p>
<ul>
<li>
<p><strong>Supports</strong>:</p>
<ol>
<li>
<p>module <code>PWM Output</code></p>
<p>Two channels have different duty of cycles:</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/Pwm-01-2025-01-08_172430.png"
	width="1520"
	height="1187"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="128"
		data-flex-basis="307px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/Pwm-02-2025-01-08_172448.png"
	width="1520"
	height="1187"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="128"
		data-flex-basis="307px"
	
></p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<p><a id="Pwm-Cfg-2pwm"></a></p>
<ol start="2">
<li>
<p><strong>Configure Two PWM with Different Frequencies</strong></p>
<ul>
<li>
<p><strong>Supports</strong>:</p>
<p>(2025-06-03T09:25)</p>
<ol>
<li>Pump and solenoid requires different-frequency PWM signals.</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<p><a id="Pwm-Cfg-RHard"></a></p>
<ol start="3">
<li>
<p>Renesas RL F23 Hardware</p>
<ul>
<li>
<p><strong>References</strong>:</p>
<ol>
<li><a id="Pwm-Cfg-RHard-r1"></a>
<a class="link" href="https://www.renesas.com/us/en/document/mah/rl78f23-f24-users-manual-hardware-rev100"  target="_blank" rel="noopener"
    >RL78/F23, F24 - User&rsquo;s manual: Hardware</a></li>
</ol>
</li>
<li>
<p><strong>Supports</strong>:</p>
<ol>
<li>
<p>TAU Registers (Page 372 in <a class="link" href="" >r1</a>)</p>



<div id="jsmind_container_34" class="jsmind-container" style="width:100%; height:400px;"></div>
<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
    try {
      if (typeof window.jsmindMaps === 'undefined') {
        window.jsmindMaps = [];
      }
      
      
      window.jsmindMaps.push({
        containerId: "jsmind_container_34",
        dataString: `\u007b\n  \u0022meta\u0022:\u007b\u0022name\u0022:\u0022\u0022, \u0022author\u0022:\u0022 \u0022, \u0022version\u0022:\u0022 \u0022\u007d,\n  \u0022format\u0022:\u0022node_tree\u0022,\n  \u0022data\u0022:\n  \u007b\n    \u0022id\u0022:\u0022root\u0022, \u0022topic\u0022:\u0022TAU Registers\u0022, \u0022children\u0022:\n    [\n      \u007b\n        \u0022id\u0022:\u0022p402\u0022, \u0022topic\u0022:\u0022Timer Output Register m (TOm)\u0022, \u0022children\u0022:\n        [\n        ]\n      \u007d\n    ]\n  \u007d\n\u007d`
      });
      
    } catch (e) {
      console.error("Error storing jsmind data:", e);
    }
  });
</script>

</li>
<li>
<p>Timer Count Operation Mode (Page 417)</p>



<div id="jsmind_container_35" class="jsmind-container" style="width:100%; height:400px;"></div>
<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
    try {
      if (typeof window.jsmindMaps === 'undefined') {
        window.jsmindMaps = [];
      }
      
      
      window.jsmindMaps.push({
        containerId: "jsmind_container_35",
        dataString: `\u007b\n  \u0022meta\u0022:\u007b\u0022name\u0022:\u0022\u0022, \u0022author\u0022:\u0022 \u0022, \u0022version\u0022:\u0022 \u0022\u007d,\n  \u0022format\u0022:\u0022node_tree\u0022,\n  \u0022data\u0022:\n  \u007b\n    \u0022id\u0022:\u0022root\u0022, \u0022topic\u0022:\u0022Operations\u0022, \u0022children\u0022:\n    [\n      \u007b\n        \u0022id\u0022:\u0022p402\u0022, \u0022topic\u0022:\u0022Interval Timer Mode\u0022, \u0022children\u0022:\n        [\n        ]\n      \u007d\n    ]\n  \u007d\n\u007d`
      });
      
    } catch (e) {
      console.error("Error storing jsmind data:", e);
    }
  });
</script>

</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<p><a id="Pwm-Cfg-Mc"></a></p>
<ol start="3">
<li>
<p><strong>Minimum Code</strong></p>
<ul>
<li>
<p><strong>References</strong>:</p>
<ol>
<li><a id="Pwm-Mc-r1"></a>
<a class="link" href="https://www.renesas.com/en/document/man/smart-configurator-users-manual-rl78-api-reference?queryID=0034d21cadde184465925a89ef06395c#page=200.10"  target="_blank" rel="noopener"
    >4.2.9 PWM Output - Smart Configurator User&rsquo;s Manual: RL78 API Reference</a>
<small>
<ul>
<li>Searched by <code>PWM smart configurator rl78</code> in
<a class="link" href="https://www.renesas.com/en/search?keywords=PWM%20smart%20configurator%20rl78&amp;type=User%20Manual"  target="_blank" rel="noopener"
    >Renesas search</a>
</small></li>
</ul>
</li>
<li><a id="Pwm-Mc-r2"></a>
<a class="link" href="https://www.renesas.com/en/document/apn/rl78g13-timer-array-unit-pwm-output-cc-rl-rev200?language=en"  target="_blank" rel="noopener"
    >RL78/G13 Timer Array Unit(PWM Output) CC-RL - Docs</a>
<small>
<ul>
<li>Searched by <code>Renesas rl78 timer pwm</code> in
<a class="link" href="https://duckduckgo.com/?q=Renesas&#43;rl78&#43;timer&#43;pwm&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
</ol>
</li>
<li>
<p><strong>Supports</strong>:</p>
<p>(2025-05-22T15:11)</p>
<ol>
<li>
<p>6 functions<sup><a class="link" href="#Pwm-Mc-r1" >r1-Docs</a></sup>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="n">R_</span><span class="p">{</span><span class="n">Config_TAUm_n</span><span class="p">}</span><span class="n">_Create</span>
</span></span><span class="line"><span class="cl"><span class="n">R_</span><span class="p">{</span><span class="n">Config_TAUm_n</span><span class="p">}</span><span class="n">_Start</span>
</span></span><span class="line"><span class="cl"><span class="n">R_</span><span class="p">{</span><span class="n">Config_TAUm_n</span><span class="p">}</span><span class="n">_Stop</span>
</span></span><span class="line"><span class="cl"><span class="n">R_</span><span class="p">{</span><span class="n">Config_TAUm_n</span><span class="p">}</span><span class="n">_Create_Userinit</span>
</span></span><span class="line"><span class="cl"><span class="n">r_</span><span class="p">{</span><span class="n">Config_TAUm_n</span><span class="p">}</span><span class="n">_channeln_interrupt</span>
</span></span><span class="line"><span class="cl"><span class="n">r_</span><span class="p">{</span><span class="n">Config_TAUm_n</span><span class="p">}</span><span class="n">_channelp_interrupt</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Example code of F13<sup><a class="link" href="#Pwm-Mc-r2" >r2-Docs</a></sup></p>
</li>
<li>
<p>High-level understanding</p>
<ul>
<li>Duty-cycle determines the overall voltage.
If the duty-cycle is 50% and the power supply is 12V,
the equivalent power supply is 6V.</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="f24-led">F24 LED
</h3><p><strong>Problems</strong>:</p>
<ol>
<li>Different duty cycle corresponds to different level of <strong>brightness</strong>,
as essentially the voltage varies alongside the duty cycle.</li>
</ol>
<hr>
<p><strong>Algorithm Design</strong></p>
<p><strong>Software Design</strong></p>
<p>(2025-05-29T12:07)</p>
<ol>
<li>
<p><strong>Configurations</strong>:</p>
<ul>
<li>
<p><strong>References</strong>:</p>
<ol>
<li><a id=""></a>
<a class="link" href="https://youtu.be/M0_2IeDv_TA"  target="_blank" rel="noopener"
    >Generating PWM signals in RL78 microcontroller - YouTube - SM training academy</a></li>
<li><a id=""></a>
<a class="link" href="https://mcu-simulator.renesas.com/?locale=en&amp;projectTemplateId=rl78g23_tau_pwm"  target="_blank" rel="noopener"
    >RL78/G23 - Timer Array Unit (PWM output) - Renesas Web Simulator</a></li>
</ol>
</li>
<li>
<p><strong>Supports</strong>:</p>
<ol>
<li>
<p>Clock, Debugger, Pin 67 out for LED2, Master and Slave</p>
<ul>
<li>
<p>周期方波信号：由定时器 TAU0 的 channel 0 (Master) 的中断产生</p>
</li>
<li>
<p>比较器：由定时器 TAU0 的 channel 0 (Slave) 的中断产生</p>
</li>
</ul>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 272 137"
      >
      <g transform='translate(8,16)'>
<path d='M 16,16 L 64,16' fill='none' stroke='currentColor'></path>
<path d='M 112,16 L 160,16' fill='none' stroke='currentColor'></path>
<path d='M 208,16 L 256,16' fill='none' stroke='currentColor'></path>
<path d='M 0,48 L 16,48' fill='none' stroke='currentColor'></path>
<path d='M 64,48 L 112,48' fill='none' stroke='currentColor'></path>
<path d='M 160,48 L 208,48' fill='none' stroke='currentColor'></path>
<path d='M 16,80 L 32,80' fill='none' stroke='currentColor'></path>
<path d='M 0,112 L 16,112' fill='none' stroke='currentColor'></path>
<path d='M 32,112 L 64,112' fill='none' stroke='currentColor'></path>
<path d='M 0,0 L 0,48' fill='none' stroke='currentColor'></path>
<path d='M 0,48 L 0,112' fill='none' stroke='currentColor'></path>
<path d='M 16,16 L 16,48' fill='none' stroke='currentColor'></path>
<path d='M 16,80 L 16,112' fill='none' stroke='currentColor'></path>
<path d='M 32,80 L 32,112' fill='none' stroke='currentColor'></path>
<path d='M 64,16 L 64,48' fill='none' stroke='currentColor'></path>
<path d='M 112,16 L 112,48' fill='none' stroke='currentColor'></path>
<path d='M 160,16 L 160,48' fill='none' stroke='currentColor'></path>
<path d='M 208,16 L 208,48' fill='none' stroke='currentColor'></path>
<path d='M 256,16 L 256,48' fill='none' stroke='currentColor'></path>
</g>

    </svg>
  
</div>
</li>
</ol>
<ul>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p><code>main.c</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;r_smc_entry.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">main</span> <span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">R_Config_TAU0_0_Start</span><span class="p">();</span>    <span class="cm">/* TAU00,TAU01 operation enable */</span>
</span></span><span class="line"><span class="cl">    <span class="nf">EI</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="mi">1U</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">HALT</span><span class="p">();</span>                 <span class="cm">/* Waiting interrupt */</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><code>Config_TAU0_0_user.c</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">static</span> <span class="kt">void</span> <span class="n">__near</span> <span class="nf">r_Config_TAU0_0_channel0_interrupt</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* Start user code for r_Config_TAU0_0_channel0_interrupt. Do not edit comment generated here */</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">s_tm00_count</span> <span class="o">=</span> <span class="mi">0U</span><span class="p">;</span>        <span class="cm">/* INTTM00 interrupt times counter */</span>
</span></span><span class="line"><span class="cl">    <span class="kt">uint16_t</span> <span class="n">temp_duty</span> <span class="o">=</span> <span class="mi">0U</span><span class="p">;</span>                 <span class="cm">/* Duty factor calculation */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="mi">250</span> <span class="o">==</span> <span class="p">(</span><span class="o">++</span><span class="n">s_tm00_count</span><span class="p">))</span>             <span class="cm">/* Update the duty cycle per 500ms */</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">s_tm00_count</span> <span class="o">=</span> <span class="mi">0U</span><span class="p">;</span>                   <span class="cm">/* Interrupt counter reset */</span>
</span></span><span class="line"><span class="cl">        <span class="n">P5</span> <span class="o">^=</span> <span class="mh">0x04</span><span class="p">;</span>                          <span class="cm">/* Invert LED2 */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">temp_duty</span> <span class="o">=</span> <span class="n">TDR01</span><span class="p">;</span>                   <span class="cm">/* Read the current duty cycle (duty factor) setting */</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">temp_duty</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">_E100_TAU_TDR01_VALUE</span> <span class="o">/</span> <span class="mi">9</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>                                         <span class="cm">/* If current duty cycle is 90% (duty factor is 10%), */</span>
</span></span><span class="line"><span class="cl">            <span class="n">temp_duty</span> <span class="o">=</span> <span class="n">_E100_TAU_TDR01_VALUE</span><span class="p">;</span>    <span class="cm">/* Set duty cycle to 10% (duty factor to 90%) */</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>   <span class="cm">/* Increase duty cycle by 20% (decrease duty factor by 20%) */</span>
</span></span><span class="line"><span class="cl">            <span class="n">temp_duty</span> <span class="o">-=</span> <span class="p">((</span><span class="n">_E100_TAU_TDR01_VALUE</span> <span class="o">/</span> <span class="mi">9</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">TDR01</span> <span class="o">=</span> <span class="n">temp_duty</span><span class="p">;</span>                  <span class="cm">/* Update duty cycle (duty factor) */</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* End user code. Do not edit comment generated here */</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><strong>Test Case</strong></p>
<p><strong>Test Report</strong></p>
<hr>
<h2 id="adc">ADC
</h2><p><strong>Problems</strong>:</p>
<ol>
<li>The api code generated by &ldquo;Code Generator&rdquo; in CS+ is different from
the code generated by &ldquo;Smart Configurator&rdquo;.</li>
</ol>
<hr>
<p><strong>References</strong>:</p>
<ol>
<li><a id="Adc-r1"></a>
<a class="link" href="https://community.renesas.com/mcu-mpu/rl78/f/rl78-forum/32156/adc-configuration"  target="_blank" rel="noopener"
    >ADC Configuration - Forum - RL78 MCU - Renesas Engineering Community</a>
<small>
<ul>
<li>Searched by <code>renesas rl78 adc</code> in <a id="Adc-s1"></a>
<a class="link" href="https://duckduckgo.com/?q=renesas&#43;rl78&#43;adc&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Adc-r2"></a>
<a class="link" href="https://community.renesas.com/mcu-mpu/rl78/f/rl78-forum/31134/adc-sample-code"  target="_blank" rel="noopener"
    >ADC Sample code - Forum - RL78 MCU - Renesas Engineering Community</a>
<small>
<ul>
<li>Found in <a class="link" href="#Adc-s1" >s1</a>
</small></li>
</ul>
</li>
<li><a id="Adc-r3"></a>
<a class="link" href="https://www.renesas.com/en/document/apn/rl78g13-ad-converter-software-trigger-and-sequential-conversion-modes-cc-rl-rev200?language=en"  target="_blank" rel="noopener"
    >RL78/G13 A/D Conveter(Software Trigger and Sequential Conversion Modes) CC-RL - R01AN2581EJ0200 Rev. 2.00</a>
<small>
<ul>
<li>Searched by <code>renesas rl78 ad conversion</code> in <a id="Adc-s2"></a>
<a class="link" href="https://duckduckgo.com/?q=renesas&#43;rl78&#43;ad&#43;conversion&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Adc-r4"></a>
<a class="link" href="https://www.renesas.cn/zh/document/apn/rl78g23-ad-converter-scan-mode?language=en&amp;r=1496646"  target="_blank" rel="noopener"
    >RL78/G23 A/D Converter (Scan mode) - Renesas</a>
<small>
<ul>
<li>Found in <a class="link" href="#Adc-s2" >s2</a>
</small></li>
</ul>
</li>
<li><a id="Adc-r5"></a>
<a class="link" href="https://mcu-selector.renesas.com/en/tags/adc/"  target="_blank" rel="noopener"
    >Web simu</a>
<small>
<ul>
<li>Found on <a class="link" href="https://mcu-selector.renesas.com/en/"  target="_blank" rel="noopener"
    >MCU Simulator Online</a>
</small></li>
</ul>
</li>
</ol>
<hr>
<p><strong>Practices</strong>:</p>
<p>(2025-01-10)</p>
<ol>
<li>
<p><code>Create</code> &gt; <code>Start</code> &gt; <code>Get_ValueResult</code> <sup><a class="link" href="#Adc-r1" >r1-Forum</a></sup></p>
<p>There are only 3 api functions for consideration in the generated source file: <code>Config_S12AD01.c</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">R_Config_S12AD01_Create</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">R_Config_S12AD01_Start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">R_Config_S12AD01_Stop</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">R_Config_S12AD01_Get_ValueResult</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ADC needs to be executed inside interruption <sup><a class="link" href="#Adc-r2" >r2-Forum</a></sup></p>
<p>(2025-01-30)</p>
<ul>
<li>This is not necessary. The <code>R_Config_S12AD0_Get_ValueResult(ADCHANNEL0, &amp;g_result_buffer);</code>
can just put in the <code>while(1U)</code> loop.</li>
</ul>
</li>
<li>
<p>RL78/G13 <sup><a class="link" href="#Adc-r3" >r3-Manual</a></sup> has different <a class="link" href="https://www.renesas.com/en/search?keywords=R01AN2581EJ0200"  target="_blank" rel="noopener"
    >code</a> from F24.</p>
<p>RL78/G23 <sup><a class="link" href="#Adc-r4" >r4-Manual</a></sup> code is not searched yet.</p>
<p>Online simulator <sup><a class="link" href="#Adc-r5" >r5-Simu</a></sup> includes several AD projects.</p>
</li>
<li>
<p>G23 code on web simu used <code>ADCS</code> register, which doesn&rsquo;t exist in F23 project.</p>
</li>
</ol>
<p>(2025-01-30)</p>
<ol start="5">
<li>
<p>I don&rsquo;t set up the interrupt function, and only write the <code>main.c</code></p>
<ul>
<li>
<p>But the <code>~_Start</code> is <strong>necessary before</strong> <code>~_Get_ValueResult</code> to enable conversion.</p>
</li>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p>Smcg select: Software trigger</p>
<p><img src="/post/writenotes/embed/b-test-rl78_beginner/ADC-01-Smcg_ANI0-2025-01-30_162352.png"
	width="1519"
	height="1224"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="124"
		data-flex-basis="297px"
	
>
<img src="/post/writenotes/embed/b-test-rl78_beginner/ADC-02-Smcg_Single_Scan-2025-01-30_163056.png"
	width="686"
	height="672"
	
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="102"
		data-flex-basis="245px"
	
></p>
</li>
</ol>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// main.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;r_smc_entry.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">uint16_t</span> <span class="n">g_result_buffer</span> <span class="o">=</span> <span class="mi">0U</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">g_result_buffer</span> <span class="o">=</span> <span class="mi">0U</span><span class="p">;</span>                           <span class="cm">/* Initialize result buffer */</span>
</span></span><span class="line"><span class="cl">	 <span class="nf">R_Systeminit</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="nf">EI</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">while</span> <span class="p">(</span><span class="mi">1U</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    	<span class="p">{</span>
</span></span><span class="line"><span class="cl"> 	<span class="nf">R_Config_S12AD0_Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="nf">R_Config_S12AD0_Get_ValueResult</span><span class="p">(</span><span class="n">ADCHANNEL0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_result_buffer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>If the value is <code>0x3328d</code>, calculting the source voltage
according to the: <a class="link" href="https://ohmslawcalculator.com/voltage-divider-calculator"  target="_blank" rel="noopener"
    >Voltage Divider Calculator</a></p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 208 233"
      >
      <g transform='translate(8,16)'>
<path d='M 0,0 L 8,0' fill='none' stroke='currentColor'></path>
<path d='M 8,0 L 16,0' fill='none' stroke='currentColor'></path>
<path d='M 0,64 L 8,64' fill='none' stroke='currentColor'></path>
<path d='M 8,64 L 16,64' fill='none' stroke='currentColor'></path>
<path d='M 8,128 L 40,128' fill='none' stroke='currentColor'></path>
<path d='M 152,128 L 160,128' fill='none' stroke='currentColor'></path>
<path d='M 8,0 L 8,16' fill='none' stroke='currentColor'></path>
<path d='M 8,48 L 8,64' fill='none' stroke='currentColor'></path>
<path d='M 8,64 L 8,80' fill='none' stroke='currentColor'></path>
<path d='M 8,112 L 8,128' fill='none' stroke='currentColor'></path>
<path d='M 8,128 L 8,144' fill='none' stroke='currentColor'></path>
<path d='M 8,176 L 8,192' fill='none' stroke='currentColor'></path>
<polygon points='168.000000,128.000000 156.000000,122.400002 156.000000,133.600006' fill='currentColor' transform='rotate(0.000000, 160.000000, 128.000000)'></polygon>
<text text-anchor='middle' x='0' y='36' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='8' y='36' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='8' y='100' fill='currentColor' style='font-size:1em'>R</text>
<text text-anchor='middle' x='8' y='164' fill='currentColor' style='font-size:1em'>R</text>
<text text-anchor='middle' x='8' y='212' fill='currentColor' style='font-size:1em'>G</text>
<text text-anchor='middle' x='16' y='36' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='16' y='100' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='16' y='164' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='16' y='212' fill='currentColor' style='font-size:1em'>N</text>
<text text-anchor='middle' x='24' y='36' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='24' y='212' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='32' y='4' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='32' y='36' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='32' y='68' fill='currentColor' style='font-size:1em'>V</text>
<text text-anchor='middle' x='32' y='100' fill='currentColor' style='font-size:1em'>(</text>
<text text-anchor='middle' x='32' y='164' fill='currentColor' style='font-size:1em'>(</text>
<text text-anchor='middle' x='40' y='4' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='40' y='68' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='40' y='100' fill='currentColor' style='font-size:1em'>4</text>
<text text-anchor='middle' x='40' y='164' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='48' y='4' fill='currentColor' style='font-size:1em'>w</text>
<text text-anchor='middle' x='48' y='36' fill='currentColor' style='font-size:1em'>(</text>
<text text-anchor='middle' x='48' y='100' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='48' y='164' fill='currentColor' style='font-size:1em'>8</text>
<text text-anchor='middle' x='56' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='56' y='36' fill='currentColor' style='font-size:1em'>0</text>
<text text-anchor='middle' x='56' y='100' fill='currentColor' style='font-size:1em'>K</text>
<text text-anchor='middle' x='56' y='132' fill='currentColor' style='font-size:1em'>M</text>
<text text-anchor='middle' x='56' y='164' fill='currentColor' style='font-size:1em'>K</text>
<text text-anchor='middle' x='64' y='4' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='64' y='36' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='64' y='100' fill='currentColor' style='font-size:1em'>)</text>
<text text-anchor='middle' x='64' y='132' fill='currentColor' style='font-size:1em'>C</text>
<text text-anchor='middle' x='64' y='164' fill='currentColor' style='font-size:1em'>)</text>
<text text-anchor='middle' x='72' y='36' fill='currentColor' style='font-size:1em'>7</text>
<text text-anchor='middle' x='72' y='132' fill='currentColor' style='font-size:1em'>U</text>
<text text-anchor='middle' x='80' y='4' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='80' y='36' fill='currentColor' style='font-size:1em'>V</text>
<text text-anchor='middle' x='80' y='132' fill='currentColor' style='font-size:1em'>_</text>
<text text-anchor='middle' x='88' y='4' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='88' y='36' fill='currentColor' style='font-size:1em'>)</text>
<text text-anchor='middle' x='88' y='132' fill='currentColor' style='font-size:1em'>B</text>
<text text-anchor='middle' x='96' y='4' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='96' y='132' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='104' y='4' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='104' y='132' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='112' y='4' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='112' y='132' fill='currentColor' style='font-size:1em'>V</text>
<text text-anchor='middle' x='120' y='4' fill='currentColor' style='font-size:1em'>y</text>
<text text-anchor='middle' x='120' y='132' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='128' y='132' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='136' y='4' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='136' y='132' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='144' y='4' fill='currentColor' style='font-size:1em'>5</text>
<text text-anchor='middle' x='152' y='4' fill='currentColor' style='font-size:1em'>.</text>
<text text-anchor='middle' x='160' y='4' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='176' y='4' fill='currentColor' style='font-size:1em'>V</text>
<text text-anchor='middle' x='176' y='132' fill='currentColor' style='font-size:1em'>A</text>
<text text-anchor='middle' x='184' y='132' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='192' y='132' fill='currentColor' style='font-size:1em'>C</text>
</g>

    </svg>
  
</div>
$$
   \begin{aligned}
   \frac{x}{4096} \times 5 = y \\\
   y = \frac{V_S \times R_2}{R_1 + R_2} \\\
   = \frac{V_S \times 47}{47 + 18} \\\
   \end{aligned}
   $$<ul>
<li>
<p>12-bit A/D converter: 4096 levels</p>
</li>
<li>
<p>Reference voltage is VDD = 5V to the MCU</p>
</li>
<li>
<p>$R_2$ = 18K, $R_1$ = 47K</p>
$$
     \begin{aligned}
     y = \frac{3328}{4096} \times 5 = 4.0625 \\\
     V_S = 4.0625 \times 65 / 18 =  14.67
     \end{aligned}
     $$<p>14.67 + 0.7 = 15.37 V, which is close to Power supply 15.2 V.</p>
</li>
</ul>
</li>
</ol>
<hr>
<h2 id="iar-ide">IAR IDE
</h2><h3 id="blinky-led">Blinky LED
</h3><p><strong>Problems</strong>:</p>
<ol>
<li>Use IAR IDE to implement a binking LED project for RL78 F23</li>
</ol>
<hr>
<p><strong>Issues</strong>:</p>
<ol>
<li><a class="link" href="#Iar-Bled-Iss1" >Building</a></li>
<li><a class="link" href="#Iar-Bled-Iss2" >Debug</a></li>
</ol>
<hr>
<p><strong>References</strong>:</p>
<ol>
<li><a id="Iar-Bled-r1"></a>
<a class="link" href="https://youtu.be/jzBzVTk5TBY"  target="_blank" rel="noopener"
    >Create a blinky project from scratch (IAR™) - YouTube - RenesasPresents</a>
<small>
<ul>
<li>Searched by <code>renesas IAR blink LED project</code> in
<a class="link" href="https://duckduckgo.com/?q=renesas&#43;IAR&#43;blink&#43;LED&#43;project&amp;ia=videos&amp;iax=videos"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Iar-Bled-r2"></a>
<a class="link" href="https://updates.iar.com/filestore/standard/001/001/960/ew/doc/RenesasSCUserGuide.pdf"  target="_blank" rel="noopener"
    >RL78 Smart Configurator User&rsquo;s Guide: IAR</a>
<small>
<ul>
<li>Seached by <code>renesas R20AN0581</code> in
<a class="link" href="https://duckduckgo.com/?q=renesas&#43;R20AN0581&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a></li>
<li>Mentioned in <a class="link" href="https://www.renesas.com/en/document/apn/rl78g23-sms-led-blinking-dimming-control"  target="_blank" rel="noopener"
    >RL78/G23 - Renesas Electronics Corporation</a></li>
<li>Searched by <code>renesas RL78 IAR blink LED project</code> in
<a class="link" href="https://duckduckgo.com/?q=renesas&#43;RL78&#43;IAR&#43;blink&#43;LED&#43;project&amp;kp=1&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Iar-Bled-r3"></a>
<a class="link" href="https://www.renesas.com/en/video/using-smart-configurator-iar-embedded-workbench-rl78-22-creating-ewb-project-smart-configurator?queryID=6c31bcc86e4803c6ebf3dedd8a41e28d"  target="_blank" rel="noopener"
    >Using Smart Configurator with IAR Embedded Workbench for RL78 (2/2) - Creating an EWB Project for Smart Configurator</a></li>
<li><a id="Iar-Bled-r4"></a>
<a class="link" href="https://updates.iar.com/filestore/standard/001/001/123/arm/doc/infocenter/GettingStarted/BasicDebugging/BasicDebugging.ENU.html"  target="_blank" rel="noopener"
    >Basic debugging - IAR</a>
<small>
<ul>
<li>Searched by <code>IAR debugg settings</code> in
<a class="link" href="https://duckduckgo.com/?q=IAR&#43;debugg&#43;settings&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Iar-Bled-r5"></a>
<a class="link" href="https://updates.iar.com/filestore/standard/001/001/960/ew/doc/EWRL78_DebuggingGuide.ENU.pdf#page=28.12"  target="_blank" rel="noopener"
    >C-SPY® Debugging Guide for the Renesas - IAR</a>
<small>
<ul>
<li>Searched by <code>IAR debug settings for renesas e2 lite</code> in
<a class="link" href="https://duckduckgo.com/?q=IAR&#43;debug&#43;settings&#43;for&#43;renesas&#43;e2&#43;lite&amp;kp=1&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Iar-Bled-r6"></a>
<a class="link" href="https://youtu.be/PqkT5bDvcCM?t=763"  target="_blank" rel="noopener"
    >IAR Embedded Workbench Overview - Part 1 - YouTube - IAR</a>
<small>
<ul>
<li>Searched by <code>IAR debugging demostration</code> in
<a class="link" href="https://duckduckgo.com/?q=IAR&#43;debugging&#43;demostration&amp;ia=videos&amp;iax=videos&amp;iai=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DPqkT5bDvcCM"  target="_blank" rel="noopener"
    >DDG videos</a>
</small></li>
</ul>
</li>
</ol>
<hr>
<p><strong>Practices</strong>:</p>
<p><a id="Iar-Bled-Iss1"></a></p>
<p>(2025-04-08)</p>
<ol>
<li>
<p>✅ Building project with Smart Configurator + IAR</p>
<ul>
<li>
<p><strong>Supports</strong>:</p>
<ol>
<li>Create Smart Configurator project under the IAR project folder ➔ Generate Code (.ipcf and .ewp same dir)<sup><a class="link" href="#Iar-Bled-r3" >r3-Video</a></sup></li>
</ol>
</li>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p>Build Errors:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Error<span class="o">[</span>Lp004<span class="o">]</span>: actual size <span class="o">(</span>0x5<span class="o">)</span> exceeds maximum size <span class="o">(</span>0x4<span class="o">)</span> <span class="k">for</span> block <span class="s2">&#34;OPT_BYTE&#34;</span>			
</span></span><span class="line"><span class="cl">Error<span class="o">[</span>Lp004<span class="o">]</span>: actual size <span class="o">(</span>0x10<span class="o">)</span> exceeds maximum size <span class="o">(</span>0xa<span class="o">)</span> <span class="k">for</span> block <span class="s2">&#34;SECUR_ID&#34;</span>			
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/IAR_Blink_F23-01-Build_Error_OPT_Byte-2025-04-09_104732.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
</li>
</ol>
<p>(2025-04-10)</p>
<ol start="2">
<li>
<p>Set the Device to <strong>matched MCU</strong> model<sup><a class="link" href="#Iar-Bled-r6" >r6-Ytb</a></sup></p>
<p><img src="/IAR_Blink_F23-02-Change_Device-2025-04-10_170544.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
</li>
</ol>
</li>
<li>
<p><strong>Results</strong>:</p>
<ol>
<li>Build succeeded.</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<p><a id="Iar-Bled-Iss2"></a></p>
<p>(2025-04-11)</p>
<ol start="2">
<li>
<p>✅ Debug with IAR</p>
<ul>
<li>
<p><strong>Supports</strong>:</p>
<ol>
<li>
<p>Set breakpoint<sup><a class="link" href="#Iar-Bled-r4" >r4-Basic</a>, <a class="link" href="#Iar-Bled-r5" >r5-Guide</a></sup></p>
</li>
<li>
<p>Sepcify the debugger to <code>E2 Lite</code>, and check the option: &ldquo;Run to main&rdquo; in project options
<sup><a class="link" href="https://youtu.be/PqkT5bDvcCM?t=1052"  target="_blank" rel="noopener"
    >r6-Ytb</a></sup></p>
</li>
</ol>
</li>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>
<p>Unable to set a breakpoint at <code>main()</code> function.
And it never hit any breakpoints:</p>
<p><img src="/IAR_Debug-01-Cannot_Break_At_Main-2025-04-11_155816.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
</li>
<li>
<p><strong>Connecting the E2 Lite debugger</strong> resolve this error</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<p>(2025-04-21T16:40:09)</p>
<ol start="3">
<li>
<p>✅ IAR blink LED</p>
<ul>
<li>
<p><strong>Supports</strong>:</p>
<ol>
<li>
<p><code>MCU_V_D_IN1</code> is high side pin.</p>
</li>
<li>
<p><del>Same code can blink the LED during debugging in CS+, however debugging with IAR doesn&rsquo;t result in LED blinking.</del>
Check pin definition and ensure its reference is correct.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;r_smc_entry.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">delay</span><span class="p">(</span><span class="kt">long</span> <span class="n">d</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">d</span><span class="o">--</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>   
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nf">PIN_WRITE</span><span class="p">(</span><span class="n">MCU_V_D_IN1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nf">delay</span><span class="p">(</span><span class="mi">500000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nf">PIN_WRITE</span><span class="p">(</span><span class="n">MCU_V_D_IN1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nf">delay</span><span class="p">(</span><span class="mi">500000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="migrate-from-cs">Migrate from CS+
</h3><p><strong>Problems</strong>:</p>
<ol>
<li>How to port our previous Renesas CS+ projects to IAR projects</li>
</ol>
<hr>
<p><strong>References</strong>:</p>
<ol>
<li><a id="Iar-Mig-r1"></a>
<a class="link" href="https://www.renesas.com/en/document/apn/rl78-software-porting-guide-porting-sample-code-generated-smart-configurator-cs-e2-studio-iar-rev100"  target="_blank" rel="noopener"
    >RL78 Software Porting Guide - Renesas Electronics Corporation</a>
<small>
<ul>
<li>This guide is for porting between different MCUs.</li>
<li>Searched by <code>How to port Renesas CS+ projects to IAR projects</code> in <a id="Iar-Mig-s1"></a>
<a class="link" href="https://duckduckgo.com/?q=How&#43;to&#43;port&#43;Renesas&#43;CS%2B&#43;projects&#43;to&#43;IAR&#43;projects&amp;ia=web"  target="_blank" rel="noopener"
    >DDG</a>
</small></li>
</ul>
</li>
<li><a id="Iar-Mig-r2"></a>
<a class="link" href="https://wwwfiles.iar.com/rl78/EWRL78_MigratingFromRenesasCA78K0R.pdf"  target="_blank" rel="noopener"
    >Migration guide: Migrating from the CS+ CA78K0R toolchain for RL78 to IAR Embedded Workbench® for RL78 - IAR</a>
<small>
<ul>
<li>Found in <a class="link" href="#Iar-Mig-s1" >s1</a>
</small></li>
</ul>
</li>
<li><a id="Iar-Mig-r3"></a>
<a class="link" href="https://community.renesas.com/mcu/rl78/f/rl78-forum/10723/porting-the-code-from-cc-rl-compiler-to-iar?queryID=c87ac811316adc5a3ce5c104b23fa574"  target="_blank" rel="noopener"
    >Porting the code from CC-RL compiler to IAR</a>
<small>
<ul>
<li>Searched by <code>port CS+ to IAR</code> in
<a class="link" href="https://www.renesas.com/en/search?keywords=port%20CS%2B%20to%20IAR&amp;page=2"  target="_blank" rel="noopener"
    >Renesas</a>
</small></li>
</ul>
</li>
</ol>
<hr>
<p><strong>Notes</strong>:</p>
<p>(2025-04-16T11:06:03)</p>
<ol>
<li>
<p>IAR has a tool: <code>Convert to IAR for RL78</code><sup><a class="link" href="#Iar-Mig-r2" >r2-guide</a></sup></p>
<ul>
<li>
<p><strong>Supports</strong>:</p>
<ol>
<li>There is only &ldquo;Project type&rdquo; selectable: &ldquo;CubeSuite for RL78&rdquo;</li>
</ol>
</li>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>Using default settings leads to a compilation error</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="build-options">Build Options
</h3><p><strong>Problems</strong>:</p>
<ol>
<li>Compilation options settings</li>
</ol>
<hr>
<p><strong>Issues</strong>:</p>
<ol>
<li>Optimization level</li>
<li>Error</li>
</ol>
<hr>
<p><strong>Notes</strong>:</p>
<p>(2025-04-22)</p>
<ol>
<li>
<p>Optimization level:</p>
<ul>
<li>
<p><strong>Supports</strong>:</p>
<ol>
<li>Do not apply optimization for step-by-step debugging</li>
</ol>
</li>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>Project -&gt; Options -&gt; C/C++ Compiler -&gt; Level: None</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<p>(2025-04-24T10:17:31)</p>
<ol start="2">
<li>
<p>Error:</p>
<ul>
<li>
<p><strong>Supports</strong>:</p>
<ol>
<li>
<p>Debug the RLIN3 example project</p>
</li>
<li>
<p>Pop-up window:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">.----------------------------------------.
</span></span><span class="line"><span class="cl"><span class="p">|</span>E2LITE                                × <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>                                        <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>    Target power mode mismatch          <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span> ?                                      <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>    Press YES to try again.             <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>                                        <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>    Pressing NO will end debug session. <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>                                        <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>                     Yes     No         <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;----------------------------------------&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>As shown in title of &ldquo;E2Lite Hardware Setup (R7F124FPJ)&rdquo;</p>
<ul>
<li>The F23 MCU <strong>isn&rsquo;t compatiable</strong> with the debugger setting for F24 MCU.</li>
</ul>
</li>
</ol>
</li>
<li>
<p><strong>Actions</strong>:</p>
<ol>
<li>By only connecting the debugger to the <strong>F24 development board</strong>,
the program can be downloaded and debugged without needing to separately power the development board (using the default hardware setup).</li>
</ol>
</li>
</ul>
</li>
</ol>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/ee/">EE</a>
        
    </section>


    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
	const mainArticleElement = document.querySelector(".main-article");
        renderMathInElement(mainArticleElement, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>

    

    

    


    

    


    
    


    
    


    
    

    

    

      
      <link type="text/css" rel="stylesheet" href="https://unpkg.com/jsmind@0.8.7/style/jsmind.css" />

      <script type="text/javascript" src="https://unpkg.com/jsmind@0.8.7/es6/jsmind.js"></script>

      <script>
          console.log("Hello from jsmind!");
      </script>

      
      <div id="jsmind_container"></div>

      
      <script type="text/javascript">
        
        function renderJsMindMap(containerId, dataString) {
          try {
            console.log("Attempting to render mind map with data:", dataString);
            
            
            var mindData = JSON.parse(dataString);
            
            var options = {
              container: containerId,
              editable: false,
              theme: 'orange'
            };
            
            var jm = new jsMind(options);
            jm.show(mindData);
            console.log("Successfully rendered mind map in", containerId);
          } catch (e) {
            console.error("Error rendering mind map:", e, "with data:", dataString);
          }
        }
        
        
        document.addEventListener('DOMContentLoaded', function() {
          setTimeout(function() {
            if (window.jsmindMaps && window.jsmindMaps.length) {
              console.log("Found", window.jsmindMaps.length, "mind maps to render");
              window.jsmindMaps.forEach(function(map) {
                renderJsMindMap(map.containerId, map.dataString);
              });
            }
          }, 1000); 
        });
      </script>

    


</article>



    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/post/writenotes/embed/b-board-renesas/">
        
        
            <div class="article-image">
                
                    <img src="https://www.renesas.com/sites/default/files/styles/blog/public/2021-10/splash.jpg?itok=-Y3ykqCC" loading="lazy" data-key="" data-hash="https://www.renesas.com/sites/default/files/styles/blog/public/2021-10/splash.jpg?itok=-Y3ykqCC"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Memo: EE - Boards | Renesas SDK</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/writenotes/embed/b-board-raspi/">
        
        
            <div class="article-image">
                
                    <img src="https://raw.githubusercontent.com/pinout-xyz/Pinout.xyz/master/resources/raspberry-pi-pinout.png" loading="lazy" data-key="" data-hash="https://raw.githubusercontent.com/pinout-xyz/Pinout.xyz/master/resources/raspberry-pi-pinout.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Memo: EE - Boards | Raspi As MCU</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/writenotes/embed/b-test-arduino/">
        
        
            <div class="article-image">
                
                    <img src="https://arduinogetstarted.com/images/tutorial/arduino-led-wiring-diagram.jpg" loading="lazy" data-key="" data-hash="https://arduinogetstarted.com/images/tutorial/arduino-led-wiring-diagram.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Test: EE - Boards | Arduino Beginners</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/writenotes/embed/b-board-arduino/">
        
        
            <div class="article-image">
                
                    <img src="https://circuitdigest.com/sites/default/files/field/image/TYPES%20OF%20ARDUINO%20BOARDS.jpg" loading="lazy" data-key="" data-hash="https://circuitdigest.com/sites/default/files/field/image/TYPES%20OF%20ARDUINO%20BOARDS.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Memo: EE - Boards | Arduino Products Review</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/writenotes/embed/b-comm-i2c_spi/">
        
        
            <div class="article-image">
                
                    <img src="https://camo.githubusercontent.com/11db1977635115805436cb0521d6730576947e4949bbc3734dada1cbdfe44a0d/68747470733a2f2f7777772e656c656374726f6e6963736875622e6f72672f77702d636f6e74656e742f75706c6f6164732f323031372f30362f53657269616c2d436f6d6d756e69636174696f6e2e6a7067" loading="lazy" data-key="" data-hash="https://camo.githubusercontent.com/11db1977635115805436cb0521d6730576947e4949bbc3734dada1cbdfe44a0d/68747470733a2f2f7777772e656c656374726f6e6963736875622e6f72672f77702d636f6e74656e742f75706c6f6164732f323031372f30362f53657269616c2d436f6d6d756e69636174696f6e2e6a7067"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Memo: EE - Comm | I2C and SPI Bus</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2025 Zichen Wang
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
